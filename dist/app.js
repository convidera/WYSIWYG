/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/noty/lib/noty.js":
/*!***************************************!*\
  !*** ./node_modules/noty/lib/noty.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* \r\n  @package NOTY - Dependency-free notification library \r\n  @version version: 3.1.4 \r\n  @contributors https://github.com/needim/noty/graphs/contributors \r\n  @documentation Examples and Documentation - http://needim.github.com/noty \r\n  @license Licensed under the MIT licenses: http://www.opensource.org/licenses/mit-license.php \r\n*/\r\n\r\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory();\n\telse {}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 6);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.css = exports.deepExtend = exports.animationEndEvents = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.inArray = inArray;\nexports.stopPropagation = stopPropagation;\nexports.generateID = generateID;\nexports.outerHeight = outerHeight;\nexports.addListener = addListener;\nexports.hasClass = hasClass;\nexports.addClass = addClass;\nexports.removeClass = removeClass;\nexports.remove = remove;\nexports.classList = classList;\nexports.visibilityChangeFlow = visibilityChangeFlow;\nexports.createAudioElements = createAudioElements;\n\nvar _api = __webpack_require__(1);\n\nvar API = _interopRequireWildcard(_api);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar animationEndEvents = exports.animationEndEvents = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';\n\nfunction inArray(needle, haystack, argStrict) {\n  var key = void 0;\n  var strict = !!argStrict;\n\n  if (strict) {\n    for (key in haystack) {\n      if (haystack.hasOwnProperty(key) && haystack[key] === needle) {\n        return true;\n      }\n    }\n  } else {\n    for (key in haystack) {\n      if (haystack.hasOwnProperty(key) && haystack[key] === needle) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction stopPropagation(evt) {\n  evt = evt || window.event;\n\n  if (typeof evt.stopPropagation !== 'undefined') {\n    evt.stopPropagation();\n  } else {\n    evt.cancelBubble = true;\n  }\n}\n\nvar deepExtend = exports.deepExtend = function deepExtend(out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    var obj = arguments[i];\n\n    if (!obj) continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        if (Array.isArray(obj[key])) {\n          out[key] = obj[key];\n        } else if (_typeof(obj[key]) === 'object' && obj[key] !== null) {\n          out[key] = deepExtend(out[key], obj[key]);\n        } else {\n          out[key] = obj[key];\n        }\n      }\n    }\n  }\n\n  return out;\n};\n\nfunction generateID() {\n  var prefix = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n  var id = 'noty_' + prefix + '_';\n\n  id += 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0;\n    var v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n\n  return id;\n}\n\nfunction outerHeight(el) {\n  var height = el.offsetHeight;\n  var style = window.getComputedStyle(el);\n\n  height += parseInt(style.marginTop) + parseInt(style.marginBottom);\n  return height;\n}\n\nvar css = exports.css = function () {\n  var cssPrefixes = ['Webkit', 'O', 'Moz', 'ms'];\n  var cssProps = {};\n\n  function camelCase(string) {\n    return string.replace(/^-ms-/, 'ms-').replace(/-([\\da-z])/gi, function (match, letter) {\n      return letter.toUpperCase();\n    });\n  }\n\n  function getVendorProp(name) {\n    var style = document.body.style;\n    if (name in style) return name;\n\n    var i = cssPrefixes.length;\n    var capName = name.charAt(0).toUpperCase() + name.slice(1);\n    var vendorName = void 0;\n\n    while (i--) {\n      vendorName = cssPrefixes[i] + capName;\n      if (vendorName in style) return vendorName;\n    }\n\n    return name;\n  }\n\n  function getStyleProp(name) {\n    name = camelCase(name);\n    return cssProps[name] || (cssProps[name] = getVendorProp(name));\n  }\n\n  function applyCss(element, prop, value) {\n    prop = getStyleProp(prop);\n    element.style[prop] = value;\n  }\n\n  return function (element, properties) {\n    var args = arguments;\n    var prop = void 0;\n    var value = void 0;\n\n    if (args.length === 2) {\n      for (prop in properties) {\n        if (properties.hasOwnProperty(prop)) {\n          value = properties[prop];\n          if (value !== undefined && properties.hasOwnProperty(prop)) {\n            applyCss(element, prop, value);\n          }\n        }\n      }\n    } else {\n      applyCss(element, args[1], args[2]);\n    }\n  };\n}();\n\nfunction addListener(el, events, cb) {\n  var useCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  events = events.split(' ');\n  for (var i = 0; i < events.length; i++) {\n    if (document.addEventListener) {\n      el.addEventListener(events[i], cb, useCapture);\n    } else if (document.attachEvent) {\n      el.attachEvent('on' + events[i], cb);\n    }\n  }\n}\n\nfunction hasClass(element, name) {\n  var list = typeof element === 'string' ? element : classList(element);\n  return list.indexOf(' ' + name + ' ') >= 0;\n}\n\nfunction addClass(element, name) {\n  var oldList = classList(element);\n  var newList = oldList + name;\n\n  if (hasClass(oldList, name)) return;\n\n  // Trim the opening space.\n  element.className = newList.substring(1);\n}\n\nfunction removeClass(element, name) {\n  var oldList = classList(element);\n  var newList = void 0;\n\n  if (!hasClass(element, name)) return;\n\n  // Replace the class name.\n  newList = oldList.replace(' ' + name + ' ', ' ');\n\n  // Trim the opening and closing spaces.\n  element.className = newList.substring(1, newList.length - 1);\n}\n\nfunction remove(element) {\n  if (element.parentNode) {\n    element.parentNode.removeChild(element);\n  }\n}\n\nfunction classList(element) {\n  return (' ' + (element && element.className || '') + ' ').replace(/\\s+/gi, ' ');\n}\n\nfunction visibilityChangeFlow() {\n  var hidden = void 0;\n  var visibilityChange = void 0;\n  if (typeof document.hidden !== 'undefined') {\n    // Opera 12.10 and Firefox 18 and later support\n    hidden = 'hidden';\n    visibilityChange = 'visibilitychange';\n  } else if (typeof document.msHidden !== 'undefined') {\n    hidden = 'msHidden';\n    visibilityChange = 'msvisibilitychange';\n  } else if (typeof document.webkitHidden !== 'undefined') {\n    hidden = 'webkitHidden';\n    visibilityChange = 'webkitvisibilitychange';\n  }\n\n  function onVisibilityChange() {\n    API.PageHidden = document[hidden];\n    handleVisibilityChange();\n  }\n\n  function onBlur() {\n    API.PageHidden = true;\n    handleVisibilityChange();\n  }\n\n  function onFocus() {\n    API.PageHidden = false;\n    handleVisibilityChange();\n  }\n\n  function handleVisibilityChange() {\n    if (API.PageHidden) stopAll();else resumeAll();\n  }\n\n  function stopAll() {\n    setTimeout(function () {\n      Object.keys(API.Store).forEach(function (id) {\n        if (API.Store.hasOwnProperty(id)) {\n          if (API.Store[id].options.visibilityControl) {\n            API.Store[id].stop();\n          }\n        }\n      });\n    }, 100);\n  }\n\n  function resumeAll() {\n    setTimeout(function () {\n      Object.keys(API.Store).forEach(function (id) {\n        if (API.Store.hasOwnProperty(id)) {\n          if (API.Store[id].options.visibilityControl) {\n            API.Store[id].resume();\n          }\n        }\n      });\n      API.queueRenderAll();\n    }, 100);\n  }\n\n  if (visibilityChange) {\n    addListener(document, visibilityChange, onVisibilityChange);\n  }\n\n  addListener(window, 'blur', onBlur);\n  addListener(window, 'focus', onFocus);\n}\n\nfunction createAudioElements(ref) {\n  if (ref.hasSound) {\n    var audioElement = document.createElement('audio');\n\n    ref.options.sounds.sources.forEach(function (s) {\n      var source = document.createElement('source');\n      source.src = s;\n      source.type = 'audio/' + getExtension(s);\n      audioElement.appendChild(source);\n    });\n\n    if (ref.barDom) {\n      ref.barDom.appendChild(audioElement);\n    } else {\n      document.querySelector('body').appendChild(audioElement);\n    }\n\n    audioElement.volume = ref.options.sounds.volume;\n\n    if (!ref.soundPlayed) {\n      audioElement.play();\n      ref.soundPlayed = true;\n    }\n\n    audioElement.onended = function () {\n      remove(audioElement);\n    };\n  }\n}\n\nfunction getExtension(fileName) {\n  return fileName.match(/\\.([^.]+)$/)[1];\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Defaults = exports.Store = exports.Queues = exports.DefaultMaxVisible = exports.docTitle = exports.DocModalCount = exports.PageHidden = undefined;\nexports.getQueueCounts = getQueueCounts;\nexports.addToQueue = addToQueue;\nexports.removeFromQueue = removeFromQueue;\nexports.queueRender = queueRender;\nexports.queueRenderAll = queueRenderAll;\nexports.ghostFix = ghostFix;\nexports.build = build;\nexports.hasButtons = hasButtons;\nexports.handleModal = handleModal;\nexports.handleModalClose = handleModalClose;\nexports.queueClose = queueClose;\nexports.dequeueClose = dequeueClose;\nexports.fire = fire;\nexports.openFlow = openFlow;\nexports.closeFlow = closeFlow;\n\nvar _utils = __webpack_require__(0);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar PageHidden = exports.PageHidden = false;\nvar DocModalCount = exports.DocModalCount = 0;\n\nvar DocTitleProps = {\n  originalTitle: null,\n  count: 0,\n  changed: false,\n  timer: -1\n};\n\nvar docTitle = exports.docTitle = {\n  increment: function increment() {\n    DocTitleProps.count++;\n\n    docTitle._update();\n  },\n\n  decrement: function decrement() {\n    DocTitleProps.count--;\n\n    if (DocTitleProps.count <= 0) {\n      docTitle._clear();\n      return;\n    }\n\n    docTitle._update();\n  },\n\n  _update: function _update() {\n    var title = document.title;\n\n    if (!DocTitleProps.changed) {\n      DocTitleProps.originalTitle = title;\n      document.title = '(' + DocTitleProps.count + ') ' + title;\n      DocTitleProps.changed = true;\n    } else {\n      document.title = '(' + DocTitleProps.count + ') ' + DocTitleProps.originalTitle;\n    }\n  },\n\n  _clear: function _clear() {\n    if (DocTitleProps.changed) {\n      DocTitleProps.count = 0;\n      document.title = DocTitleProps.originalTitle;\n      DocTitleProps.changed = false;\n    }\n  }\n};\n\nvar DefaultMaxVisible = exports.DefaultMaxVisible = 5;\n\nvar Queues = exports.Queues = {\n  global: {\n    maxVisible: DefaultMaxVisible,\n    queue: []\n  }\n};\n\nvar Store = exports.Store = {};\n\nvar Defaults = exports.Defaults = {\n  type: 'alert',\n  layout: 'topRight',\n  theme: 'mint',\n  text: '',\n  timeout: false,\n  progressBar: true,\n  closeWith: ['click'],\n  animation: {\n    open: 'noty_effects_open',\n    close: 'noty_effects_close'\n  },\n  id: false,\n  force: false,\n  killer: false,\n  queue: 'global',\n  container: false,\n  buttons: [],\n  callbacks: {\n    beforeShow: null,\n    onShow: null,\n    afterShow: null,\n    onClose: null,\n    afterClose: null,\n    onClick: null,\n    onHover: null,\n    onTemplate: null\n  },\n  sounds: {\n    sources: [],\n    volume: 1,\n    conditions: []\n  },\n  titleCount: {\n    conditions: []\n  },\n  modal: false,\n  visibilityControl: false\n\n  /**\r\n   * @param {string} queueName\r\n   * @return {object}\r\n   */\n};function getQueueCounts() {\n  var queueName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'global';\n\n  var count = 0;\n  var max = DefaultMaxVisible;\n\n  if (Queues.hasOwnProperty(queueName)) {\n    max = Queues[queueName].maxVisible;\n    Object.keys(Store).forEach(function (i) {\n      if (Store[i].options.queue === queueName && !Store[i].closed) count++;\n    });\n  }\n\n  return {\n    current: count,\n    maxVisible: max\n  };\n}\n\n/**\r\n * @param {Noty} ref\r\n * @return {void}\r\n */\nfunction addToQueue(ref) {\n  if (!Queues.hasOwnProperty(ref.options.queue)) {\n    Queues[ref.options.queue] = { maxVisible: DefaultMaxVisible, queue: [] };\n  }\n\n  Queues[ref.options.queue].queue.push(ref);\n}\n\n/**\r\n * @param {Noty} ref\r\n * @return {void}\r\n */\nfunction removeFromQueue(ref) {\n  if (Queues.hasOwnProperty(ref.options.queue)) {\n    var queue = [];\n    Object.keys(Queues[ref.options.queue].queue).forEach(function (i) {\n      if (Queues[ref.options.queue].queue[i].id !== ref.id) {\n        queue.push(Queues[ref.options.queue].queue[i]);\n      }\n    });\n    Queues[ref.options.queue].queue = queue;\n  }\n}\n\n/**\r\n * @param {string} queueName\r\n * @return {void}\r\n */\nfunction queueRender() {\n  var queueName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'global';\n\n  if (Queues.hasOwnProperty(queueName)) {\n    var noty = Queues[queueName].queue.shift();\n\n    if (noty) noty.show();\n  }\n}\n\n/**\r\n * @return {void}\r\n */\nfunction queueRenderAll() {\n  Object.keys(Queues).forEach(function (queueName) {\n    queueRender(queueName);\n  });\n}\n\n/**\r\n * @param {Noty} ref\r\n * @return {void}\r\n */\nfunction ghostFix(ref) {\n  var ghostID = Utils.generateID('ghost');\n  var ghost = document.createElement('div');\n  ghost.setAttribute('id', ghostID);\n  Utils.css(ghost, {\n    height: Utils.outerHeight(ref.barDom) + 'px'\n  });\n\n  ref.barDom.insertAdjacentHTML('afterend', ghost.outerHTML);\n\n  Utils.remove(ref.barDom);\n  ghost = document.getElementById(ghostID);\n  Utils.addClass(ghost, 'noty_fix_effects_height');\n  Utils.addListener(ghost, Utils.animationEndEvents, function () {\n    Utils.remove(ghost);\n  });\n}\n\n/**\r\n * @param {Noty} ref\r\n * @return {void}\r\n */\nfunction build(ref) {\n  findOrCreateContainer(ref);\n\n  var markup = '<div class=\"noty_body\">' + ref.options.text + '</div>' + buildButtons(ref) + '<div class=\"noty_progressbar\"></div>';\n\n  ref.barDom = document.createElement('div');\n  ref.barDom.setAttribute('id', ref.id);\n  Utils.addClass(ref.barDom, 'noty_bar noty_type__' + ref.options.type + ' noty_theme__' + ref.options.theme);\n\n  ref.barDom.innerHTML = markup;\n\n  fire(ref, 'onTemplate');\n}\n\n/**\r\n * @param {Noty} ref\r\n * @return {boolean}\r\n */\nfunction hasButtons(ref) {\n  return !!(ref.options.buttons && Object.keys(ref.options.buttons).length);\n}\n\n/**\r\n * @param {Noty} ref\r\n * @return {string}\r\n */\nfunction buildButtons(ref) {\n  if (hasButtons(ref)) {\n    var buttons = document.createElement('div');\n    Utils.addClass(buttons, 'noty_buttons');\n\n    Object.keys(ref.options.buttons).forEach(function (key) {\n      buttons.appendChild(ref.options.buttons[key].dom);\n    });\n\n    ref.options.buttons.forEach(function (btn) {\n      buttons.appendChild(btn.dom);\n    });\n    return buttons.outerHTML;\n  }\n  return '';\n}\n\n/**\r\n * @param {Noty} ref\r\n * @return {void}\r\n */\nfunction handleModal(ref) {\n  if (ref.options.modal) {\n    if (DocModalCount === 0) {\n      createModal(ref);\n    }\n\n    exports.DocModalCount = DocModalCount += 1;\n  }\n}\n\n/**\r\n * @param {Noty} ref\r\n * @return {void}\r\n */\nfunction handleModalClose(ref) {\n  if (ref.options.modal && DocModalCount > 0) {\n    exports.DocModalCount = DocModalCount -= 1;\n\n    if (DocModalCount <= 0) {\n      var modal = document.querySelector('.noty_modal');\n\n      if (modal) {\n        Utils.removeClass(modal, 'noty_modal_open');\n        Utils.addClass(modal, 'noty_modal_close');\n        Utils.addListener(modal, Utils.animationEndEvents, function () {\n          Utils.remove(modal);\n        });\n      }\n    }\n  }\n}\n\n/**\r\n * @return {void}\r\n */\nfunction createModal() {\n  var body = document.querySelector('body');\n  var modal = document.createElement('div');\n  Utils.addClass(modal, 'noty_modal');\n  body.insertBefore(modal, body.firstChild);\n  Utils.addClass(modal, 'noty_modal_open');\n\n  Utils.addListener(modal, Utils.animationEndEvents, function () {\n    Utils.removeClass(modal, 'noty_modal_open');\n  });\n}\n\n/**\r\n * @param {Noty} ref\r\n * @return {void}\r\n */\nfunction findOrCreateContainer(ref) {\n  if (ref.options.container) {\n    ref.layoutDom = document.querySelector(ref.options.container);\n    return;\n  }\n\n  var layoutID = 'noty_layout__' + ref.options.layout;\n  ref.layoutDom = document.querySelector('div#' + layoutID);\n\n  if (!ref.layoutDom) {\n    ref.layoutDom = document.createElement('div');\n    ref.layoutDom.setAttribute('id', layoutID);\n    ref.layoutDom.setAttribute('role', 'alert');\n    ref.layoutDom.setAttribute('aria-live', 'polite');\n    Utils.addClass(ref.layoutDom, 'noty_layout');\n    document.querySelector('body').appendChild(ref.layoutDom);\n  }\n}\n\n/**\r\n * @param {Noty} ref\r\n * @return {void}\r\n */\nfunction queueClose(ref) {\n  if (ref.options.timeout) {\n    if (ref.options.progressBar && ref.progressDom) {\n      Utils.css(ref.progressDom, {\n        transition: 'width ' + ref.options.timeout + 'ms linear',\n        width: '0%'\n      });\n    }\n\n    clearTimeout(ref.closeTimer);\n\n    ref.closeTimer = setTimeout(function () {\n      ref.close();\n    }, ref.options.timeout);\n  }\n}\n\n/**\r\n * @param {Noty} ref\r\n * @return {void}\r\n */\nfunction dequeueClose(ref) {\n  if (ref.options.timeout && ref.closeTimer) {\n    clearTimeout(ref.closeTimer);\n    ref.closeTimer = -1;\n\n    if (ref.options.progressBar && ref.progressDom) {\n      Utils.css(ref.progressDom, {\n        transition: 'width 0ms linear',\n        width: '100%'\n      });\n    }\n  }\n}\n\n/**\r\n * @param {Noty} ref\r\n * @param {string} eventName\r\n * @return {void}\r\n */\nfunction fire(ref, eventName) {\n  if (ref.listeners.hasOwnProperty(eventName)) {\n    ref.listeners[eventName].forEach(function (cb) {\n      if (typeof cb === 'function') {\n        cb.apply(ref);\n      }\n    });\n  }\n}\n\n/**\r\n * @param {Noty} ref\r\n * @return {void}\r\n */\nfunction openFlow(ref) {\n  fire(ref, 'afterShow');\n  queueClose(ref);\n\n  Utils.addListener(ref.barDom, 'mouseenter', function () {\n    dequeueClose(ref);\n  });\n\n  Utils.addListener(ref.barDom, 'mouseleave', function () {\n    queueClose(ref);\n  });\n}\n\n/**\r\n * @param {Noty} ref\r\n * @return {void}\r\n */\nfunction closeFlow(ref) {\n  delete Store[ref.id];\n  ref.closing = false;\n  fire(ref, 'afterClose');\n\n  Utils.remove(ref.barDom);\n\n  if (ref.layoutDom.querySelectorAll('.noty_bar').length === 0 && !ref.options.container) {\n    Utils.remove(ref.layoutDom);\n  }\n\n  if (Utils.inArray('docVisible', ref.options.titleCount.conditions) || Utils.inArray('docHidden', ref.options.titleCount.conditions)) {\n    docTitle.decrement();\n  }\n\n  queueRender(ref.options.queue);\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NotyButton = undefined;\n\nvar _utils = __webpack_require__(0);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar NotyButton = exports.NotyButton = function NotyButton(html, classes, cb) {\n  var _this = this;\n\n  var attributes = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  _classCallCheck(this, NotyButton);\n\n  this.dom = document.createElement('button');\n  this.dom.innerHTML = html;\n  this.id = attributes.id = attributes.id || Utils.generateID('button');\n  this.cb = cb;\n  Object.keys(attributes).forEach(function (propertyName) {\n    _this.dom.setAttribute(propertyName, attributes[propertyName]);\n  });\n  Utils.addClass(this.dom, classes || 'noty_btn');\n\n  return this;\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Push = exports.Push = function () {\n  function Push() {\n    var workerPath = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '/service-worker.js';\n\n    _classCallCheck(this, Push);\n\n    this.subData = {};\n    this.workerPath = workerPath;\n    this.listeners = {\n      onPermissionGranted: [],\n      onPermissionDenied: [],\n      onSubscriptionSuccess: [],\n      onSubscriptionCancel: [],\n      onWorkerError: [],\n      onWorkerSuccess: [],\n      onWorkerNotSupported: []\n    };\n    return this;\n  }\n\n  /**\r\n   * @param {string} eventName\r\n   * @param {function} cb\r\n   * @return {Push}\r\n   */\n\n\n  _createClass(Push, [{\n    key: 'on',\n    value: function on(eventName) {\n      var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n\n      if (typeof cb === 'function' && this.listeners.hasOwnProperty(eventName)) {\n        this.listeners[eventName].push(cb);\n      }\n\n      return this;\n    }\n  }, {\n    key: 'fire',\n    value: function fire(eventName) {\n      var _this = this;\n\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      if (this.listeners.hasOwnProperty(eventName)) {\n        this.listeners[eventName].forEach(function (cb) {\n          if (typeof cb === 'function') {\n            cb.apply(_this, params);\n          }\n        });\n      }\n    }\n  }, {\n    key: 'create',\n    value: function create() {\n      console.log('NOT IMPLEMENTED YET');\n    }\n\n    /**\r\n     * @return {boolean}\r\n     */\n\n  }, {\n    key: 'isSupported',\n    value: function isSupported() {\n      var result = false;\n\n      try {\n        result = window.Notification || window.webkitNotifications || navigator.mozNotification || window.external && window.external.msIsSiteMode() !== undefined;\n      } catch (e) {}\n\n      return result;\n    }\n\n    /**\r\n     * @return {string}\r\n     */\n\n  }, {\n    key: 'getPermissionStatus',\n    value: function getPermissionStatus() {\n      var perm = 'default';\n\n      if (window.Notification && window.Notification.permissionLevel) {\n        perm = window.Notification.permissionLevel;\n      } else if (window.webkitNotifications && window.webkitNotifications.checkPermission) {\n        switch (window.webkitNotifications.checkPermission()) {\n          case 1:\n            perm = 'default';\n            break;\n          case 0:\n            perm = 'granted';\n            break;\n          default:\n            perm = 'denied';\n        }\n      } else if (window.Notification && window.Notification.permission) {\n        perm = window.Notification.permission;\n      } else if (navigator.mozNotification) {\n        perm = 'granted';\n      } else if (window.external && window.external.msIsSiteMode() !== undefined) {\n        perm = window.external.msIsSiteMode() ? 'granted' : 'default';\n      }\n\n      return perm.toString().toLowerCase();\n    }\n\n    /**\r\n     * @return {string}\r\n     */\n\n  }, {\n    key: 'getEndpoint',\n    value: function getEndpoint(subscription) {\n      var endpoint = subscription.endpoint;\n      var subscriptionId = subscription.subscriptionId;\n\n      // fix for Chrome < 45\n      if (subscriptionId && endpoint.indexOf(subscriptionId) === -1) {\n        endpoint += '/' + subscriptionId;\n      }\n\n      return endpoint;\n    }\n\n    /**\r\n     * @return {boolean}\r\n     */\n\n  }, {\n    key: 'isSWRegistered',\n    value: function isSWRegistered() {\n      try {\n        return navigator.serviceWorker.controller.state === 'activated';\n      } catch (e) {\n        return false;\n      }\n    }\n\n    /**\r\n     * @return {void}\r\n     */\n\n  }, {\n    key: 'unregisterWorker',\n    value: function unregisterWorker() {\n      var self = this;\n      if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.getRegistrations().then(function (registrations) {\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = registrations[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var registration = _step.value;\n\n              registration.unregister();\n              self.fire('onSubscriptionCancel');\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n        });\n      }\n    }\n\n    /**\r\n     * @return {void}\r\n     */\n\n  }, {\n    key: 'requestSubscription',\n    value: function requestSubscription() {\n      var _this2 = this;\n\n      var userVisibleOnly = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      var self = this;\n      var current = this.getPermissionStatus();\n      var cb = function cb(result) {\n        if (result === 'granted') {\n          _this2.fire('onPermissionGranted');\n\n          if ('serviceWorker' in navigator) {\n            navigator.serviceWorker.register(_this2.workerPath).then(function () {\n              navigator.serviceWorker.ready.then(function (serviceWorkerRegistration) {\n                self.fire('onWorkerSuccess');\n                serviceWorkerRegistration.pushManager.subscribe({\n                  userVisibleOnly: userVisibleOnly\n                }).then(function (subscription) {\n                  var key = subscription.getKey('p256dh');\n                  var token = subscription.getKey('auth');\n\n                  self.subData = {\n                    endpoint: self.getEndpoint(subscription),\n                    p256dh: key ? window.btoa(String.fromCharCode.apply(null, new Uint8Array(key))) : null,\n                    auth: token ? window.btoa(String.fromCharCode.apply(null, new Uint8Array(token))) : null\n                  };\n\n                  self.fire('onSubscriptionSuccess', [self.subData]);\n                }).catch(function (err) {\n                  self.fire('onWorkerError', [err]);\n                });\n              });\n            });\n          } else {\n            self.fire('onWorkerNotSupported');\n          }\n        } else if (result === 'denied') {\n          _this2.fire('onPermissionDenied');\n          _this2.unregisterWorker();\n        }\n      };\n\n      if (current === 'default') {\n        if (window.Notification && window.Notification.requestPermission) {\n          window.Notification.requestPermission(cb);\n        } else if (window.webkitNotifications && window.webkitNotifications.checkPermission) {\n          window.webkitNotifications.requestPermission(cb);\n        }\n      } else {\n        cb(current);\n      }\n    }\n  }]);\n\n  return Push;\n}();\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(process, global) {var require;/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   4.1.1\n */\n\n(function (global, factory) {\n\t true ? module.exports = factory() :\n\tundefined;\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = __webpack_require__(9);\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && \"function\" === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === GET_THEN_ERROR) {\n      reject(promise, GET_THEN_ERROR.error);\n      GET_THEN_ERROR.error = null;\n    } else if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value.error = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      resolve(promise, value);\n    } else if (failed) {\n      reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator$1(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate(input);\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nEnumerator$1.prototype._enumerate = function (input) {\n  for (var i = 0; this._state === PENDING && i < input.length; i++) {\n    this._eachEntry(input[i], i);\n  }\n};\n\nEnumerator$1.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$1 = c.resolve;\n\n  if (resolve$$1 === resolve$1) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise$2) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$1) {\n        return resolve$$1(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$1(entry), i);\n  }\n};\n\nEnumerator$1.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator$1.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all$1(entries) {\n  return new Enumerator$1(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race$1(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise$2(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise$2 ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise$2.all = all$1;\nPromise$2.race = race$1;\nPromise$2.resolve = resolve$1;\nPromise$2.reject = reject$1;\nPromise$2._setScheduler = setScheduler;\nPromise$2._setAsap = setAsap;\nPromise$2._asap = asap;\n\nPromise$2.prototype = {\n  constructor: Promise$2,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\n/*global self*/\nfunction polyfill$1() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise$2;\n}\n\n// Strange compat..\nPromise$2.polyfill = polyfill$1;\nPromise$2.Promise = Promise$2;\n\nreturn Promise$2;\n\n})));\n\n//# sourceMappingURL=es6-promise.map\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(7), __webpack_require__(8)))\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* global VERSION */\n\n__webpack_require__(5);\n\nvar _es6Promise = __webpack_require__(4);\n\nvar _es6Promise2 = _interopRequireDefault(_es6Promise);\n\nvar _utils = __webpack_require__(0);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _api = __webpack_require__(1);\n\nvar API = _interopRequireWildcard(_api);\n\nvar _button = __webpack_require__(2);\n\nvar _push = __webpack_require__(3);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Noty = function () {\n  /**\r\n   * @param {object} options\r\n   * @return {Noty}\r\n   */\n  function Noty() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Noty);\n\n    this.options = Utils.deepExtend({}, API.Defaults, options);\n    this.id = this.options.id || Utils.generateID('bar');\n    this.closeTimer = -1;\n    this.barDom = null;\n    this.layoutDom = null;\n    this.progressDom = null;\n    this.showing = false;\n    this.shown = false;\n    this.closed = false;\n    this.closing = false;\n    this.killable = this.options.timeout || this.options.closeWith.length > 0;\n    this.hasSound = this.options.sounds.sources.length > 0;\n    this.soundPlayed = false;\n    this.listeners = {\n      beforeShow: [],\n      onShow: [],\n      afterShow: [],\n      onClose: [],\n      afterClose: [],\n      onClick: [],\n      onHover: [],\n      onTemplate: []\n    };\n    this.promises = {\n      show: null,\n      close: null\n    };\n    this.on('beforeShow', this.options.callbacks.beforeShow);\n    this.on('onShow', this.options.callbacks.onShow);\n    this.on('afterShow', this.options.callbacks.afterShow);\n    this.on('onClose', this.options.callbacks.onClose);\n    this.on('afterClose', this.options.callbacks.afterClose);\n    this.on('onClick', this.options.callbacks.onClick);\n    this.on('onHover', this.options.callbacks.onHover);\n    this.on('onTemplate', this.options.callbacks.onTemplate);\n\n    return this;\n  }\n\n  /**\r\n   * @param {string} eventName\r\n   * @param {function} cb\r\n   * @return {Noty}\r\n   */\n\n\n  _createClass(Noty, [{\n    key: 'on',\n    value: function on(eventName) {\n      var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n\n      if (typeof cb === 'function' && this.listeners.hasOwnProperty(eventName)) {\n        this.listeners[eventName].push(cb);\n      }\n\n      return this;\n    }\n\n    /**\r\n     * @return {Noty}\r\n     */\n\n  }, {\n    key: 'show',\n    value: function show() {\n      var _this = this;\n\n      if (this.options.killer === true) {\n        Noty.closeAll();\n      } else if (typeof this.options.killer === 'string') {\n        Noty.closeAll(this.options.killer);\n      }\n\n      var queueCounts = API.getQueueCounts(this.options.queue);\n\n      if (queueCounts.current >= queueCounts.maxVisible || API.PageHidden && this.options.visibilityControl) {\n        API.addToQueue(this);\n\n        if (API.PageHidden && this.hasSound && Utils.inArray('docHidden', this.options.sounds.conditions)) {\n          Utils.createAudioElements(this);\n        }\n\n        if (API.PageHidden && Utils.inArray('docHidden', this.options.titleCount.conditions)) {\n          API.docTitle.increment();\n        }\n\n        return this;\n      }\n\n      API.Store[this.id] = this;\n\n      API.fire(this, 'beforeShow');\n\n      this.showing = true;\n\n      if (this.closing) {\n        this.showing = false;\n        return this;\n      }\n\n      API.build(this);\n      API.handleModal(this);\n\n      if (this.options.force) {\n        this.layoutDom.insertBefore(this.barDom, this.layoutDom.firstChild);\n      } else {\n        this.layoutDom.appendChild(this.barDom);\n      }\n\n      if (this.hasSound && !this.soundPlayed && Utils.inArray('docVisible', this.options.sounds.conditions)) {\n        Utils.createAudioElements(this);\n      }\n\n      if (Utils.inArray('docVisible', this.options.titleCount.conditions)) {\n        API.docTitle.increment();\n      }\n\n      this.shown = true;\n      this.closed = false;\n\n      // bind button events if any\n      if (API.hasButtons(this)) {\n        Object.keys(this.options.buttons).forEach(function (key) {\n          var btn = _this.barDom.querySelector('#' + _this.options.buttons[key].id);\n          Utils.addListener(btn, 'click', function (e) {\n            Utils.stopPropagation(e);\n            _this.options.buttons[key].cb();\n          });\n        });\n      }\n\n      this.progressDom = this.barDom.querySelector('.noty_progressbar');\n\n      if (Utils.inArray('click', this.options.closeWith)) {\n        Utils.addClass(this.barDom, 'noty_close_with_click');\n        Utils.addListener(this.barDom, 'click', function (e) {\n          Utils.stopPropagation(e);\n          API.fire(_this, 'onClick');\n          _this.close();\n        }, false);\n      }\n\n      Utils.addListener(this.barDom, 'mouseenter', function () {\n        API.fire(_this, 'onHover');\n      }, false);\n\n      if (this.options.timeout) Utils.addClass(this.barDom, 'noty_has_timeout');\n      if (this.options.progressBar) {\n        Utils.addClass(this.barDom, 'noty_has_progressbar');\n      }\n\n      if (Utils.inArray('button', this.options.closeWith)) {\n        Utils.addClass(this.barDom, 'noty_close_with_button');\n\n        var closeButton = document.createElement('div');\n        Utils.addClass(closeButton, 'noty_close_button');\n        closeButton.innerHTML = '×';\n        this.barDom.appendChild(closeButton);\n\n        Utils.addListener(closeButton, 'click', function (e) {\n          Utils.stopPropagation(e);\n          _this.close();\n        }, false);\n      }\n\n      API.fire(this, 'onShow');\n\n      if (this.options.animation.open === null) {\n        this.promises.show = new _es6Promise2.default(function (resolve) {\n          resolve();\n        });\n      } else if (typeof this.options.animation.open === 'function') {\n        this.promises.show = new _es6Promise2.default(this.options.animation.open.bind(this));\n      } else {\n        Utils.addClass(this.barDom, this.options.animation.open);\n        this.promises.show = new _es6Promise2.default(function (resolve) {\n          Utils.addListener(_this.barDom, Utils.animationEndEvents, function () {\n            Utils.removeClass(_this.barDom, _this.options.animation.open);\n            resolve();\n          });\n        });\n      }\n\n      this.promises.show.then(function () {\n        var _t = _this;\n        setTimeout(function () {\n          API.openFlow(_t);\n        }, 100);\n      });\n\n      return this;\n    }\n\n    /**\r\n     * @return {Noty}\r\n     */\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      API.dequeueClose(this);\n      return this;\n    }\n\n    /**\r\n     * @return {Noty}\r\n     */\n\n  }, {\n    key: 'resume',\n    value: function resume() {\n      API.queueClose(this);\n      return this;\n    }\n\n    /**\r\n     * @param {int|boolean} ms\r\n     * @return {Noty}\r\n     */\n\n  }, {\n    key: 'setTimeout',\n    value: function (_setTimeout) {\n      function setTimeout(_x) {\n        return _setTimeout.apply(this, arguments);\n      }\n\n      setTimeout.toString = function () {\n        return _setTimeout.toString();\n      };\n\n      return setTimeout;\n    }(function (ms) {\n      this.stop();\n      this.options.timeout = ms;\n\n      if (this.barDom) {\n        if (this.options.timeout) {\n          Utils.addClass(this.barDom, 'noty_has_timeout');\n        } else {\n          Utils.removeClass(this.barDom, 'noty_has_timeout');\n        }\n\n        var _t = this;\n        setTimeout(function () {\n          // ugly fix for progressbar display bug\n          _t.resume();\n        }, 100);\n      }\n\n      return this;\n    })\n\n    /**\r\n     * @param {string} html\r\n     * @param {boolean} optionsOverride\r\n     * @return {Noty}\r\n     */\n\n  }, {\n    key: 'setText',\n    value: function setText(html) {\n      var optionsOverride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (this.barDom) {\n        this.barDom.querySelector('.noty_body').innerHTML = html;\n      }\n\n      if (optionsOverride) this.options.text = html;\n\n      return this;\n    }\n\n    /**\r\n     * @param {string} type\r\n     * @param {boolean} optionsOverride\r\n     * @return {Noty}\r\n     */\n\n  }, {\n    key: 'setType',\n    value: function setType(type) {\n      var _this2 = this;\n\n      var optionsOverride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (this.barDom) {\n        var classList = Utils.classList(this.barDom).split(' ');\n\n        classList.forEach(function (c) {\n          if (c.substring(0, 11) === 'noty_type__') {\n            Utils.removeClass(_this2.barDom, c);\n          }\n        });\n\n        Utils.addClass(this.barDom, 'noty_type__' + type);\n      }\n\n      if (optionsOverride) this.options.type = type;\n\n      return this;\n    }\n\n    /**\r\n     * @param {string} theme\r\n     * @param {boolean} optionsOverride\r\n     * @return {Noty}\r\n     */\n\n  }, {\n    key: 'setTheme',\n    value: function setTheme(theme) {\n      var _this3 = this;\n\n      var optionsOverride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (this.barDom) {\n        var classList = Utils.classList(this.barDom).split(' ');\n\n        classList.forEach(function (c) {\n          if (c.substring(0, 12) === 'noty_theme__') {\n            Utils.removeClass(_this3.barDom, c);\n          }\n        });\n\n        Utils.addClass(this.barDom, 'noty_theme__' + theme);\n      }\n\n      if (optionsOverride) this.options.theme = theme;\n\n      return this;\n    }\n\n    /**\r\n     * @return {Noty}\r\n     */\n\n  }, {\n    key: 'close',\n    value: function close() {\n      var _this4 = this;\n\n      if (this.closed) return this;\n\n      if (!this.shown) {\n        // it's in the queue\n        API.removeFromQueue(this);\n        return this;\n      }\n\n      API.fire(this, 'onClose');\n\n      this.closing = true;\n\n      if (this.options.animation.close === null) {\n        this.promises.close = new _es6Promise2.default(function (resolve) {\n          resolve();\n        });\n      } else if (typeof this.options.animation.close === 'function') {\n        this.promises.close = new _es6Promise2.default(this.options.animation.close.bind(this));\n      } else {\n        Utils.addClass(this.barDom, this.options.animation.close);\n        this.promises.close = new _es6Promise2.default(function (resolve) {\n          Utils.addListener(_this4.barDom, Utils.animationEndEvents, function () {\n            if (_this4.options.force) {\n              Utils.remove(_this4.barDom);\n            } else {\n              API.ghostFix(_this4);\n            }\n            resolve();\n          });\n        });\n      }\n\n      this.promises.close.then(function () {\n        API.closeFlow(_this4);\n        API.handleModalClose(_this4);\n      });\n\n      this.closed = true;\n\n      return this;\n    }\n\n    // API functions\n\n    /**\r\n     * @param {boolean|string} queueName\r\n     * @return {Noty}\r\n     */\n\n  }], [{\n    key: 'closeAll',\n    value: function closeAll() {\n      var queueName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      Object.keys(API.Store).forEach(function (id) {\n        if (queueName) {\n          if (API.Store[id].options.queue === queueName && API.Store[id].killable) {\n            API.Store[id].close();\n          }\n        } else if (API.Store[id].killable) {\n          API.Store[id].close();\n        }\n      });\n      return this;\n    }\n\n    /**\r\n     * @param {Object} obj\r\n     * @return {Noty}\r\n     */\n\n  }, {\n    key: 'overrideDefaults',\n    value: function overrideDefaults(obj) {\n      API.Defaults = Utils.deepExtend({}, API.Defaults, obj);\n      return this;\n    }\n\n    /**\r\n     * @param {int} amount\r\n     * @param {string} queueName\r\n     * @return {Noty}\r\n     */\n\n  }, {\n    key: 'setMaxVisible',\n    value: function setMaxVisible() {\n      var amount = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : API.DefaultMaxVisible;\n      var queueName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'global';\n\n      if (!API.Queues.hasOwnProperty(queueName)) {\n        API.Queues[queueName] = { maxVisible: amount, queue: [] };\n      }\n\n      API.Queues[queueName].maxVisible = amount;\n      return this;\n    }\n\n    /**\r\n     * @param {string} innerHtml\r\n     * @param {String} classes\r\n     * @param {Function} cb\r\n     * @param {Object} attributes\r\n     * @return {NotyButton}\r\n     */\n\n  }, {\n    key: 'button',\n    value: function button(innerHtml) {\n      var classes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var cb = arguments[2];\n      var attributes = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n      return new _button.NotyButton(innerHtml, classes, cb, attributes);\n    }\n\n    /**\r\n     * @return {string}\r\n     */\n\n  }, {\n    key: 'version',\n    value: function version() {\n      return \"3.1.4\";\n    }\n\n    /**\r\n     * @param {String} workerPath\r\n     * @return {Push}\r\n     */\n\n  }, {\n    key: 'Push',\n    value: function Push(workerPath) {\n      return new _push.Push(workerPath);\n    }\n  }]);\n\n  return Noty;\n}();\n\n// Document visibility change controller\n\n\nexports.default = Noty;\nUtils.visibilityChangeFlow();\nmodule.exports = exports['default'];\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ })\n/******/ ]);\n});\n//# sourceMappingURL=noty.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbm90eS9saWIvbm90eS5qcz83MzI5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSSxJQUF5RDtBQUM3RDtBQUNBLE1BQU0sRUFLcUI7QUFDM0IsQ0FBQztBQUNELG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGNBQWM7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsMEJBQTBCLEVBQUU7QUFDL0QseUNBQXlDLGVBQWU7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCwrREFBK0Q7QUFDN0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBLG9HQUFvRyxtQkFBbUIsRUFBRSxtQkFBbUIsOEhBQThIOztBQUUxUTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsdUNBQXVDLDZCQUE2QixZQUFZLEVBQUUsT0FBTyxpQkFBaUIsbUJBQW1CLHVCQUF1Qiw0RUFBNEUsRUFBRSxFQUFFLHNCQUFzQixlQUFlLEVBQUU7O0FBRTNROztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsaUJBQWlCLHNCQUFzQjtBQUN2Qzs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtB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O0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQSxVQUFVLElBQUk7QUFDZDtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsd0JBQXdCO0FBQ3pDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIsNkNBQTZDO0FBQzlEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0EsVUFBVSxNQUFNO0FBQ2hCLFVBQVUsT0FBTztBQUNqQjtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLE1BQU07QUFDaEI7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSxxQkFBcUIsWUFBWTtBQUNqQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBLFVBQVUsSUFBSTtBQUNkO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBLFVBQVUsU0FBUztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFD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QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsQ0FBQzs7QUFFRDs7O0FBR0E7QUFDQTtBQUNBOztBQUVBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQ0FBcUM7O0FBRXJDO0FBQ0E7QUFDQTs7QUFFQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLFVBQVU7OztBQUd0QyxPQUFPO0FBQ1A7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNENBQTRDOztBQUU1Qzs7O0FBR0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7O0FBRUEsT0FBTztBQUNQO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL25vdHkvbGliL25vdHkuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBcclxuICBAcGFja2FnZSBOT1RZIC0gRGVwZW5kZW5jeS1mcmVlIG5vdGlmaWNhdGlvbiBsaWJyYXJ5IFxyXG4gIEB2ZXJzaW9uIHZlcnNpb246IDMuMS40IFxyXG4gIEBjb250cmlidXRvcnMgaHR0cHM6Ly9naXRodWIuY29tL25lZWRpbS9ub3R5L2dyYXBocy9jb250cmlidXRvcnMgXHJcbiAgQGRvY3VtZW50YXRpb24gRXhhbXBsZXMgYW5kIERvY3VtZW50YXRpb24gLSBodHRwOi8vbmVlZGltLmdpdGh1Yi5jb20vbm90eSBcclxuICBAbGljZW5zZSBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VzOiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocCBcclxuKi9cclxuXHJcbihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiTm90eVwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJOb3R5XCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIk5vdHlcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA2KTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuY3NzID0gZXhwb3J0cy5kZWVwRXh0ZW5kID0gZXhwb3J0cy5hbmltYXRpb25FbmRFdmVudHMgPSB1bmRlZmluZWQ7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZXhwb3J0cy5pbkFycmF5ID0gaW5BcnJheTtcbmV4cG9ydHMuc3RvcFByb3BhZ2F0aW9uID0gc3RvcFByb3BhZ2F0aW9uO1xuZXhwb3J0cy5nZW5lcmF0ZUlEID0gZ2VuZXJhdGVJRDtcbmV4cG9ydHMub3V0ZXJIZWlnaHQgPSBvdXRlckhlaWdodDtcbmV4cG9ydHMuYWRkTGlzdGVuZXIgPSBhZGRMaXN0ZW5lcjtcbmV4cG9ydHMuaGFzQ2xhc3MgPSBoYXNDbGFzcztcbmV4cG9ydHMuYWRkQ2xhc3MgPSBhZGRDbGFzcztcbmV4cG9ydHMucmVtb3ZlQ2xhc3MgPSByZW1vdmVDbGFzcztcbmV4cG9ydHMucmVtb3ZlID0gcmVtb3ZlO1xuZXhwb3J0cy5jbGFzc0xpc3QgPSBjbGFzc0xpc3Q7XG5leHBvcnRzLnZpc2liaWxpdHlDaGFuZ2VGbG93ID0gdmlzaWJpbGl0eUNoYW5nZUZsb3c7XG5leHBvcnRzLmNyZWF0ZUF1ZGlvRWxlbWVudHMgPSBjcmVhdGVBdWRpb0VsZW1lbnRzO1xuXG52YXIgX2FwaSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBBUEkgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfYXBpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxudmFyIGFuaW1hdGlvbkVuZEV2ZW50cyA9IGV4cG9ydHMuYW5pbWF0aW9uRW5kRXZlbnRzID0gJ3dlYmtpdEFuaW1hdGlvbkVuZCBtb3pBbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBhbmltYXRpb25lbmQnO1xuXG5mdW5jdGlvbiBpbkFycmF5KG5lZWRsZSwgaGF5c3RhY2ssIGFyZ1N0cmljdCkge1xuICB2YXIga2V5ID0gdm9pZCAwO1xuICB2YXIgc3RyaWN0ID0gISFhcmdTdHJpY3Q7XG5cbiAgaWYgKHN0cmljdCkge1xuICAgIGZvciAoa2V5IGluIGhheXN0YWNrKSB7XG4gICAgICBpZiAoaGF5c3RhY2suaGFzT3duUHJvcGVydHkoa2V5KSAmJiBoYXlzdGFja1trZXldID09PSBuZWVkbGUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAoa2V5IGluIGhheXN0YWNrKSB7XG4gICAgICBpZiAoaGF5c3RhY2suaGFzT3duUHJvcGVydHkoa2V5KSAmJiBoYXlzdGFja1trZXldID09PSBuZWVkbGUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uKGV2dCkge1xuICBldnQgPSBldnQgfHwgd2luZG93LmV2ZW50O1xuXG4gIGlmICh0eXBlb2YgZXZ0LnN0b3BQcm9wYWdhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH0gZWxzZSB7XG4gICAgZXZ0LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gIH1cbn1cblxudmFyIGRlZXBFeHRlbmQgPSBleHBvcnRzLmRlZXBFeHRlbmQgPSBmdW5jdGlvbiBkZWVwRXh0ZW5kKG91dCkge1xuICBvdXQgPSBvdXQgfHwge307XG5cbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgb2JqID0gYXJndW1lbnRzW2ldO1xuXG4gICAgaWYgKCFvYmopIGNvbnRpbnVlO1xuXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9ialtrZXldKSkge1xuICAgICAgICAgIG91dFtrZXldID0gb2JqW2tleV07XG4gICAgICAgIH0gZWxzZSBpZiAoX3R5cGVvZihvYmpba2V5XSkgPT09ICdvYmplY3QnICYmIG9ialtrZXldICE9PSBudWxsKSB7XG4gICAgICAgICAgb3V0W2tleV0gPSBkZWVwRXh0ZW5kKG91dFtrZXldLCBvYmpba2V5XSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3V0W2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59O1xuXG5mdW5jdGlvbiBnZW5lcmF0ZUlEKCkge1xuICB2YXIgcHJlZml4ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnJztcblxuICB2YXIgaWQgPSAnbm90eV8nICsgcHJlZml4ICsgJ18nO1xuXG4gIGlkICs9ICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcbiAgICB2YXIgciA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDA7XG4gICAgdmFyIHYgPSBjID09PSAneCcgPyByIDogciAmIDB4MyB8IDB4ODtcbiAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gIH0pO1xuXG4gIHJldHVybiBpZDtcbn1cblxuZnVuY3Rpb24gb3V0ZXJIZWlnaHQoZWwpIHtcbiAgdmFyIGhlaWdodCA9IGVsLm9mZnNldEhlaWdodDtcbiAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xuXG4gIGhlaWdodCArPSBwYXJzZUludChzdHlsZS5tYXJnaW5Ub3ApICsgcGFyc2VJbnQoc3R5bGUubWFyZ2luQm90dG9tKTtcbiAgcmV0dXJuIGhlaWdodDtcbn1cblxudmFyIGNzcyA9IGV4cG9ydHMuY3NzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgY3NzUHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdPJywgJ01veicsICdtcyddO1xuICB2YXIgY3NzUHJvcHMgPSB7fTtcblxuICBmdW5jdGlvbiBjYW1lbENhc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9eLW1zLS8sICdtcy0nKS5yZXBsYWNlKC8tKFtcXGRhLXpdKS9naSwgZnVuY3Rpb24gKG1hdGNoLCBsZXR0ZXIpIHtcbiAgICAgIHJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFZlbmRvclByb3AobmFtZSkge1xuICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmJvZHkuc3R5bGU7XG4gICAgaWYgKG5hbWUgaW4gc3R5bGUpIHJldHVybiBuYW1lO1xuXG4gICAgdmFyIGkgPSBjc3NQcmVmaXhlcy5sZW5ndGg7XG4gICAgdmFyIGNhcE5hbWUgPSBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKTtcbiAgICB2YXIgdmVuZG9yTmFtZSA9IHZvaWQgMDtcblxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZlbmRvck5hbWUgPSBjc3NQcmVmaXhlc1tpXSArIGNhcE5hbWU7XG4gICAgICBpZiAodmVuZG9yTmFtZSBpbiBzdHlsZSkgcmV0dXJuIHZlbmRvck5hbWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5hbWU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTdHlsZVByb3AobmFtZSkge1xuICAgIG5hbWUgPSBjYW1lbENhc2UobmFtZSk7XG4gICAgcmV0dXJuIGNzc1Byb3BzW25hbWVdIHx8IChjc3NQcm9wc1tuYW1lXSA9IGdldFZlbmRvclByb3AobmFtZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gYXBwbHlDc3MoZWxlbWVudCwgcHJvcCwgdmFsdWUpIHtcbiAgICBwcm9wID0gZ2V0U3R5bGVQcm9wKHByb3ApO1xuICAgIGVsZW1lbnQuc3R5bGVbcHJvcF0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoZWxlbWVudCwgcHJvcGVydGllcykge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBwcm9wID0gdm9pZCAwO1xuICAgIHZhciB2YWx1ZSA9IHZvaWQgMDtcblxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgZm9yIChwcm9wIGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICB2YWx1ZSA9IHByb3BlcnRpZXNbcHJvcF07XG4gICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgcHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgICAgYXBwbHlDc3MoZWxlbWVudCwgcHJvcCwgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhcHBseUNzcyhlbGVtZW50LCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICB9XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFkZExpc3RlbmVyKGVsLCBldmVudHMsIGNiKSB7XG4gIHZhciB1c2VDYXB0dXJlID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTtcblxuICBldmVudHMgPSBldmVudHMuc3BsaXQoJyAnKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudHNbaV0sIGNiLCB1c2VDYXB0dXJlKTtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmF0dGFjaEV2ZW50KSB7XG4gICAgICBlbC5hdHRhY2hFdmVudCgnb24nICsgZXZlbnRzW2ldLCBjYik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGhhc0NsYXNzKGVsZW1lbnQsIG5hbWUpIHtcbiAgdmFyIGxpc3QgPSB0eXBlb2YgZWxlbWVudCA9PT0gJ3N0cmluZycgPyBlbGVtZW50IDogY2xhc3NMaXN0KGVsZW1lbnQpO1xuICByZXR1cm4gbGlzdC5pbmRleE9mKCcgJyArIG5hbWUgKyAnICcpID49IDA7XG59XG5cbmZ1bmN0aW9uIGFkZENsYXNzKGVsZW1lbnQsIG5hbWUpIHtcbiAgdmFyIG9sZExpc3QgPSBjbGFzc0xpc3QoZWxlbWVudCk7XG4gIHZhciBuZXdMaXN0ID0gb2xkTGlzdCArIG5hbWU7XG5cbiAgaWYgKGhhc0NsYXNzKG9sZExpc3QsIG5hbWUpKSByZXR1cm47XG5cbiAgLy8gVHJpbSB0aGUgb3BlbmluZyBzcGFjZS5cbiAgZWxlbWVudC5jbGFzc05hbWUgPSBuZXdMaXN0LnN1YnN0cmluZygxKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbWVudCwgbmFtZSkge1xuICB2YXIgb2xkTGlzdCA9IGNsYXNzTGlzdChlbGVtZW50KTtcbiAgdmFyIG5ld0xpc3QgPSB2b2lkIDA7XG5cbiAgaWYgKCFoYXNDbGFzcyhlbGVtZW50LCBuYW1lKSkgcmV0dXJuO1xuXG4gIC8vIFJlcGxhY2UgdGhlIGNsYXNzIG5hbWUuXG4gIG5ld0xpc3QgPSBvbGRMaXN0LnJlcGxhY2UoJyAnICsgbmFtZSArICcgJywgJyAnKTtcblxuICAvLyBUcmltIHRoZSBvcGVuaW5nIGFuZCBjbG9zaW5nIHNwYWNlcy5cbiAgZWxlbWVudC5jbGFzc05hbWUgPSBuZXdMaXN0LnN1YnN0cmluZygxLCBuZXdMaXN0Lmxlbmd0aCAtIDEpO1xufVxuXG5mdW5jdGlvbiByZW1vdmUoZWxlbWVudCkge1xuICBpZiAoZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNsYXNzTGlzdChlbGVtZW50KSB7XG4gIHJldHVybiAoJyAnICsgKGVsZW1lbnQgJiYgZWxlbWVudC5jbGFzc05hbWUgfHwgJycpICsgJyAnKS5yZXBsYWNlKC9cXHMrL2dpLCAnICcpO1xufVxuXG5mdW5jdGlvbiB2aXNpYmlsaXR5Q2hhbmdlRmxvdygpIHtcbiAgdmFyIGhpZGRlbiA9IHZvaWQgMDtcbiAgdmFyIHZpc2liaWxpdHlDaGFuZ2UgPSB2b2lkIDA7XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQuaGlkZGVuICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIE9wZXJhIDEyLjEwIGFuZCBGaXJlZm94IDE4IGFuZCBsYXRlciBzdXBwb3J0XG4gICAgaGlkZGVuID0gJ2hpZGRlbic7XG4gICAgdmlzaWJpbGl0eUNoYW5nZSA9ICd2aXNpYmlsaXR5Y2hhbmdlJztcbiAgfSBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnQubXNIaWRkZW4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaGlkZGVuID0gJ21zSGlkZGVuJztcbiAgICB2aXNpYmlsaXR5Q2hhbmdlID0gJ21zdmlzaWJpbGl0eWNoYW5nZSc7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50LndlYmtpdEhpZGRlbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBoaWRkZW4gPSAnd2Via2l0SGlkZGVuJztcbiAgICB2aXNpYmlsaXR5Q2hhbmdlID0gJ3dlYmtpdHZpc2liaWxpdHljaGFuZ2UnO1xuICB9XG5cbiAgZnVuY3Rpb24gb25WaXNpYmlsaXR5Q2hhbmdlKCkge1xuICAgIEFQSS5QYWdlSGlkZGVuID0gZG9jdW1lbnRbaGlkZGVuXTtcbiAgICBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkJsdXIoKSB7XG4gICAgQVBJLlBhZ2VIaWRkZW4gPSB0cnVlO1xuICAgIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRm9jdXMoKSB7XG4gICAgQVBJLlBhZ2VIaWRkZW4gPSBmYWxzZTtcbiAgICBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKCkge1xuICAgIGlmIChBUEkuUGFnZUhpZGRlbikgc3RvcEFsbCgpO2Vsc2UgcmVzdW1lQWxsKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wQWxsKCkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgT2JqZWN0LmtleXMoQVBJLlN0b3JlKS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBpZiAoQVBJLlN0b3JlLmhhc093blByb3BlcnR5KGlkKSkge1xuICAgICAgICAgIGlmIChBUEkuU3RvcmVbaWRdLm9wdGlvbnMudmlzaWJpbGl0eUNvbnRyb2wpIHtcbiAgICAgICAgICAgIEFQSS5TdG9yZVtpZF0uc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc3VtZUFsbCgpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIE9iamVjdC5rZXlzKEFQSS5TdG9yZSkuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgaWYgKEFQSS5TdG9yZS5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICAgICAgICBpZiAoQVBJLlN0b3JlW2lkXS5vcHRpb25zLnZpc2liaWxpdHlDb250cm9sKSB7XG4gICAgICAgICAgICBBUEkuU3RvcmVbaWRdLnJlc3VtZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBBUEkucXVldWVSZW5kZXJBbGwoKTtcbiAgICB9LCAxMDApO1xuICB9XG5cbiAgaWYgKHZpc2liaWxpdHlDaGFuZ2UpIHtcbiAgICBhZGRMaXN0ZW5lcihkb2N1bWVudCwgdmlzaWJpbGl0eUNoYW5nZSwgb25WaXNpYmlsaXR5Q2hhbmdlKTtcbiAgfVxuXG4gIGFkZExpc3RlbmVyKHdpbmRvdywgJ2JsdXInLCBvbkJsdXIpO1xuICBhZGRMaXN0ZW5lcih3aW5kb3csICdmb2N1cycsIG9uRm9jdXMpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBdWRpb0VsZW1lbnRzKHJlZikge1xuICBpZiAocmVmLmhhc1NvdW5kKSB7XG4gICAgdmFyIGF1ZGlvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG5cbiAgICByZWYub3B0aW9ucy5zb3VuZHMuc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7XG4gICAgICB2YXIgc291cmNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7XG4gICAgICBzb3VyY2Uuc3JjID0gcztcbiAgICAgIHNvdXJjZS50eXBlID0gJ2F1ZGlvLycgKyBnZXRFeHRlbnNpb24ocyk7XG4gICAgICBhdWRpb0VsZW1lbnQuYXBwZW5kQ2hpbGQoc291cmNlKTtcbiAgICB9KTtcblxuICAgIGlmIChyZWYuYmFyRG9tKSB7XG4gICAgICByZWYuYmFyRG9tLmFwcGVuZENoaWxkKGF1ZGlvRWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5hcHBlbmRDaGlsZChhdWRpb0VsZW1lbnQpO1xuICAgIH1cblxuICAgIGF1ZGlvRWxlbWVudC52b2x1bWUgPSByZWYub3B0aW9ucy5zb3VuZHMudm9sdW1lO1xuXG4gICAgaWYgKCFyZWYuc291bmRQbGF5ZWQpIHtcbiAgICAgIGF1ZGlvRWxlbWVudC5wbGF5KCk7XG4gICAgICByZWYuc291bmRQbGF5ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGF1ZGlvRWxlbWVudC5vbmVuZGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmVtb3ZlKGF1ZGlvRWxlbWVudCk7XG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRFeHRlbnNpb24oZmlsZU5hbWUpIHtcbiAgcmV0dXJuIGZpbGVOYW1lLm1hdGNoKC9cXC4oW14uXSspJC8pWzFdO1xufVxuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuRGVmYXVsdHMgPSBleHBvcnRzLlN0b3JlID0gZXhwb3J0cy5RdWV1ZXMgPSBleHBvcnRzLkRlZmF1bHRNYXhWaXNpYmxlID0gZXhwb3J0cy5kb2NUaXRsZSA9IGV4cG9ydHMuRG9jTW9kYWxDb3VudCA9IGV4cG9ydHMuUGFnZUhpZGRlbiA9IHVuZGVmaW5lZDtcbmV4cG9ydHMuZ2V0UXVldWVDb3VudHMgPSBnZXRRdWV1ZUNvdW50cztcbmV4cG9ydHMuYWRkVG9RdWV1ZSA9IGFkZFRvUXVldWU7XG5leHBvcnRzLnJlbW92ZUZyb21RdWV1ZSA9IHJlbW92ZUZyb21RdWV1ZTtcbmV4cG9ydHMucXVldWVSZW5kZXIgPSBxdWV1ZVJlbmRlcjtcbmV4cG9ydHMucXVldWVSZW5kZXJBbGwgPSBxdWV1ZVJlbmRlckFsbDtcbmV4cG9ydHMuZ2hvc3RGaXggPSBnaG9zdEZpeDtcbmV4cG9ydHMuYnVpbGQgPSBidWlsZDtcbmV4cG9ydHMuaGFzQnV0dG9ucyA9IGhhc0J1dHRvbnM7XG5leHBvcnRzLmhhbmRsZU1vZGFsID0gaGFuZGxlTW9kYWw7XG5leHBvcnRzLmhhbmRsZU1vZGFsQ2xvc2UgPSBoYW5kbGVNb2RhbENsb3NlO1xuZXhwb3J0cy5xdWV1ZUNsb3NlID0gcXVldWVDbG9zZTtcbmV4cG9ydHMuZGVxdWV1ZUNsb3NlID0gZGVxdWV1ZUNsb3NlO1xuZXhwb3J0cy5maXJlID0gZmlyZTtcbmV4cG9ydHMub3BlbkZsb3cgPSBvcGVuRmxvdztcbmV4cG9ydHMuY2xvc2VGbG93ID0gY2xvc2VGbG93O1xuXG52YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIFV0aWxzID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX3V0aWxzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxudmFyIFBhZ2VIaWRkZW4gPSBleHBvcnRzLlBhZ2VIaWRkZW4gPSBmYWxzZTtcbnZhciBEb2NNb2RhbENvdW50ID0gZXhwb3J0cy5Eb2NNb2RhbENvdW50ID0gMDtcblxudmFyIERvY1RpdGxlUHJvcHMgPSB7XG4gIG9yaWdpbmFsVGl0bGU6IG51bGwsXG4gIGNvdW50OiAwLFxuICBjaGFuZ2VkOiBmYWxzZSxcbiAgdGltZXI6IC0xXG59O1xuXG52YXIgZG9jVGl0bGUgPSBleHBvcnRzLmRvY1RpdGxlID0ge1xuICBpbmNyZW1lbnQ6IGZ1bmN0aW9uIGluY3JlbWVudCgpIHtcbiAgICBEb2NUaXRsZVByb3BzLmNvdW50Kys7XG5cbiAgICBkb2NUaXRsZS5fdXBkYXRlKCk7XG4gIH0sXG5cbiAgZGVjcmVtZW50OiBmdW5jdGlvbiBkZWNyZW1lbnQoKSB7XG4gICAgRG9jVGl0bGVQcm9wcy5jb3VudC0tO1xuXG4gICAgaWYgKERvY1RpdGxlUHJvcHMuY291bnQgPD0gMCkge1xuICAgICAgZG9jVGl0bGUuX2NsZWFyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZG9jVGl0bGUuX3VwZGF0ZSgpO1xuICB9LFxuXG4gIF91cGRhdGU6IGZ1bmN0aW9uIF91cGRhdGUoKSB7XG4gICAgdmFyIHRpdGxlID0gZG9jdW1lbnQudGl0bGU7XG5cbiAgICBpZiAoIURvY1RpdGxlUHJvcHMuY2hhbmdlZCkge1xuICAgICAgRG9jVGl0bGVQcm9wcy5vcmlnaW5hbFRpdGxlID0gdGl0bGU7XG4gICAgICBkb2N1bWVudC50aXRsZSA9ICcoJyArIERvY1RpdGxlUHJvcHMuY291bnQgKyAnKSAnICsgdGl0bGU7XG4gICAgICBEb2NUaXRsZVByb3BzLmNoYW5nZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC50aXRsZSA9ICcoJyArIERvY1RpdGxlUHJvcHMuY291bnQgKyAnKSAnICsgRG9jVGl0bGVQcm9wcy5vcmlnaW5hbFRpdGxlO1xuICAgIH1cbiAgfSxcblxuICBfY2xlYXI6IGZ1bmN0aW9uIF9jbGVhcigpIHtcbiAgICBpZiAoRG9jVGl0bGVQcm9wcy5jaGFuZ2VkKSB7XG4gICAgICBEb2NUaXRsZVByb3BzLmNvdW50ID0gMDtcbiAgICAgIGRvY3VtZW50LnRpdGxlID0gRG9jVGl0bGVQcm9wcy5vcmlnaW5hbFRpdGxlO1xuICAgICAgRG9jVGl0bGVQcm9wcy5jaGFuZ2VkID0gZmFsc2U7XG4gICAgfVxuICB9XG59O1xuXG52YXIgRGVmYXVsdE1heFZpc2libGUgPSBleHBvcnRzLkRlZmF1bHRNYXhWaXNpYmxlID0gNTtcblxudmFyIFF1ZXVlcyA9IGV4cG9ydHMuUXVldWVzID0ge1xuICBnbG9iYWw6IHtcbiAgICBtYXhWaXNpYmxlOiBEZWZhdWx0TWF4VmlzaWJsZSxcbiAgICBxdWV1ZTogW11cbiAgfVxufTtcblxudmFyIFN0b3JlID0gZXhwb3J0cy5TdG9yZSA9IHt9O1xuXG52YXIgRGVmYXVsdHMgPSBleHBvcnRzLkRlZmF1bHRzID0ge1xuICB0eXBlOiAnYWxlcnQnLFxuICBsYXlvdXQ6ICd0b3BSaWdodCcsXG4gIHRoZW1lOiAnbWludCcsXG4gIHRleHQ6ICcnLFxuICB0aW1lb3V0OiBmYWxzZSxcbiAgcHJvZ3Jlc3NCYXI6IHRydWUsXG4gIGNsb3NlV2l0aDogWydjbGljayddLFxuICBhbmltYXRpb246IHtcbiAgICBvcGVuOiAnbm90eV9lZmZlY3RzX29wZW4nLFxuICAgIGNsb3NlOiAnbm90eV9lZmZlY3RzX2Nsb3NlJ1xuICB9LFxuICBpZDogZmFsc2UsXG4gIGZvcmNlOiBmYWxzZSxcbiAga2lsbGVyOiBmYWxzZSxcbiAgcXVldWU6ICdnbG9iYWwnLFxuICBjb250YWluZXI6IGZhbHNlLFxuICBidXR0b25zOiBbXSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYmVmb3JlU2hvdzogbnVsbCxcbiAgICBvblNob3c6IG51bGwsXG4gICAgYWZ0ZXJTaG93OiBudWxsLFxuICAgIG9uQ2xvc2U6IG51bGwsXG4gICAgYWZ0ZXJDbG9zZTogbnVsbCxcbiAgICBvbkNsaWNrOiBudWxsLFxuICAgIG9uSG92ZXI6IG51bGwsXG4gICAgb25UZW1wbGF0ZTogbnVsbFxuICB9LFxuICBzb3VuZHM6IHtcbiAgICBzb3VyY2VzOiBbXSxcbiAgICB2b2x1bWU6IDEsXG4gICAgY29uZGl0aW9uczogW11cbiAgfSxcbiAgdGl0bGVDb3VudDoge1xuICAgIGNvbmRpdGlvbnM6IFtdXG4gIH0sXG4gIG1vZGFsOiBmYWxzZSxcbiAgdmlzaWJpbGl0eUNvbnRyb2w6IGZhbHNlXG5cbiAgLyoqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHF1ZXVlTmFtZVxyXG4gICAqIEByZXR1cm4ge29iamVjdH1cclxuICAgKi9cbn07ZnVuY3Rpb24gZ2V0UXVldWVDb3VudHMoKSB7XG4gIHZhciBxdWV1ZU5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICdnbG9iYWwnO1xuXG4gIHZhciBjb3VudCA9IDA7XG4gIHZhciBtYXggPSBEZWZhdWx0TWF4VmlzaWJsZTtcblxuICBpZiAoUXVldWVzLmhhc093blByb3BlcnR5KHF1ZXVlTmFtZSkpIHtcbiAgICBtYXggPSBRdWV1ZXNbcXVldWVOYW1lXS5tYXhWaXNpYmxlO1xuICAgIE9iamVjdC5rZXlzKFN0b3JlKS5mb3JFYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICBpZiAoU3RvcmVbaV0ub3B0aW9ucy5xdWV1ZSA9PT0gcXVldWVOYW1lICYmICFTdG9yZVtpXS5jbG9zZWQpIGNvdW50Kys7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGN1cnJlbnQ6IGNvdW50LFxuICAgIG1heFZpc2libGU6IG1heFxuICB9O1xufVxuXG4vKipcclxuICogQHBhcmFtIHtOb3R5fSByZWZcclxuICogQHJldHVybiB7dm9pZH1cclxuICovXG5mdW5jdGlvbiBhZGRUb1F1ZXVlKHJlZikge1xuICBpZiAoIVF1ZXVlcy5oYXNPd25Qcm9wZXJ0eShyZWYub3B0aW9ucy5xdWV1ZSkpIHtcbiAgICBRdWV1ZXNbcmVmLm9wdGlvbnMucXVldWVdID0geyBtYXhWaXNpYmxlOiBEZWZhdWx0TWF4VmlzaWJsZSwgcXVldWU6IFtdIH07XG4gIH1cblxuICBRdWV1ZXNbcmVmLm9wdGlvbnMucXVldWVdLnF1ZXVlLnB1c2gocmVmKTtcbn1cblxuLyoqXHJcbiAqIEBwYXJhbSB7Tm90eX0gcmVmXHJcbiAqIEByZXR1cm4ge3ZvaWR9XHJcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlRnJvbVF1ZXVlKHJlZikge1xuICBpZiAoUXVldWVzLmhhc093blByb3BlcnR5KHJlZi5vcHRpb25zLnF1ZXVlKSkge1xuICAgIHZhciBxdWV1ZSA9IFtdO1xuICAgIE9iamVjdC5rZXlzKFF1ZXVlc1tyZWYub3B0aW9ucy5xdWV1ZV0ucXVldWUpLmZvckVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgIGlmIChRdWV1ZXNbcmVmLm9wdGlvbnMucXVldWVdLnF1ZXVlW2ldLmlkICE9PSByZWYuaWQpIHtcbiAgICAgICAgcXVldWUucHVzaChRdWV1ZXNbcmVmLm9wdGlvbnMucXVldWVdLnF1ZXVlW2ldKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBRdWV1ZXNbcmVmLm9wdGlvbnMucXVldWVdLnF1ZXVlID0gcXVldWU7XG4gIH1cbn1cblxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWV1ZU5hbWVcclxuICogQHJldHVybiB7dm9pZH1cclxuICovXG5mdW5jdGlvbiBxdWV1ZVJlbmRlcigpIHtcbiAgdmFyIHF1ZXVlTmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ2dsb2JhbCc7XG5cbiAgaWYgKFF1ZXVlcy5oYXNPd25Qcm9wZXJ0eShxdWV1ZU5hbWUpKSB7XG4gICAgdmFyIG5vdHkgPSBRdWV1ZXNbcXVldWVOYW1lXS5xdWV1ZS5zaGlmdCgpO1xuXG4gICAgaWYgKG5vdHkpIG5vdHkuc2hvdygpO1xuICB9XG59XG5cbi8qKlxyXG4gKiBAcmV0dXJuIHt2b2lkfVxyXG4gKi9cbmZ1bmN0aW9uIHF1ZXVlUmVuZGVyQWxsKCkge1xuICBPYmplY3Qua2V5cyhRdWV1ZXMpLmZvckVhY2goZnVuY3Rpb24gKHF1ZXVlTmFtZSkge1xuICAgIHF1ZXVlUmVuZGVyKHF1ZXVlTmFtZSk7XG4gIH0pO1xufVxuXG4vKipcclxuICogQHBhcmFtIHtOb3R5fSByZWZcclxuICogQHJldHVybiB7dm9pZH1cclxuICovXG5mdW5jdGlvbiBnaG9zdEZpeChyZWYpIHtcbiAgdmFyIGdob3N0SUQgPSBVdGlscy5nZW5lcmF0ZUlEKCdnaG9zdCcpO1xuICB2YXIgZ2hvc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZ2hvc3Quc2V0QXR0cmlidXRlKCdpZCcsIGdob3N0SUQpO1xuICBVdGlscy5jc3MoZ2hvc3QsIHtcbiAgICBoZWlnaHQ6IFV0aWxzLm91dGVySGVpZ2h0KHJlZi5iYXJEb20pICsgJ3B4J1xuICB9KTtcblxuICByZWYuYmFyRG9tLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCBnaG9zdC5vdXRlckhUTUwpO1xuXG4gIFV0aWxzLnJlbW92ZShyZWYuYmFyRG9tKTtcbiAgZ2hvc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChnaG9zdElEKTtcbiAgVXRpbHMuYWRkQ2xhc3MoZ2hvc3QsICdub3R5X2ZpeF9lZmZlY3RzX2hlaWdodCcpO1xuICBVdGlscy5hZGRMaXN0ZW5lcihnaG9zdCwgVXRpbHMuYW5pbWF0aW9uRW5kRXZlbnRzLCBmdW5jdGlvbiAoKSB7XG4gICAgVXRpbHMucmVtb3ZlKGdob3N0KTtcbiAgfSk7XG59XG5cbi8qKlxyXG4gKiBAcGFyYW0ge05vdHl9IHJlZlxyXG4gKiBAcmV0dXJuIHt2b2lkfVxyXG4gKi9cbmZ1bmN0aW9uIGJ1aWxkKHJlZikge1xuICBmaW5kT3JDcmVhdGVDb250YWluZXIocmVmKTtcblxuICB2YXIgbWFya3VwID0gJzxkaXYgY2xhc3M9XCJub3R5X2JvZHlcIj4nICsgcmVmLm9wdGlvbnMudGV4dCArICc8L2Rpdj4nICsgYnVpbGRCdXR0b25zKHJlZikgKyAnPGRpdiBjbGFzcz1cIm5vdHlfcHJvZ3Jlc3NiYXJcIj48L2Rpdj4nO1xuXG4gIHJlZi5iYXJEb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgcmVmLmJhckRvbS5zZXRBdHRyaWJ1dGUoJ2lkJywgcmVmLmlkKTtcbiAgVXRpbHMuYWRkQ2xhc3MocmVmLmJhckRvbSwgJ25vdHlfYmFyIG5vdHlfdHlwZV9fJyArIHJlZi5vcHRpb25zLnR5cGUgKyAnIG5vdHlfdGhlbWVfXycgKyByZWYub3B0aW9ucy50aGVtZSk7XG5cbiAgcmVmLmJhckRvbS5pbm5lckhUTUwgPSBtYXJrdXA7XG5cbiAgZmlyZShyZWYsICdvblRlbXBsYXRlJyk7XG59XG5cbi8qKlxyXG4gKiBAcGFyYW0ge05vdHl9IHJlZlxyXG4gKiBAcmV0dXJuIHtib29sZWFufVxyXG4gKi9cbmZ1bmN0aW9uIGhhc0J1dHRvbnMocmVmKSB7XG4gIHJldHVybiAhIShyZWYub3B0aW9ucy5idXR0b25zICYmIE9iamVjdC5rZXlzKHJlZi5vcHRpb25zLmJ1dHRvbnMpLmxlbmd0aCk7XG59XG5cbi8qKlxyXG4gKiBAcGFyYW0ge05vdHl9IHJlZlxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9XHJcbiAqL1xuZnVuY3Rpb24gYnVpbGRCdXR0b25zKHJlZikge1xuICBpZiAoaGFzQnV0dG9ucyhyZWYpKSB7XG4gICAgdmFyIGJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBVdGlscy5hZGRDbGFzcyhidXR0b25zLCAnbm90eV9idXR0b25zJyk7XG5cbiAgICBPYmplY3Qua2V5cyhyZWYub3B0aW9ucy5idXR0b25zKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQocmVmLm9wdGlvbnMuYnV0dG9uc1trZXldLmRvbSk7XG4gICAgfSk7XG5cbiAgICByZWYub3B0aW9ucy5idXR0b25zLmZvckVhY2goZnVuY3Rpb24gKGJ0bikge1xuICAgICAgYnV0dG9ucy5hcHBlbmRDaGlsZChidG4uZG9tKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYnV0dG9ucy5vdXRlckhUTUw7XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcclxuICogQHBhcmFtIHtOb3R5fSByZWZcclxuICogQHJldHVybiB7dm9pZH1cclxuICovXG5mdW5jdGlvbiBoYW5kbGVNb2RhbChyZWYpIHtcbiAgaWYgKHJlZi5vcHRpb25zLm1vZGFsKSB7XG4gICAgaWYgKERvY01vZGFsQ291bnQgPT09IDApIHtcbiAgICAgIGNyZWF0ZU1vZGFsKHJlZik7XG4gICAgfVxuXG4gICAgZXhwb3J0cy5Eb2NNb2RhbENvdW50ID0gRG9jTW9kYWxDb3VudCArPSAxO1xuICB9XG59XG5cbi8qKlxyXG4gKiBAcGFyYW0ge05vdHl9IHJlZlxyXG4gKiBAcmV0dXJuIHt2b2lkfVxyXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZU1vZGFsQ2xvc2UocmVmKSB7XG4gIGlmIChyZWYub3B0aW9ucy5tb2RhbCAmJiBEb2NNb2RhbENvdW50ID4gMCkge1xuICAgIGV4cG9ydHMuRG9jTW9kYWxDb3VudCA9IERvY01vZGFsQ291bnQgLT0gMTtcblxuICAgIGlmIChEb2NNb2RhbENvdW50IDw9IDApIHtcbiAgICAgIHZhciBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub3R5X21vZGFsJyk7XG5cbiAgICAgIGlmIChtb2RhbCkge1xuICAgICAgICBVdGlscy5yZW1vdmVDbGFzcyhtb2RhbCwgJ25vdHlfbW9kYWxfb3BlbicpO1xuICAgICAgICBVdGlscy5hZGRDbGFzcyhtb2RhbCwgJ25vdHlfbW9kYWxfY2xvc2UnKTtcbiAgICAgICAgVXRpbHMuYWRkTGlzdGVuZXIobW9kYWwsIFV0aWxzLmFuaW1hdGlvbkVuZEV2ZW50cywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIFV0aWxzLnJlbW92ZShtb2RhbCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcclxuICogQHJldHVybiB7dm9pZH1cclxuICovXG5mdW5jdGlvbiBjcmVhdGVNb2RhbCgpIHtcbiAgdmFyIGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG4gIHZhciBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBVdGlscy5hZGRDbGFzcyhtb2RhbCwgJ25vdHlfbW9kYWwnKTtcbiAgYm9keS5pbnNlcnRCZWZvcmUobW9kYWwsIGJvZHkuZmlyc3RDaGlsZCk7XG4gIFV0aWxzLmFkZENsYXNzKG1vZGFsLCAnbm90eV9tb2RhbF9vcGVuJyk7XG5cbiAgVXRpbHMuYWRkTGlzdGVuZXIobW9kYWwsIFV0aWxzLmFuaW1hdGlvbkVuZEV2ZW50cywgZnVuY3Rpb24gKCkge1xuICAgIFV0aWxzLnJlbW92ZUNsYXNzKG1vZGFsLCAnbm90eV9tb2RhbF9vcGVuJyk7XG4gIH0pO1xufVxuXG4vKipcclxuICogQHBhcmFtIHtOb3R5fSByZWZcclxuICogQHJldHVybiB7dm9pZH1cclxuICovXG5mdW5jdGlvbiBmaW5kT3JDcmVhdGVDb250YWluZXIocmVmKSB7XG4gIGlmIChyZWYub3B0aW9ucy5jb250YWluZXIpIHtcbiAgICByZWYubGF5b3V0RG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihyZWYub3B0aW9ucy5jb250YWluZXIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBsYXlvdXRJRCA9ICdub3R5X2xheW91dF9fJyArIHJlZi5vcHRpb25zLmxheW91dDtcbiAgcmVmLmxheW91dERvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdiMnICsgbGF5b3V0SUQpO1xuXG4gIGlmICghcmVmLmxheW91dERvbSkge1xuICAgIHJlZi5sYXlvdXREb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByZWYubGF5b3V0RG9tLnNldEF0dHJpYnV0ZSgnaWQnLCBsYXlvdXRJRCk7XG4gICAgcmVmLmxheW91dERvbS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYWxlcnQnKTtcbiAgICByZWYubGF5b3V0RG9tLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ3BvbGl0ZScpO1xuICAgIFV0aWxzLmFkZENsYXNzKHJlZi5sYXlvdXREb20sICdub3R5X2xheW91dCcpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5hcHBlbmRDaGlsZChyZWYubGF5b3V0RG9tKTtcbiAgfVxufVxuXG4vKipcclxuICogQHBhcmFtIHtOb3R5fSByZWZcclxuICogQHJldHVybiB7dm9pZH1cclxuICovXG5mdW5jdGlvbiBxdWV1ZUNsb3NlKHJlZikge1xuICBpZiAocmVmLm9wdGlvbnMudGltZW91dCkge1xuICAgIGlmIChyZWYub3B0aW9ucy5wcm9ncmVzc0JhciAmJiByZWYucHJvZ3Jlc3NEb20pIHtcbiAgICAgIFV0aWxzLmNzcyhyZWYucHJvZ3Jlc3NEb20sIHtcbiAgICAgICAgdHJhbnNpdGlvbjogJ3dpZHRoICcgKyByZWYub3B0aW9ucy50aW1lb3V0ICsgJ21zIGxpbmVhcicsXG4gICAgICAgIHdpZHRoOiAnMCUnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjbGVhclRpbWVvdXQocmVmLmNsb3NlVGltZXIpO1xuXG4gICAgcmVmLmNsb3NlVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlZi5jbG9zZSgpO1xuICAgIH0sIHJlZi5vcHRpb25zLnRpbWVvdXQpO1xuICB9XG59XG5cbi8qKlxyXG4gKiBAcGFyYW0ge05vdHl9IHJlZlxyXG4gKiBAcmV0dXJuIHt2b2lkfVxyXG4gKi9cbmZ1bmN0aW9uIGRlcXVldWVDbG9zZShyZWYpIHtcbiAgaWYgKHJlZi5vcHRpb25zLnRpbWVvdXQgJiYgcmVmLmNsb3NlVGltZXIpIHtcbiAgICBjbGVhclRpbWVvdXQocmVmLmNsb3NlVGltZXIpO1xuICAgIHJlZi5jbG9zZVRpbWVyID0gLTE7XG5cbiAgICBpZiAocmVmLm9wdGlvbnMucHJvZ3Jlc3NCYXIgJiYgcmVmLnByb2dyZXNzRG9tKSB7XG4gICAgICBVdGlscy5jc3MocmVmLnByb2dyZXNzRG9tLCB7XG4gICAgICAgIHRyYW5zaXRpb246ICd3aWR0aCAwbXMgbGluZWFyJyxcbiAgICAgICAgd2lkdGg6ICcxMDAlJ1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxyXG4gKiBAcGFyYW0ge05vdHl9IHJlZlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lXHJcbiAqIEByZXR1cm4ge3ZvaWR9XHJcbiAqL1xuZnVuY3Rpb24gZmlyZShyZWYsIGV2ZW50TmFtZSkge1xuICBpZiAocmVmLmxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKSB7XG4gICAgcmVmLmxpc3RlbmVyc1tldmVudE5hbWVdLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7XG4gICAgICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNiLmFwcGx5KHJlZik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXHJcbiAqIEBwYXJhbSB7Tm90eX0gcmVmXHJcbiAqIEByZXR1cm4ge3ZvaWR9XHJcbiAqL1xuZnVuY3Rpb24gb3BlbkZsb3cocmVmKSB7XG4gIGZpcmUocmVmLCAnYWZ0ZXJTaG93Jyk7XG4gIHF1ZXVlQ2xvc2UocmVmKTtcblxuICBVdGlscy5hZGRMaXN0ZW5lcihyZWYuYmFyRG9tLCAnbW91c2VlbnRlcicsIGZ1bmN0aW9uICgpIHtcbiAgICBkZXF1ZXVlQ2xvc2UocmVmKTtcbiAgfSk7XG5cbiAgVXRpbHMuYWRkTGlzdGVuZXIocmVmLmJhckRvbSwgJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgcXVldWVDbG9zZShyZWYpO1xuICB9KTtcbn1cblxuLyoqXHJcbiAqIEBwYXJhbSB7Tm90eX0gcmVmXHJcbiAqIEByZXR1cm4ge3ZvaWR9XHJcbiAqL1xuZnVuY3Rpb24gY2xvc2VGbG93KHJlZikge1xuICBkZWxldGUgU3RvcmVbcmVmLmlkXTtcbiAgcmVmLmNsb3NpbmcgPSBmYWxzZTtcbiAgZmlyZShyZWYsICdhZnRlckNsb3NlJyk7XG5cbiAgVXRpbHMucmVtb3ZlKHJlZi5iYXJEb20pO1xuXG4gIGlmIChyZWYubGF5b3V0RG9tLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub3R5X2JhcicpLmxlbmd0aCA9PT0gMCAmJiAhcmVmLm9wdGlvbnMuY29udGFpbmVyKSB7XG4gICAgVXRpbHMucmVtb3ZlKHJlZi5sYXlvdXREb20pO1xuICB9XG5cbiAgaWYgKFV0aWxzLmluQXJyYXkoJ2RvY1Zpc2libGUnLCByZWYub3B0aW9ucy50aXRsZUNvdW50LmNvbmRpdGlvbnMpIHx8IFV0aWxzLmluQXJyYXkoJ2RvY0hpZGRlbicsIHJlZi5vcHRpb25zLnRpdGxlQ291bnQuY29uZGl0aW9ucykpIHtcbiAgICBkb2NUaXRsZS5kZWNyZW1lbnQoKTtcbiAgfVxuXG4gIHF1ZXVlUmVuZGVyKHJlZi5vcHRpb25zLnF1ZXVlKTtcbn1cblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLk5vdHlCdXR0b24gPSB1bmRlZmluZWQ7XG5cbnZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgVXRpbHMgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfdXRpbHMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgTm90eUJ1dHRvbiA9IGV4cG9ydHMuTm90eUJ1dHRvbiA9IGZ1bmN0aW9uIE5vdHlCdXR0b24oaHRtbCwgY2xhc3NlcywgY2IpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB2YXIgYXR0cmlidXRlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG5cbiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE5vdHlCdXR0b24pO1xuXG4gIHRoaXMuZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIHRoaXMuZG9tLmlubmVySFRNTCA9IGh0bWw7XG4gIHRoaXMuaWQgPSBhdHRyaWJ1dGVzLmlkID0gYXR0cmlidXRlcy5pZCB8fCBVdGlscy5nZW5lcmF0ZUlEKCdidXR0b24nKTtcbiAgdGhpcy5jYiA9IGNiO1xuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUpIHtcbiAgICBfdGhpcy5kb20uc2V0QXR0cmlidXRlKHByb3BlcnR5TmFtZSwgYXR0cmlidXRlc1twcm9wZXJ0eU5hbWVdKTtcbiAgfSk7XG4gIFV0aWxzLmFkZENsYXNzKHRoaXMuZG9tLCBjbGFzc2VzIHx8ICdub3R5X2J0bicpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBQdXNoID0gZXhwb3J0cy5QdXNoID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQdXNoKCkge1xuICAgIHZhciB3b3JrZXJQYXRoID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnL3NlcnZpY2Utd29ya2VyLmpzJztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQdXNoKTtcblxuICAgIHRoaXMuc3ViRGF0YSA9IHt9O1xuICAgIHRoaXMud29ya2VyUGF0aCA9IHdvcmtlclBhdGg7XG4gICAgdGhpcy5saXN0ZW5lcnMgPSB7XG4gICAgICBvblBlcm1pc3Npb25HcmFudGVkOiBbXSxcbiAgICAgIG9uUGVybWlzc2lvbkRlbmllZDogW10sXG4gICAgICBvblN1YnNjcmlwdGlvblN1Y2Nlc3M6IFtdLFxuICAgICAgb25TdWJzY3JpcHRpb25DYW5jZWw6IFtdLFxuICAgICAgb25Xb3JrZXJFcnJvcjogW10sXG4gICAgICBvbldvcmtlclN1Y2Nlc3M6IFtdLFxuICAgICAgb25Xb3JrZXJOb3RTdXBwb3J0ZWQ6IFtdXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYlxyXG4gICAqIEByZXR1cm4ge1B1c2h9XHJcbiAgICovXG5cblxuICBfY3JlYXRlQ2xhc3MoUHVzaCwgW3tcbiAgICBrZXk6ICdvbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uKGV2ZW50TmFtZSkge1xuICAgICAgdmFyIGNiID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmdW5jdGlvbiAoKSB7fTtcblxuICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyAmJiB0aGlzLmxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0ucHVzaChjYik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2ZpcmUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaXJlKGV2ZW50TmFtZSkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107XG5cbiAgICAgIGlmICh0aGlzLmxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0uZm9yRWFjaChmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYi5hcHBseShfdGhpcywgcGFyYW1zKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NyZWF0ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdOT1QgSU1QTEVNRU5URUQgWUVUJyk7XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxyXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2lzU3VwcG9ydGVkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNTdXBwb3J0ZWQoKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IHdpbmRvdy5Ob3RpZmljYXRpb24gfHwgd2luZG93LndlYmtpdE5vdGlmaWNhdGlvbnMgfHwgbmF2aWdhdG9yLm1vek5vdGlmaWNhdGlvbiB8fCB3aW5kb3cuZXh0ZXJuYWwgJiYgd2luZG93LmV4dGVybmFsLm1zSXNTaXRlTW9kZSgpICE9PSB1bmRlZmluZWQ7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxyXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2dldFBlcm1pc3Npb25TdGF0dXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQZXJtaXNzaW9uU3RhdHVzKCkge1xuICAgICAgdmFyIHBlcm0gPSAnZGVmYXVsdCc7XG5cbiAgICAgIGlmICh3aW5kb3cuTm90aWZpY2F0aW9uICYmIHdpbmRvdy5Ob3RpZmljYXRpb24ucGVybWlzc2lvbkxldmVsKSB7XG4gICAgICAgIHBlcm0gPSB3aW5kb3cuTm90aWZpY2F0aW9uLnBlcm1pc3Npb25MZXZlbDtcbiAgICAgIH0gZWxzZSBpZiAod2luZG93LndlYmtpdE5vdGlmaWNhdGlvbnMgJiYgd2luZG93LndlYmtpdE5vdGlmaWNhdGlvbnMuY2hlY2tQZXJtaXNzaW9uKSB7XG4gICAgICAgIHN3aXRjaCAod2luZG93LndlYmtpdE5vdGlmaWNhdGlvbnMuY2hlY2tQZXJtaXNzaW9uKCkpIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBwZXJtID0gJ2RlZmF1bHQnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcGVybSA9ICdncmFudGVkJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBwZXJtID0gJ2RlbmllZCc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAod2luZG93Lk5vdGlmaWNhdGlvbiAmJiB3aW5kb3cuTm90aWZpY2F0aW9uLnBlcm1pc3Npb24pIHtcbiAgICAgICAgcGVybSA9IHdpbmRvdy5Ob3RpZmljYXRpb24ucGVybWlzc2lvbjtcbiAgICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLm1vek5vdGlmaWNhdGlvbikge1xuICAgICAgICBwZXJtID0gJ2dyYW50ZWQnO1xuICAgICAgfSBlbHNlIGlmICh3aW5kb3cuZXh0ZXJuYWwgJiYgd2luZG93LmV4dGVybmFsLm1zSXNTaXRlTW9kZSgpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcGVybSA9IHdpbmRvdy5leHRlcm5hbC5tc0lzU2l0ZU1vZGUoKSA/ICdncmFudGVkJyA6ICdkZWZhdWx0JztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBlcm0udG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxyXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2dldEVuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RW5kcG9pbnQoc3Vic2NyaXB0aW9uKSB7XG4gICAgICB2YXIgZW5kcG9pbnQgPSBzdWJzY3JpcHRpb24uZW5kcG9pbnQ7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uSWQgPSBzdWJzY3JpcHRpb24uc3Vic2NyaXB0aW9uSWQ7XG5cbiAgICAgIC8vIGZpeCBmb3IgQ2hyb21lIDwgNDVcbiAgICAgIGlmIChzdWJzY3JpcHRpb25JZCAmJiBlbmRwb2ludC5pbmRleE9mKHN1YnNjcmlwdGlvbklkKSA9PT0gLTEpIHtcbiAgICAgICAgZW5kcG9pbnQgKz0gJy8nICsgc3Vic2NyaXB0aW9uSWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBlbmRwb2ludDtcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XHJcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnaXNTV1JlZ2lzdGVyZWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1NXUmVnaXN0ZXJlZCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyLnN0YXRlID09PSAnYWN0aXZhdGVkJztcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7dm9pZH1cclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICd1bnJlZ2lzdGVyV29ya2VyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdW5yZWdpc3RlcldvcmtlcigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XG4gICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmdldFJlZ2lzdHJhdGlvbnMoKS50aGVuKGZ1bmN0aW9uIChyZWdpc3RyYXRpb25zKSB7XG4gICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSByZWdpc3RyYXRpb25zW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgICAgICB2YXIgcmVnaXN0cmF0aW9uID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uLnVucmVnaXN0ZXIoKTtcbiAgICAgICAgICAgICAgc2VsZi5maXJlKCdvblN1YnNjcmlwdGlvbkNhbmNlbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3JlcXVlc3RTdWJzY3JpcHRpb24nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0U3Vic2NyaXB0aW9uKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciB1c2VyVmlzaWJsZU9ubHkgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRydWU7XG5cbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5nZXRQZXJtaXNzaW9uU3RhdHVzKCk7XG4gICAgICB2YXIgY2IgPSBmdW5jdGlvbiBjYihyZXN1bHQpIHtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gJ2dyYW50ZWQnKSB7XG4gICAgICAgICAgX3RoaXMyLmZpcmUoJ29uUGVybWlzc2lvbkdyYW50ZWQnKTtcblxuICAgICAgICAgIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XG4gICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihfdGhpczIud29ya2VyUGF0aCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5LnRoZW4oZnVuY3Rpb24gKHNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBzZWxmLmZpcmUoJ29uV29ya2VyU3VjY2VzcycpO1xuICAgICAgICAgICAgICAgIHNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgICAgICAgIHVzZXJWaXNpYmxlT25seTogdXNlclZpc2libGVPbmx5XG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICB2YXIga2V5ID0gc3Vic2NyaXB0aW9uLmdldEtleSgncDI1NmRoJyk7XG4gICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSBzdWJzY3JpcHRpb24uZ2V0S2V5KCdhdXRoJyk7XG5cbiAgICAgICAgICAgICAgICAgIHNlbGYuc3ViRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQ6IHNlbGYuZ2V0RW5kcG9pbnQoc3Vic2NyaXB0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgcDI1NmRoOiBrZXkgPyB3aW5kb3cuYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KGtleSkpKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGF1dGg6IHRva2VuID8gd2luZG93LmJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheSh0b2tlbikpKSA6IG51bGxcbiAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgIHNlbGYuZmlyZSgnb25TdWJzY3JpcHRpb25TdWNjZXNzJywgW3NlbGYuc3ViRGF0YV0pO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYuZmlyZSgnb25Xb3JrZXJFcnJvcicsIFtlcnJdKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5maXJlKCdvbldvcmtlck5vdFN1cHBvcnRlZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09ICdkZW5pZWQnKSB7XG4gICAgICAgICAgX3RoaXMyLmZpcmUoJ29uUGVybWlzc2lvbkRlbmllZCcpO1xuICAgICAgICAgIF90aGlzMi51bnJlZ2lzdGVyV29ya2VyKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGlmIChjdXJyZW50ID09PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5Ob3RpZmljYXRpb24gJiYgd2luZG93Lk5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbikge1xuICAgICAgICAgIHdpbmRvdy5Ob3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oY2IpO1xuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy53ZWJraXROb3RpZmljYXRpb25zICYmIHdpbmRvdy53ZWJraXROb3RpZmljYXRpb25zLmNoZWNrUGVybWlzc2lvbikge1xuICAgICAgICAgIHdpbmRvdy53ZWJraXROb3RpZmljYXRpb25zLnJlcXVlc3RQZXJtaXNzaW9uKGNiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2IoY3VycmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFB1c2g7XG59KCk7XG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2VzcywgZ2xvYmFsKSB7dmFyIHJlcXVpcmU7LyohXG4gKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxuICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3N0ZWZhbnBlbm5lci9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuICogQHZlcnNpb24gICA0LjEuMVxuICovXG5cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdCB0cnVlID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuXHQoZ2xvYmFsLkVTNlByb21pc2UgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB4O1xuICByZXR1cm4geCAhPT0gbnVsbCAmJiAodHlwZSA9PT0gJ29iamVjdCcgfHwgdHlwZSA9PT0gJ2Z1bmN0aW9uJyk7XG59XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG59XG5cbnZhciBfaXNBcnJheSA9IHVuZGVmaW5lZDtcbmlmIChBcnJheS5pc0FycmF5KSB7XG4gIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbn0gZWxzZSB7XG4gIF9pc0FycmF5ID0gZnVuY3Rpb24gKHgpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xufVxuXG52YXIgaXNBcnJheSA9IF9pc0FycmF5O1xuXG52YXIgbGVuID0gMDtcbnZhciB2ZXJ0eE5leHQgPSB1bmRlZmluZWQ7XG52YXIgY3VzdG9tU2NoZWR1bGVyRm4gPSB1bmRlZmluZWQ7XG5cbnZhciBhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7XG4gIHF1ZXVlW2xlbl0gPSBjYWxsYmFjaztcbiAgcXVldWVbbGVuICsgMV0gPSBhcmc7XG4gIGxlbiArPSAyO1xuICBpZiAobGVuID09PSAyKSB7XG4gICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XG4gICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxuICAgIGlmIChjdXN0b21TY2hlZHVsZXJGbikge1xuICAgICAgY3VzdG9tU2NoZWR1bGVyRm4oZmx1c2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2hlZHVsZUZsdXNoKCk7XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBzZXRTY2hlZHVsZXIoc2NoZWR1bGVGbikge1xuICBjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XG59XG5cbmZ1bmN0aW9uIHNldEFzYXAoYXNhcEZuKSB7XG4gIGFzYXAgPSBhc2FwRm47XG59XG5cbnZhciBicm93c2VyV2luZG93ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQ7XG52YXIgYnJvd3Nlckdsb2JhbCA9IGJyb3dzZXJXaW5kb3cgfHwge307XG52YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xudmFyIGlzTm9kZSA9IHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgKHt9KS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cbi8vIHRlc3QgZm9yIHdlYiB3b3JrZXIgYnV0IG5vdCBpbiBJRTEwXG52YXIgaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXG4vLyBub2RlXG5mdW5jdGlvbiB1c2VOZXh0VGljaygpIHtcbiAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3Vqb2pzL3doZW4vaXNzdWVzLzQxMCBmb3IgZGV0YWlsc1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTtcbiAgfTtcbn1cblxuLy8gdmVydHhcbmZ1bmN0aW9uIHVzZVZlcnR4VGltZXIoKSB7XG4gIGlmICh0eXBlb2YgdmVydHhOZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2ZXJ0eE5leHQoZmx1c2gpO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gdXNlU2V0VGltZW91dCgpO1xufVxuXG5mdW5jdGlvbiB1c2VNdXRhdGlvbk9ic2VydmVyKCkge1xuICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gIHZhciBvYnNlcnZlciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihmbHVzaCk7XG4gIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIG5vZGUuZGF0YSA9IGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyO1xuICB9O1xufVxuXG4vLyB3ZWIgd29ya2VyXG5mdW5jdGlvbiB1c2VNZXNzYWdlQ2hhbm5lbCgpIHtcbiAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXNlU2V0VGltZW91dCgpIHtcbiAgLy8gU3RvcmUgc2V0VGltZW91dCByZWZlcmVuY2Ugc28gZXM2LXByb21pc2Ugd2lsbCBiZSB1bmFmZmVjdGVkIGJ5XG4gIC8vIG90aGVyIGNvZGUgbW9kaWZ5aW5nIHNldFRpbWVvdXQgKGxpa2Ugc2lub24udXNlRmFrZVRpbWVycygpKVxuICB2YXIgZ2xvYmFsU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdsb2JhbFNldFRpbWVvdXQoZmx1c2gsIDEpO1xuICB9O1xufVxuXG52YXIgcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7XG5mdW5jdGlvbiBmbHVzaCgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuICAgIHZhciBjYWxsYmFjayA9IHF1ZXVlW2ldO1xuICAgIHZhciBhcmcgPSBxdWV1ZVtpICsgMV07XG5cbiAgICBjYWxsYmFjayhhcmcpO1xuXG4gICAgcXVldWVbaV0gPSB1bmRlZmluZWQ7XG4gICAgcXVldWVbaSArIDFdID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gYXR0ZW1wdFZlcnR4KCkge1xuICB0cnkge1xuICAgIHZhciByID0gcmVxdWlyZTtcbiAgICB2YXIgdmVydHggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuICAgIHZlcnR4TmV4dCA9IHZlcnR4LnJ1bk9uTG9vcCB8fCB2ZXJ0eC5ydW5PbkNvbnRleHQ7XG4gICAgcmV0dXJuIHVzZVZlcnR4VGltZXIoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7XG4gIH1cbn1cblxudmFyIHNjaGVkdWxlRmx1c2ggPSB1bmRlZmluZWQ7XG4vLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxuaWYgKGlzTm9kZSkge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTmV4dFRpY2soKTtcbn0gZWxzZSBpZiAoQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcbn0gZWxzZSBpZiAoaXNXb3JrZXIpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU1lc3NhZ2VDaGFubmVsKCk7XG59IGVsc2UgaWYgKGJyb3dzZXJXaW5kb3cgPT09IHVuZGVmaW5lZCAmJiBcImZ1bmN0aW9uXCIgPT09ICdmdW5jdGlvbicpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IGF0dGVtcHRWZXJ0eCgpO1xufSBlbHNlIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50cztcblxuICB2YXIgcGFyZW50ID0gdGhpcztcblxuICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcihub29wKTtcblxuICBpZiAoY2hpbGRbUFJPTUlTRV9JRF0gPT09IHVuZGVmaW5lZCkge1xuICAgIG1ha2VQcm9taXNlKGNoaWxkKTtcbiAgfVxuXG4gIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXG4gIGlmIChfc3RhdGUpIHtcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNhbGxiYWNrID0gX2FyZ3VtZW50c1tfc3RhdGUgLSAxXTtcbiAgICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soX3N0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgIH0pKCk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgfVxuXG4gIHJldHVybiBjaGlsZDtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlc29sdmVgIHJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgcmVzb2x2ZWQgd2l0aCB0aGVcbiAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZXNvbHZlKDEpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgxKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlc29sdmVcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSBmdWxmaWxsZWQgd2l0aCB0aGUgZ2l2ZW5cbiAgYHZhbHVlYFxuKi9cbmZ1bmN0aW9uIHJlc29sdmUkMShvYmplY3QpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gb2JqZWN0O1xuICB9XG5cbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG4gIHJlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbnZhciBQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDE2KTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnZhciBQRU5ESU5HID0gdm9pZCAwO1xudmFyIEZVTEZJTExFRCA9IDE7XG52YXIgUkVKRUNURUQgPSAyO1xuXG52YXIgR0VUX1RIRU5fRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTtcblxuZnVuY3Rpb24gc2VsZkZ1bGZpbGxtZW50KCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XG59XG5cbmZ1bmN0aW9uIGNhbm5vdFJldHVybk93bigpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGhlbihwcm9taXNlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBHRVRfVEhFTl9FUlJPUi5lcnJvciA9IGVycm9yO1xuICAgIHJldHVybiBHRVRfVEhFTl9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlUaGVuKHRoZW4kJDEsIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcbiAgdHJ5IHtcbiAgICB0aGVuJCQxLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4kJDEpIHtcbiAgYXNhcChmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHZhciBzZWFsZWQgPSBmYWxzZTtcbiAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4kJDEsIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG5cbiAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7XG5cbiAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIHJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgfVxuICB9LCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHtcbiAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICByZXR1cm4gcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQxKSB7XG4gIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmIHRoZW4kJDEgPT09IHRoZW4gJiYgbWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3Rvci5yZXNvbHZlID09PSByZXNvbHZlJDEpIHtcbiAgICBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodGhlbiQkMSA9PT0gR0VUX1RIRU5fRVJST1IpIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCBHRVRfVEhFTl9FUlJPUi5lcnJvcik7XG4gICAgICBHRVRfVEhFTl9FUlJPUi5lcnJvciA9IG51bGw7XG4gICAgfSBlbHNlIGlmICh0aGVuJCQxID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJDEpKSB7XG4gICAgICBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTtcbiAgfSBlbHNlIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkge1xuICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGdldFRoZW4odmFsdWUpKTtcbiAgfSBlbHNlIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcbiAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG4gIH1cblxuICBwdWJsaXNoKHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDtcblxuICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuICBwcm9taXNlLl9zdGF0ZSA9IFJFSkVDVEVEO1xuICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XG5cbiAgYXNhcChwdWJsaXNoUmVqZWN0aW9uLCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gIHZhciBfc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuICB2YXIgbGVuZ3RoID0gX3N1YnNjcmliZXJzLmxlbmd0aDtcblxuICBwYXJlbnQuX29uZXJyb3IgPSBudWxsO1xuXG4gIF9zdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hpbGQ7XG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIFJFSkVDVEVEXSA9IG9uUmVqZWN0aW9uO1xuXG4gIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkge1xuICAgIGFzYXAocHVibGlzaCwgcGFyZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoKHByb21pc2UpIHtcbiAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7XG4gIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XG5cbiAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBjaGlsZCA9IHVuZGVmaW5lZCxcbiAgICAgIGNhbGxiYWNrID0gdW5kZWZpbmVkLFxuICAgICAgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3Vic2NyaWJlcnMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldO1xuICAgIGNhbGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdO1xuXG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKGRldGFpbCk7XG4gICAgfVxuICB9XG5cbiAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDtcbn1cblxuZnVuY3Rpb24gRXJyb3JPYmplY3QoKSB7XG4gIHRoaXMuZXJyb3IgPSBudWxsO1xufVxuXG52YXIgVFJZX0NBVENIX0VSUk9SID0gbmV3IEVycm9yT2JqZWN0KCk7XG5cbmZ1bmN0aW9uIHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IGU7XG4gICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHZhciBoYXNDYWxsYmFjayA9IGlzRnVuY3Rpb24oY2FsbGJhY2spLFxuICAgICAgdmFsdWUgPSB1bmRlZmluZWQsXG4gICAgICBlcnJvciA9IHVuZGVmaW5lZCxcbiAgICAgIHN1Y2NlZWRlZCA9IHVuZGVmaW5lZCxcbiAgICAgIGZhaWxlZCA9IHVuZGVmaW5lZDtcblxuICBpZiAoaGFzQ2FsbGJhY2spIHtcbiAgICB2YWx1ZSA9IHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpO1xuXG4gICAgaWYgKHZhbHVlID09PSBUUllfQ0FUQ0hfRVJST1IpIHtcbiAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICBlcnJvciA9IHZhbHVlLmVycm9yO1xuICAgICAgdmFsdWUuZXJyb3IgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgcmVqZWN0KHByb21pc2UsIGNhbm5vdFJldHVybk93bigpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSBkZXRhaWw7XG4gICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIC8vIG5vb3BcbiAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcbiAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gRlVMRklMTEVEKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcbiAgdHJ5IHtcbiAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSkge1xuICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIGUpO1xuICB9XG59XG5cbnZhciBpZCA9IDA7XG5mdW5jdGlvbiBuZXh0SWQoKSB7XG4gIHJldHVybiBpZCsrO1xufVxuXG5mdW5jdGlvbiBtYWtlUHJvbWlzZShwcm9taXNlKSB7XG4gIHByb21pc2VbUFJPTUlTRV9JRF0gPSBpZCsrO1xuICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xufVxuXG5mdW5jdGlvbiBFbnVtZXJhdG9yJDEoQ29uc3RydWN0b3IsIGlucHV0KSB7XG4gIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcbiAgdGhpcy5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXG4gIGlmICghdGhpcy5wcm9taXNlW1BST01JU0VfSURdKSB7XG4gICAgbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KGlucHV0KSkge1xuICAgIHRoaXMubGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblxuICAgIHRoaXMuX3Jlc3VsdCA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7XG5cbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XG4gICAgICB0aGlzLl9lbnVtZXJhdGUoaW5wdXQpO1xuICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmVqZWN0KHRoaXMucHJvbWlzZSwgdmFsaWRhdGlvbkVycm9yKCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRpb25FcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG59XG5cbkVudW1lcmF0b3IkMS5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICBmb3IgKHZhciBpID0gMDsgdGhpcy5fc3RhdGUgPT09IFBFTkRJTkcgJiYgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdGhpcy5fZWFjaEVudHJ5KGlucHV0W2ldLCBpKTtcbiAgfVxufTtcblxuRW51bWVyYXRvciQxLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5LCBpKSB7XG4gIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcbiAgdmFyIHJlc29sdmUkJDEgPSBjLnJlc29sdmU7XG5cbiAgaWYgKHJlc29sdmUkJDEgPT09IHJlc29sdmUkMSkge1xuICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpO1xuXG4gICAgaWYgKF90aGVuID09PSB0aGVuICYmIGVudHJ5Ll9zdGF0ZSAhPT0gUEVORElORykge1xuICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoZW4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XG4gICAgfSBlbHNlIGlmIChjID09PSBQcm9taXNlJDIpIHtcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IGMobm9vcCk7XG4gICAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCBfdGhlbik7XG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbiAocmVzb2x2ZSQkMSkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSQkMShlbnRyeSk7XG4gICAgICB9KSwgaSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlJCQxKGVudHJ5KSwgaSk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IkMS5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uIChzdGF0ZSwgaSwgdmFsdWUpIHtcbiAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cbiAgaWYgKHByb21pc2UuX3N0YXRlID09PSBQRU5ESU5HKSB7XG4gICAgdGhpcy5fcmVtYWluaW5nLS07XG5cbiAgICBpZiAoc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yJDEucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgaSkge1xuICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7XG4gIH0pO1xufTtcblxuLyoqXG4gIGBQcm9taXNlLmFsbGAgYWNjZXB0cyBhbiBhcnJheSBvZiBwcm9taXNlcywgYW5kIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaFxuICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBvZiBmdWxmaWxsbWVudCB2YWx1ZXMgZm9yIHRoZSBwYXNzZWQgcHJvbWlzZXMsIG9yXG4gIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbFxuICBlbGVtZW50cyBvZiB0aGUgcGFzc2VkIGl0ZXJhYmxlIHRvIHByb21pc2VzIGFzIGl0IHJ1bnMgdGhpcyBhbGdvcml0aG0uXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlc29sdmUoMik7XG4gIGxldCBwcm9taXNlMyA9IHJlc29sdmUoMyk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTtcbiAgfSk7XG4gIGBgYFxuXG4gIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMnc1xuICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoXCIyXCIpKTtcbiAgbGV0IHByb21pc2UzID0gcmVqZWN0KG5ldyBFcnJvcihcIjNcIikpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhXG4gIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gXCIyXCJcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgYWxsXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gZW50cmllcyBhcnJheSBvZiBwcm9taXNlc1xuICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIGBwcm9taXNlc2AgaGF2ZSBiZWVuXG4gIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLlxuICBAc3RhdGljXG4qL1xuZnVuY3Rpb24gYWxsJDEoZW50cmllcykge1xuICByZXR1cm4gbmV3IEVudW1lcmF0b3IkMSh0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xufVxuXG4vKipcbiAgYFByb21pc2UucmFjZWAgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoIGlzIHNldHRsZWQgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZVxuICBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBzZXR0bGUuXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDInKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyByZXN1bHQgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgaXQgd2FzIHJlc29sdmVkIGJlZm9yZSBwcm9taXNlMVxuICAgIC8vIHdhcyByZXNvbHZlZC5cbiAgfSk7XG4gIGBgYFxuXG4gIGBQcm9taXNlLnJhY2VgIGlzIGRldGVybWluaXN0aWMgaW4gdGhhdCBvbmx5IHRoZSBzdGF0ZSBvZiB0aGUgZmlyc3RcbiAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFtcGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZVxuICBgcHJvbWlzZXNgIGFycmF5IGFyZ3VtZW50IGFyZSByZXNvbHZlZCwgYnV0IHRoZSBmaXJzdCBzZXR0bGVkIHByb21pc2UgaGFzXG4gIGJlY29tZSByZWplY3RlZCBiZWZvcmUgdGhlIG90aGVyIHByb21pc2VzIGJlY2FtZSBmdWxmaWxsZWQsIHRoZSByZXR1cm5lZFxuICBwcm9taXNlIHdpbGwgYmVjb21lIHJlamVjdGVkOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ3Byb21pc2UgMicpKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVuc1xuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQgYmVmb3JlXG4gICAgLy8gcHJvbWlzZSAxIGJlY2FtZSBmdWxmaWxsZWRcbiAgfSk7XG4gIGBgYFxuXG4gIEFuIGV4YW1wbGUgcmVhbC13b3JsZCB1c2UgY2FzZSBpcyBpbXBsZW1lbnRpbmcgdGltZW91dHM6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBQcm9taXNlLnJhY2UoW2FqYXgoJ2Zvby5qc29uJyksIHRpbWVvdXQoNTAwMCldKVxuICBgYGBcblxuICBAbWV0aG9kIHJhY2VcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBwcm9taXNlcyBhcnJheSBvZiBwcm9taXNlcyB0byBvYnNlcnZlXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRsZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWRcbiAgcHJvbWlzZSB0byBzZXR0bGUuXG4qL1xuZnVuY3Rpb24gcmFjZSQxKGVudHJpZXMpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgIHJldHVybiByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLlxuICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZWplY3RcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gcmVhc29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC5cbiovXG5mdW5jdGlvbiByZWplY3QkMShyZWFzb24pIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG4gIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xufVxuXG5mdW5jdGlvbiBuZWVkc05ldygpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcbn1cblxuLyoqXG4gIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcbiAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcbiAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG4gIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXG4gIFRlcm1pbm9sb2d5XG4gIC0tLS0tLS0tLS0tXG5cbiAgLSBgcHJvbWlzZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJlaGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi5cbiAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLlxuICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG4gIC0gYGV4Y2VwdGlvbmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cgc3RhdGVtZW50LlxuICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuXG4gIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG4gIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblxuICBQcm9taXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZhbHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZFxuICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxuXG4gIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYVxuICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG4gIHNldHRsZWQgc3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IHJlamVjdHMgd2lsbFxuICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsXG4gIGl0c2VsZiBmdWxmaWxsLlxuXG5cbiAgQmFzaWMgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLVxuXG4gIGBgYGpzXG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgLy8gb24gc3VjY2Vzc1xuICAgIHJlc29sdmUodmFsdWUpO1xuXG4gICAgLy8gb24gZmFpbHVyZVxuICAgIHJlamVjdChyZWFzb24pO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyBvbiByZWplY3Rpb25cbiAgfSk7XG4gIGBgYFxuXG4gIEFkdmFuY2VkIFVzYWdlOlxuICAtLS0tLS0tLS0tLS0tLS1cblxuICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG4gIGBYTUxIdHRwUmVxdWVzdGBzLlxuXG4gIGBgYGpzXG4gIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICB4aHIuc2VuZCgpO1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcbiAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0IGNvbXBvc2FibGUgcHJpbWl0aXZlcy5cblxuICBgYGBqc1xuICBQcm9taXNlLmFsbChbXG4gICAgZ2V0SlNPTignL3Bvc3RzJyksXG4gICAgZ2V0SlNPTignL2NvbW1lbnRzJylcbiAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cbiAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9KTtcbiAgYGBgXG5cbiAgQGNsYXNzIFByb21pc2VcbiAgQHBhcmFtIHtmdW5jdGlvbn0gcmVzb2x2ZXJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAY29uc3RydWN0b3JcbiovXG5mdW5jdGlvbiBQcm9taXNlJDIocmVzb2x2ZXIpIHtcbiAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpO1xuICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblxuICBpZiAobm9vcCAhPT0gcmVzb2x2ZXIpIHtcbiAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbmVlZHNSZXNvbHZlcigpO1xuICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlJDIgPyBpbml0aWFsaXplUHJvbWlzZSh0aGlzLCByZXNvbHZlcikgOiBuZWVkc05ldygpO1xuICB9XG59XG5cblByb21pc2UkMi5hbGwgPSBhbGwkMTtcblByb21pc2UkMi5yYWNlID0gcmFjZSQxO1xuUHJvbWlzZSQyLnJlc29sdmUgPSByZXNvbHZlJDE7XG5Qcm9taXNlJDIucmVqZWN0ID0gcmVqZWN0JDE7XG5Qcm9taXNlJDIuX3NldFNjaGVkdWxlciA9IHNldFNjaGVkdWxlcjtcblByb21pc2UkMi5fc2V0QXNhcCA9IHNldEFzYXA7XG5Qcm9taXNlJDIuX2FzYXAgPSBhc2FwO1xuXG5Qcm9taXNlJDIucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogUHJvbWlzZSQyLFxuXG4gIC8qKlxuICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuICAgIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXG4gICAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlXG4gICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIENoYWluaW5nXG4gICAgLS0tLS0tLS1cbiAgXG4gICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcbiAgICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XG4gICAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICByZXR1cm4gdXNlci5uYW1lO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkge1xuICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXG4gICAgfSk7XG4gIFxuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gaWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jy5cbiAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuICAgIH0pO1xuICAgIGBgYFxuICAgIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBBc3NpbWlsYXRpb25cbiAgICAtLS0tLS0tLS0tLS1cbiAgXG4gICAgU29tZXRpbWVzIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byBwcm9wYWdhdGUgdG8gYSBkb3duc3RyZWFtIHByb21pc2UgY2FuIG9ubHkgYmVcbiAgICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG4gICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcbiAgICB1bnRpbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBzZXR0bGVkLiBUaGlzIGlzIGNhbGxlZCAqYXNzaW1pbGF0aW9uKi5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgcmVqZWN0cywgd2UnbGwgaGF2ZSB0aGUgcmVhc29uIGhlcmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgU2ltcGxlIEV4YW1wbGVcbiAgICAtLS0tLS0tLS0tLS0tLVxuICBcbiAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBsZXQgcmVzdWx0O1xuICBcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfVxuICAgIGBgYFxuICBcbiAgICBFcnJiYWNrIEV4YW1wbGVcbiAgXG4gICAgYGBganNcbiAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgfVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBQcm9taXNlIEV4YW1wbGU7XG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEFkdmFuY2VkIEV4YW1wbGVcbiAgICAtLS0tLS0tLS0tLS0tLVxuICBcbiAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBsZXQgYXV0aG9yLCBib29rcztcbiAgXG4gICAgdHJ5IHtcbiAgICAgIGF1dGhvciA9IGZpbmRBdXRob3IoKTtcbiAgICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEVycmJhY2sgRXhhbXBsZVxuICBcbiAgICBgYGBqc1xuICBcbiAgICBmdW5jdGlvbiBmb3VuZEJvb2tzKGJvb2tzKSB7XG4gIFxuICAgIH1cbiAgXG4gICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcbiAgXG4gICAgfVxuICBcbiAgICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcbiAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFByb21pc2UgRXhhbXBsZTtcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGZpbmRBdXRob3IoKS5cbiAgICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XG4gICAgICAgIC8vIGZvdW5kIGJvb2tzXG4gICAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEBtZXRob2QgdGhlblxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZFxuICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuICB0aGVuOiB0aGVuLFxuXG4gIC8qKlxuICAgIGBjYXRjaGAgaXMgc2ltcGx5IHN1Z2FyIGZvciBgdGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uKWAgd2hpY2ggbWFrZXMgaXQgdGhlIHNhbWVcbiAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuICBcbiAgICBgYGBqc1xuICAgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpO1xuICAgIH1cbiAgXG4gICAgLy8gc3luY2hyb25vdXNcbiAgICB0cnkge1xuICAgICAgZmluZEF1dGhvcigpO1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgIH1cbiAgXG4gICAgLy8gYXN5bmMgd2l0aCBwcm9taXNlc1xuICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCBjYXRjaFxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG4gICdjYXRjaCc6IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikge1xuICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuICB9XG59O1xuXG4vKmdsb2JhbCBzZWxmKi9cbmZ1bmN0aW9uIHBvbHlmaWxsJDEoKSB7XG4gICAgdmFyIGxvY2FsID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGxvY2FsID0gZ2xvYmFsO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGxvY2FsID0gc2VsZjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXG4gICAgaWYgKFApIHtcbiAgICAgICAgdmFyIHByb21pc2VUb1N0cmluZyA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwcm9taXNlVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUC5yZXNvbHZlKCkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBzaWxlbnRseSBpZ25vcmVkXG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJvbWlzZVRvU3RyaW5nID09PSAnW29iamVjdCBQcm9taXNlXScgJiYgIVAuY2FzdCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9jYWwuUHJvbWlzZSA9IFByb21pc2UkMjtcbn1cblxuLy8gU3RyYW5nZSBjb21wYXQuLlxuUHJvbWlzZSQyLnBvbHlmaWxsID0gcG9seWZpbGwkMTtcblByb21pc2UkMi5Qcm9taXNlID0gUHJvbWlzZSQyO1xuXG5yZXR1cm4gUHJvbWlzZSQyO1xuXG59KSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1lczYtcHJvbWlzZS5tYXBcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNyksIF9fd2VicGFja19yZXF1aXJlX18oOCkpKVxuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7IC8qIGdsb2JhbCBWRVJTSU9OICovXG5cbl9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbnZhciBfZXM2UHJvbWlzZSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbnZhciBfZXM2UHJvbWlzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lczZQcm9taXNlKTtcblxudmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBVdGlscyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF91dGlscyk7XG5cbnZhciBfYXBpID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIEFQSSA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9hcGkpO1xuXG52YXIgX2J1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfcHVzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBOb3R5ID0gZnVuY3Rpb24gKCkge1xuICAvKipcclxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9uc1xyXG4gICAqIEByZXR1cm4ge05vdHl9XHJcbiAgICovXG4gIGZ1bmN0aW9uIE5vdHkoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE5vdHkpO1xuXG4gICAgdGhpcy5vcHRpb25zID0gVXRpbHMuZGVlcEV4dGVuZCh7fSwgQVBJLkRlZmF1bHRzLCBvcHRpb25zKTtcbiAgICB0aGlzLmlkID0gdGhpcy5vcHRpb25zLmlkIHx8IFV0aWxzLmdlbmVyYXRlSUQoJ2JhcicpO1xuICAgIHRoaXMuY2xvc2VUaW1lciA9IC0xO1xuICAgIHRoaXMuYmFyRG9tID0gbnVsbDtcbiAgICB0aGlzLmxheW91dERvbSA9IG51bGw7XG4gICAgdGhpcy5wcm9ncmVzc0RvbSA9IG51bGw7XG4gICAgdGhpcy5zaG93aW5nID0gZmFsc2U7XG4gICAgdGhpcy5zaG93biA9IGZhbHNlO1xuICAgIHRoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgdGhpcy5jbG9zaW5nID0gZmFsc2U7XG4gICAgdGhpcy5raWxsYWJsZSA9IHRoaXMub3B0aW9ucy50aW1lb3V0IHx8IHRoaXMub3B0aW9ucy5jbG9zZVdpdGgubGVuZ3RoID4gMDtcbiAgICB0aGlzLmhhc1NvdW5kID0gdGhpcy5vcHRpb25zLnNvdW5kcy5zb3VyY2VzLmxlbmd0aCA+IDA7XG4gICAgdGhpcy5zb3VuZFBsYXllZCA9IGZhbHNlO1xuICAgIHRoaXMubGlzdGVuZXJzID0ge1xuICAgICAgYmVmb3JlU2hvdzogW10sXG4gICAgICBvblNob3c6IFtdLFxuICAgICAgYWZ0ZXJTaG93OiBbXSxcbiAgICAgIG9uQ2xvc2U6IFtdLFxuICAgICAgYWZ0ZXJDbG9zZTogW10sXG4gICAgICBvbkNsaWNrOiBbXSxcbiAgICAgIG9uSG92ZXI6IFtdLFxuICAgICAgb25UZW1wbGF0ZTogW11cbiAgICB9O1xuICAgIHRoaXMucHJvbWlzZXMgPSB7XG4gICAgICBzaG93OiBudWxsLFxuICAgICAgY2xvc2U6IG51bGxcbiAgICB9O1xuICAgIHRoaXMub24oJ2JlZm9yZVNob3cnLCB0aGlzLm9wdGlvbnMuY2FsbGJhY2tzLmJlZm9yZVNob3cpO1xuICAgIHRoaXMub24oJ29uU2hvdycsIHRoaXMub3B0aW9ucy5jYWxsYmFja3Mub25TaG93KTtcbiAgICB0aGlzLm9uKCdhZnRlclNob3cnLCB0aGlzLm9wdGlvbnMuY2FsbGJhY2tzLmFmdGVyU2hvdyk7XG4gICAgdGhpcy5vbignb25DbG9zZScsIHRoaXMub3B0aW9ucy5jYWxsYmFja3Mub25DbG9zZSk7XG4gICAgdGhpcy5vbignYWZ0ZXJDbG9zZScsIHRoaXMub3B0aW9ucy5jYWxsYmFja3MuYWZ0ZXJDbG9zZSk7XG4gICAgdGhpcy5vbignb25DbGljaycsIHRoaXMub3B0aW9ucy5jYWxsYmFja3Mub25DbGljayk7XG4gICAgdGhpcy5vbignb25Ib3ZlcicsIHRoaXMub3B0aW9ucy5jYWxsYmFja3Mub25Ib3Zlcik7XG4gICAgdGhpcy5vbignb25UZW1wbGF0ZScsIHRoaXMub3B0aW9ucy5jYWxsYmFja3Mub25UZW1wbGF0ZSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYlxyXG4gICAqIEByZXR1cm4ge05vdHl9XHJcbiAgICovXG5cblxuICBfY3JlYXRlQ2xhc3MoTm90eSwgW3tcbiAgICBrZXk6ICdvbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uKGV2ZW50TmFtZSkge1xuICAgICAgdmFyIGNiID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmdW5jdGlvbiAoKSB7fTtcblxuICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyAmJiB0aGlzLmxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0ucHVzaChjYik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7Tm90eX1cclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdzaG93JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMua2lsbGVyID09PSB0cnVlKSB7XG4gICAgICAgIE5vdHkuY2xvc2VBbGwoKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5raWxsZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIE5vdHkuY2xvc2VBbGwodGhpcy5vcHRpb25zLmtpbGxlcik7XG4gICAgICB9XG5cbiAgICAgIHZhciBxdWV1ZUNvdW50cyA9IEFQSS5nZXRRdWV1ZUNvdW50cyh0aGlzLm9wdGlvbnMucXVldWUpO1xuXG4gICAgICBpZiAocXVldWVDb3VudHMuY3VycmVudCA+PSBxdWV1ZUNvdW50cy5tYXhWaXNpYmxlIHx8IEFQSS5QYWdlSGlkZGVuICYmIHRoaXMub3B0aW9ucy52aXNpYmlsaXR5Q29udHJvbCkge1xuICAgICAgICBBUEkuYWRkVG9RdWV1ZSh0aGlzKTtcblxuICAgICAgICBpZiAoQVBJLlBhZ2VIaWRkZW4gJiYgdGhpcy5oYXNTb3VuZCAmJiBVdGlscy5pbkFycmF5KCdkb2NIaWRkZW4nLCB0aGlzLm9wdGlvbnMuc291bmRzLmNvbmRpdGlvbnMpKSB7XG4gICAgICAgICAgVXRpbHMuY3JlYXRlQXVkaW9FbGVtZW50cyh0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChBUEkuUGFnZUhpZGRlbiAmJiBVdGlscy5pbkFycmF5KCdkb2NIaWRkZW4nLCB0aGlzLm9wdGlvbnMudGl0bGVDb3VudC5jb25kaXRpb25zKSkge1xuICAgICAgICAgIEFQSS5kb2NUaXRsZS5pbmNyZW1lbnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICBBUEkuU3RvcmVbdGhpcy5pZF0gPSB0aGlzO1xuXG4gICAgICBBUEkuZmlyZSh0aGlzLCAnYmVmb3JlU2hvdycpO1xuXG4gICAgICB0aGlzLnNob3dpbmcgPSB0cnVlO1xuXG4gICAgICBpZiAodGhpcy5jbG9zaW5nKSB7XG4gICAgICAgIHRoaXMuc2hvd2luZyA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgQVBJLmJ1aWxkKHRoaXMpO1xuICAgICAgQVBJLmhhbmRsZU1vZGFsKHRoaXMpO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmZvcmNlKSB7XG4gICAgICAgIHRoaXMubGF5b3V0RG9tLmluc2VydEJlZm9yZSh0aGlzLmJhckRvbSwgdGhpcy5sYXlvdXREb20uZmlyc3RDaGlsZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxheW91dERvbS5hcHBlbmRDaGlsZCh0aGlzLmJhckRvbSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmhhc1NvdW5kICYmICF0aGlzLnNvdW5kUGxheWVkICYmIFV0aWxzLmluQXJyYXkoJ2RvY1Zpc2libGUnLCB0aGlzLm9wdGlvbnMuc291bmRzLmNvbmRpdGlvbnMpKSB7XG4gICAgICAgIFV0aWxzLmNyZWF0ZUF1ZGlvRWxlbWVudHModGhpcyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChVdGlscy5pbkFycmF5KCdkb2NWaXNpYmxlJywgdGhpcy5vcHRpb25zLnRpdGxlQ291bnQuY29uZGl0aW9ucykpIHtcbiAgICAgICAgQVBJLmRvY1RpdGxlLmluY3JlbWVudCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNob3duID0gdHJ1ZTtcbiAgICAgIHRoaXMuY2xvc2VkID0gZmFsc2U7XG5cbiAgICAgIC8vIGJpbmQgYnV0dG9uIGV2ZW50cyBpZiBhbnlcbiAgICAgIGlmIChBUEkuaGFzQnV0dG9ucyh0aGlzKSkge1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMuYnV0dG9ucykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgdmFyIGJ0biA9IF90aGlzLmJhckRvbS5xdWVyeVNlbGVjdG9yKCcjJyArIF90aGlzLm9wdGlvbnMuYnV0dG9uc1trZXldLmlkKTtcbiAgICAgICAgICBVdGlscy5hZGRMaXN0ZW5lcihidG4sICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBVdGlscy5zdG9wUHJvcGFnYXRpb24oZSk7XG4gICAgICAgICAgICBfdGhpcy5vcHRpb25zLmJ1dHRvbnNba2V5XS5jYigpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wcm9ncmVzc0RvbSA9IHRoaXMuYmFyRG9tLnF1ZXJ5U2VsZWN0b3IoJy5ub3R5X3Byb2dyZXNzYmFyJyk7XG5cbiAgICAgIGlmIChVdGlscy5pbkFycmF5KCdjbGljaycsIHRoaXMub3B0aW9ucy5jbG9zZVdpdGgpKSB7XG4gICAgICAgIFV0aWxzLmFkZENsYXNzKHRoaXMuYmFyRG9tLCAnbm90eV9jbG9zZV93aXRoX2NsaWNrJyk7XG4gICAgICAgIFV0aWxzLmFkZExpc3RlbmVyKHRoaXMuYmFyRG9tLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIFV0aWxzLnN0b3BQcm9wYWdhdGlvbihlKTtcbiAgICAgICAgICBBUEkuZmlyZShfdGhpcywgJ29uQ2xpY2snKTtcbiAgICAgICAgICBfdGhpcy5jbG9zZSgpO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIFV0aWxzLmFkZExpc3RlbmVyKHRoaXMuYmFyRG9tLCAnbW91c2VlbnRlcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgQVBJLmZpcmUoX3RoaXMsICdvbkhvdmVyJyk7XG4gICAgICB9LCBmYWxzZSk7XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMudGltZW91dCkgVXRpbHMuYWRkQ2xhc3ModGhpcy5iYXJEb20sICdub3R5X2hhc190aW1lb3V0Jyk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnByb2dyZXNzQmFyKSB7XG4gICAgICAgIFV0aWxzLmFkZENsYXNzKHRoaXMuYmFyRG9tLCAnbm90eV9oYXNfcHJvZ3Jlc3NiYXInKTtcbiAgICAgIH1cblxuICAgICAgaWYgKFV0aWxzLmluQXJyYXkoJ2J1dHRvbicsIHRoaXMub3B0aW9ucy5jbG9zZVdpdGgpKSB7XG4gICAgICAgIFV0aWxzLmFkZENsYXNzKHRoaXMuYmFyRG9tLCAnbm90eV9jbG9zZV93aXRoX2J1dHRvbicpO1xuXG4gICAgICAgIHZhciBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBVdGlscy5hZGRDbGFzcyhjbG9zZUJ1dHRvbiwgJ25vdHlfY2xvc2VfYnV0dG9uJyk7XG4gICAgICAgIGNsb3NlQnV0dG9uLmlubmVySFRNTCA9ICfDlyc7XG4gICAgICAgIHRoaXMuYmFyRG9tLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTtcblxuICAgICAgICBVdGlscy5hZGRMaXN0ZW5lcihjbG9zZUJ1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBVdGlscy5zdG9wUHJvcGFnYXRpb24oZSk7XG4gICAgICAgICAgX3RoaXMuY2xvc2UoKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICBBUEkuZmlyZSh0aGlzLCAnb25TaG93Jyk7XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuYW5pbWF0aW9uLm9wZW4gPT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5wcm9taXNlcy5zaG93ID0gbmV3IF9lczZQcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5hbmltYXRpb24ub3BlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnByb21pc2VzLnNob3cgPSBuZXcgX2VzNlByb21pc2UyLmRlZmF1bHQodGhpcy5vcHRpb25zLmFuaW1hdGlvbi5vcGVuLmJpbmQodGhpcykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVXRpbHMuYWRkQ2xhc3ModGhpcy5iYXJEb20sIHRoaXMub3B0aW9ucy5hbmltYXRpb24ub3Blbik7XG4gICAgICAgIHRoaXMucHJvbWlzZXMuc2hvdyA9IG5ldyBfZXM2UHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgIFV0aWxzLmFkZExpc3RlbmVyKF90aGlzLmJhckRvbSwgVXRpbHMuYW5pbWF0aW9uRW5kRXZlbnRzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBVdGlscy5yZW1vdmVDbGFzcyhfdGhpcy5iYXJEb20sIF90aGlzLm9wdGlvbnMuYW5pbWF0aW9uLm9wZW4pO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wcm9taXNlcy5zaG93LnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3QgPSBfdGhpcztcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgQVBJLm9wZW5GbG93KF90KTtcbiAgICAgICAgfSwgMTAwKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqIEByZXR1cm4ge05vdHl9XHJcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnc3RvcCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICBBUEkuZGVxdWV1ZUNsb3NlKHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHtOb3R5fVxyXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3Jlc3VtZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc3VtZSgpIHtcbiAgICAgIEFQSS5xdWV1ZUNsb3NlKHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge2ludHxib29sZWFufSBtc1xyXG4gICAgICogQHJldHVybiB7Tm90eX1cclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdzZXRUaW1lb3V0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gKF9zZXRUaW1lb3V0KSB7XG4gICAgICBmdW5jdGlvbiBzZXRUaW1lb3V0KF94KSB7XG4gICAgICAgIHJldHVybiBfc2V0VGltZW91dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICBzZXRUaW1lb3V0LnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3NldFRpbWVvdXQudG9TdHJpbmcoKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBzZXRUaW1lb3V0O1xuICAgIH0oZnVuY3Rpb24gKG1zKSB7XG4gICAgICB0aGlzLnN0b3AoKTtcbiAgICAgIHRoaXMub3B0aW9ucy50aW1lb3V0ID0gbXM7XG5cbiAgICAgIGlmICh0aGlzLmJhckRvbSkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRpbWVvdXQpIHtcbiAgICAgICAgICBVdGlscy5hZGRDbGFzcyh0aGlzLmJhckRvbSwgJ25vdHlfaGFzX3RpbWVvdXQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBVdGlscy5yZW1vdmVDbGFzcyh0aGlzLmJhckRvbSwgJ25vdHlfaGFzX3RpbWVvdXQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfdCA9IHRoaXM7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIHVnbHkgZml4IGZvciBwcm9ncmVzc2JhciBkaXNwbGF5IGJ1Z1xuICAgICAgICAgIF90LnJlc3VtZSgpO1xuICAgICAgICB9LCAxMDApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9KVxuXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaHRtbFxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zT3ZlcnJpZGVcclxuICAgICAqIEByZXR1cm4ge05vdHl9XHJcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnc2V0VGV4dCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFRleHQoaHRtbCkge1xuICAgICAgdmFyIG9wdGlvbnNPdmVycmlkZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cbiAgICAgIGlmICh0aGlzLmJhckRvbSkge1xuICAgICAgICB0aGlzLmJhckRvbS5xdWVyeVNlbGVjdG9yKCcubm90eV9ib2R5JykuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnNPdmVycmlkZSkgdGhpcy5vcHRpb25zLnRleHQgPSBodG1sO1xuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnNPdmVycmlkZVxyXG4gICAgICogQHJldHVybiB7Tm90eX1cclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdzZXRUeXBlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VHlwZSh0eXBlKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIG9wdGlvbnNPdmVycmlkZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cbiAgICAgIGlmICh0aGlzLmJhckRvbSkge1xuICAgICAgICB2YXIgY2xhc3NMaXN0ID0gVXRpbHMuY2xhc3NMaXN0KHRoaXMuYmFyRG9tKS5zcGxpdCgnICcpO1xuXG4gICAgICAgIGNsYXNzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgaWYgKGMuc3Vic3RyaW5nKDAsIDExKSA9PT0gJ25vdHlfdHlwZV9fJykge1xuICAgICAgICAgICAgVXRpbHMucmVtb3ZlQ2xhc3MoX3RoaXMyLmJhckRvbSwgYyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBVdGlscy5hZGRDbGFzcyh0aGlzLmJhckRvbSwgJ25vdHlfdHlwZV9fJyArIHR5cGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9uc092ZXJyaWRlKSB0aGlzLm9wdGlvbnMudHlwZSA9IHR5cGU7XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRoZW1lXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnNPdmVycmlkZVxyXG4gICAgICogQHJldHVybiB7Tm90eX1cclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdzZXRUaGVtZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFRoZW1lKHRoZW1lKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIG9wdGlvbnNPdmVycmlkZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cbiAgICAgIGlmICh0aGlzLmJhckRvbSkge1xuICAgICAgICB2YXIgY2xhc3NMaXN0ID0gVXRpbHMuY2xhc3NMaXN0KHRoaXMuYmFyRG9tKS5zcGxpdCgnICcpO1xuXG4gICAgICAgIGNsYXNzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgaWYgKGMuc3Vic3RyaW5nKDAsIDEyKSA9PT0gJ25vdHlfdGhlbWVfXycpIHtcbiAgICAgICAgICAgIFV0aWxzLnJlbW92ZUNsYXNzKF90aGlzMy5iYXJEb20sIGMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgVXRpbHMuYWRkQ2xhc3ModGhpcy5iYXJEb20sICdub3R5X3RoZW1lX18nICsgdGhlbWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9uc092ZXJyaWRlKSB0aGlzLm9wdGlvbnMudGhlbWUgPSB0aGVtZTtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHtOb3R5fVxyXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2Nsb3NlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuY2xvc2VkKSByZXR1cm4gdGhpcztcblxuICAgICAgaWYgKCF0aGlzLnNob3duKSB7XG4gICAgICAgIC8vIGl0J3MgaW4gdGhlIHF1ZXVlXG4gICAgICAgIEFQSS5yZW1vdmVGcm9tUXVldWUodGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICBBUEkuZmlyZSh0aGlzLCAnb25DbG9zZScpO1xuXG4gICAgICB0aGlzLmNsb3NpbmcgPSB0cnVlO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmFuaW1hdGlvbi5jbG9zZSA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLnByb21pc2VzLmNsb3NlID0gbmV3IF9lczZQcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5hbmltYXRpb24uY2xvc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5wcm9taXNlcy5jbG9zZSA9IG5ldyBfZXM2UHJvbWlzZTIuZGVmYXVsdCh0aGlzLm9wdGlvbnMuYW5pbWF0aW9uLmNsb3NlLmJpbmQodGhpcykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVXRpbHMuYWRkQ2xhc3ModGhpcy5iYXJEb20sIHRoaXMub3B0aW9ucy5hbmltYXRpb24uY2xvc2UpO1xuICAgICAgICB0aGlzLnByb21pc2VzLmNsb3NlID0gbmV3IF9lczZQcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgVXRpbHMuYWRkTGlzdGVuZXIoX3RoaXM0LmJhckRvbSwgVXRpbHMuYW5pbWF0aW9uRW5kRXZlbnRzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXM0Lm9wdGlvbnMuZm9yY2UpIHtcbiAgICAgICAgICAgICAgVXRpbHMucmVtb3ZlKF90aGlzNC5iYXJEb20pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgQVBJLmdob3N0Rml4KF90aGlzNCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnByb21pc2VzLmNsb3NlLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICBBUEkuY2xvc2VGbG93KF90aGlzNCk7XG4gICAgICAgIEFQSS5oYW5kbGVNb2RhbENsb3NlKF90aGlzNCk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBBUEkgZnVuY3Rpb25zXG5cbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxzdHJpbmd9IHF1ZXVlTmFtZVxyXG4gICAgICogQHJldHVybiB7Tm90eX1cclxuICAgICAqL1xuXG4gIH1dLCBbe1xuICAgIGtleTogJ2Nsb3NlQWxsJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2VBbGwoKSB7XG4gICAgICB2YXIgcXVldWVOYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcblxuICAgICAgT2JqZWN0LmtleXMoQVBJLlN0b3JlKS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBpZiAocXVldWVOYW1lKSB7XG4gICAgICAgICAgaWYgKEFQSS5TdG9yZVtpZF0ub3B0aW9ucy5xdWV1ZSA9PT0gcXVldWVOYW1lICYmIEFQSS5TdG9yZVtpZF0ua2lsbGFibGUpIHtcbiAgICAgICAgICAgIEFQSS5TdG9yZVtpZF0uY2xvc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoQVBJLlN0b3JlW2lkXS5raWxsYWJsZSkge1xuICAgICAgICAgIEFQSS5TdG9yZVtpZF0uY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcclxuICAgICAqIEByZXR1cm4ge05vdHl9XHJcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnb3ZlcnJpZGVEZWZhdWx0cycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG92ZXJyaWRlRGVmYXVsdHMob2JqKSB7XG4gICAgICBBUEkuRGVmYXVsdHMgPSBVdGlscy5kZWVwRXh0ZW5kKHt9LCBBUEkuRGVmYXVsdHMsIG9iaik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7aW50fSBhbW91bnRcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBxdWV1ZU5hbWVcclxuICAgICAqIEByZXR1cm4ge05vdHl9XHJcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnc2V0TWF4VmlzaWJsZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldE1heFZpc2libGUoKSB7XG4gICAgICB2YXIgYW1vdW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBBUEkuRGVmYXVsdE1heFZpc2libGU7XG4gICAgICB2YXIgcXVldWVOYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnZ2xvYmFsJztcblxuICAgICAgaWYgKCFBUEkuUXVldWVzLmhhc093blByb3BlcnR5KHF1ZXVlTmFtZSkpIHtcbiAgICAgICAgQVBJLlF1ZXVlc1txdWV1ZU5hbWVdID0geyBtYXhWaXNpYmxlOiBhbW91bnQsIHF1ZXVlOiBbXSB9O1xuICAgICAgfVxuXG4gICAgICBBUEkuUXVldWVzW3F1ZXVlTmFtZV0ubWF4VmlzaWJsZSA9IGFtb3VudDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlubmVySHRtbFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzZXNcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYXR0cmlidXRlc1xyXG4gICAgICogQHJldHVybiB7Tm90eUJ1dHRvbn1cclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdidXR0b24nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBidXR0b24oaW5uZXJIdG1sKSB7XG4gICAgICB2YXIgY2xhc3NlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbnVsbDtcbiAgICAgIHZhciBjYiA9IGFyZ3VtZW50c1syXTtcbiAgICAgIHZhciBhdHRyaWJ1dGVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcblxuICAgICAgcmV0dXJuIG5ldyBfYnV0dG9uLk5vdHlCdXR0b24oaW5uZXJIdG1sLCBjbGFzc2VzLCBjYiwgYXR0cmlidXRlcyk7XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XHJcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAndmVyc2lvbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHZlcnNpb24oKSB7XG4gICAgICByZXR1cm4gXCIzLjEuNFwiO1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHdvcmtlclBhdGhcclxuICAgICAqIEByZXR1cm4ge1B1c2h9XHJcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnUHVzaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIFB1c2god29ya2VyUGF0aCkge1xuICAgICAgcmV0dXJuIG5ldyBfcHVzaC5QdXNoKHdvcmtlclBhdGgpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBOb3R5O1xufSgpO1xuXG4vLyBEb2N1bWVudCB2aXNpYmlsaXR5IGNoYW5nZSBjb250cm9sbGVyXG5cblxuZXhwb3J0cy5kZWZhdWx0ID0gTm90eTtcblV0aWxzLnZpc2liaWxpdHlDaGFuZ2VGbG93KCk7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbnZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLGV2YWwpKFwidGhpc1wiKTtcclxufSBjYXRjaChlKSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcclxuXHRpZih0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKVxyXG5cdFx0ZyA9IHdpbmRvdztcclxufVxyXG5cclxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxyXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGc7XHJcblxuXG4vKioqLyB9KSxcbi8qIDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLyogKGlnbm9yZWQpICovXG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm90eS5qcy5tYXAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/noty/lib/noty.js\n");

/***/ }),

/***/ "./src/resources/js/app.js":
/*!*********************************!*\
  !*** ./src/resources/js/app.js ***!
  \*********************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _key_listeners_element_container_key_listener__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./key-listeners/element-container-key-listener */ \"./src/resources/js/key-listeners/element-container-key-listener.js\");\n/* harmony import */ var _key_listeners_global_key_listener__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./key-listeners/global-key-listener */ \"./src/resources/js/key-listeners/global-key-listener.js\");\n/* harmony import */ var _utils_element_container_helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/element-container-helper */ \"./src/resources/js/utils/element-container-helper.js\");\n/* harmony import */ var _elements_text_markdown_event_listener__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./elements/text/markdown/event-listener */ \"./src/resources/js/elements/text/markdown/event-listener.js\");\n/* harmony import */ var _elements_media_event_listener__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./elements/media/event-listener */ \"./src/resources/js/elements/media/event-listener.js\");\n/* harmony import */ var _utils_event_broker__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/event-broker */ \"./src/resources/js/utils/event-broker.js\");\n\n\n\n\n\n\nwindow.addEventListener(\"load\", function () {\n  // initialize storage\n  window.wysiwyg = window.wysiwyg || {};\n  window.wysiwyg.insertMode = false;\n  window.wysiwyg.storage = window.wysiwyg.storage || {};\n  window.wysiwyg.storage.media = []; // attach element container keyboard listener\n\n  Object(_utils_element_container_helper__WEBPACK_IMPORTED_MODULE_2__[\"iterateAllElementContainers\"])(function (container) {\n    container.onkeydown = _key_listeners_element_container_key_listener__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n  }); // attach markdown element container event listener\n\n  Object(_utils_element_container_helper__WEBPACK_IMPORTED_MODULE_2__[\"iterateAllMarkdownElementContainers\"])(function (container) {\n    Object(_elements_text_markdown_event_listener__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(container);\n  }); // attach media element container event listener\n\n  Object(_utils_element_container_helper__WEBPACK_IMPORTED_MODULE_2__[\"iterateAllMediaElementContainers\"])(function (container) {\n    Object(_elements_media_event_listener__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(container);\n  }); // attach global keyboard listener\n\n  document.onkeydown = _key_listeners_global_key_listener__WEBPACK_IMPORTED_MODULE_1__[\"default\"]; // prevent all drap and drop events globally\n\n  var preventDropEvent = function preventDropEvent(e) {\n    e.dataTransfer.effectAllowed = 'none';\n    e.dataTransfer.dropEffect = 'none';\n    return Object(_utils_event_broker__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(e);\n  };\n\n  document.body = document.body || document.getElementsByTagName(\"BODY\")[0];\n  document.body.addEventListener('dragover', preventDropEvent, false);\n  document.body.addEventListener('drop', preventDropEvent, false); // prototypes\n  // only implement if no native implementation is available\n\n  if (typeof Array.isArray === 'undefined') {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL2FwcC5qcz9mNDdmIl0sIm5hbWVzIjpbIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ3eXNpd3lnIiwiaW5zZXJ0TW9kZSIsInN0b3JhZ2UiLCJtZWRpYSIsIml0ZXJhdGVBbGxFbGVtZW50Q29udGFpbmVycyIsImNvbnRhaW5lciIsIm9ua2V5ZG93biIsImVsZW1lbnRDb250YWluZXJLZXlMaXN0ZW5lciIsIml0ZXJhdGVBbGxNYXJrZG93bkVsZW1lbnRDb250YWluZXJzIiwiYWRkTWFya2Rvd25FdmVudExpc3RlbmVycyIsIml0ZXJhdGVBbGxNZWRpYUVsZW1lbnRDb250YWluZXJzIiwiYWRkTWVkaWFFdmVudExpc3RlbmVycyIsImRvY3VtZW50IiwiZ2xvYmFsS2V5TGlzdGVuZXIiLCJwcmV2ZW50RHJvcEV2ZW50IiwiZSIsImRhdGFUcmFuc2ZlciIsImVmZmVjdEFsbG93ZWQiLCJkcm9wRWZmZWN0Iiwic3RvcEV2ZW50IiwiYm9keSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiQXJyYXkiLCJpc0FycmF5Iiwib2JqIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUVBQSxNQUFNLENBQUNDLGdCQUFQLENBQXdCLE1BQXhCLEVBQWdDLFlBQVc7QUFDdkM7QUFDQUQsUUFBTSxDQUFDRSxPQUFQLEdBQWlCRixNQUFNLENBQUNFLE9BQVAsSUFBa0IsRUFBbkM7QUFDQUYsUUFBTSxDQUFDRSxPQUFQLENBQWVDLFVBQWYsR0FBNEIsS0FBNUI7QUFDQUgsUUFBTSxDQUFDRSxPQUFQLENBQWVFLE9BQWYsR0FBeUJKLE1BQU0sQ0FBQ0UsT0FBUCxDQUFlRSxPQUFmLElBQTBCLEVBQW5EO0FBQ0FKLFFBQU0sQ0FBQ0UsT0FBUCxDQUFlRSxPQUFmLENBQXVCQyxLQUF2QixHQUErQixFQUEvQixDQUx1QyxDQU92Qzs7QUFDQUMscUdBQTJCLENBQUMsVUFBQ0MsU0FBRCxFQUFlO0FBQ3ZDQSxhQUFTLENBQUNDLFNBQVYsR0FBc0JDLHFGQUF0QjtBQUNILEdBRjBCLENBQTNCLENBUnVDLENBWXZDOztBQUNBQyw2R0FBbUMsQ0FBQyxVQUFDSCxTQUFELEVBQWU7QUFDL0NJLDBGQUF5QixDQUFDSixTQUFELENBQXpCO0FBQ0gsR0FGa0MsQ0FBbkMsQ0FidUMsQ0FpQnZDOztBQUNBSywwR0FBZ0MsQ0FBQyxVQUFDTCxTQUFELEVBQWU7QUFDNUNNLGtGQUFzQixDQUFDTixTQUFELENBQXRCO0FBQ0gsR0FGK0IsQ0FBaEMsQ0FsQnVDLENBc0J2Qzs7QUFDQU8sVUFBUSxDQUFDTixTQUFULEdBQXFCTywwRUFBckIsQ0F2QnVDLENBeUJ2Qzs7QUFDQSxNQUFNQyxnQkFBZ0IsR0FBRyxTQUFuQkEsZ0JBQW1CLENBQUNDLENBQUQsRUFBTztBQUM1QkEsS0FBQyxDQUFDQyxZQUFGLENBQWVDLGFBQWYsR0FBK0IsTUFBL0I7QUFDQUYsS0FBQyxDQUFDQyxZQUFGLENBQWVFLFVBQWYsR0FBNEIsTUFBNUI7QUFDQSxXQUFPQyxtRUFBUyxDQUFDSixDQUFELENBQWhCO0FBQ0gsR0FKRDs7QUFLQUgsVUFBUSxDQUFDUSxJQUFULEdBQWdCUixRQUFRLENBQUNRLElBQVQsSUFBaUJSLFFBQVEsQ0FBQ1Msb0JBQVQsQ0FBOEIsTUFBOUIsRUFBc0MsQ0FBdEMsQ0FBakM7QUFDQVQsVUFBUSxDQUFDUSxJQUFULENBQWNyQixnQkFBZCxDQUErQixVQUEvQixFQUEyQ2UsZ0JBQTNDLEVBQTZELEtBQTdEO0FBQ0FGLFVBQVEsQ0FBQ1EsSUFBVCxDQUFjckIsZ0JBQWQsQ0FBK0IsTUFBL0IsRUFBMkNlLGdCQUEzQyxFQUE2RCxLQUE3RCxFQWpDdUMsQ0FtQ3ZDO0FBQ0E7O0FBQ0EsTUFBSSxPQUFPUSxLQUFLLENBQUNDLE9BQWIsS0FBeUIsV0FBN0IsRUFBMEM7QUFDdENELFNBQUssQ0FBQ0MsT0FBTixHQUFnQixVQUFTQyxHQUFULEVBQWM7QUFDMUIsYUFBT0MsTUFBTSxDQUFDQyxTQUFQLENBQWlCQyxRQUFqQixDQUEwQkMsSUFBMUIsQ0FBK0JKLEdBQS9CLE1BQXdDLGdCQUEvQztBQUNILEtBRkQ7QUFHSDtBQUNKLENBMUNEIiwiZmlsZSI6Ii4vc3JjL3Jlc291cmNlcy9qcy9hcHAuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZWxlbWVudENvbnRhaW5lcktleUxpc3RlbmVyIGZyb20gJy4va2V5LWxpc3RlbmVycy9lbGVtZW50LWNvbnRhaW5lci1rZXktbGlzdGVuZXInO1xuaW1wb3J0IGdsb2JhbEtleUxpc3RlbmVyIGZyb20gJy4va2V5LWxpc3RlbmVycy9nbG9iYWwta2V5LWxpc3RlbmVyJztcbmltcG9ydCB7XG4gICAgaXRlcmF0ZUFsbEVsZW1lbnRDb250YWluZXJzLFxuICAgIGl0ZXJhdGVBbGxNYXJrZG93bkVsZW1lbnRDb250YWluZXJzLFxuICAgIGl0ZXJhdGVBbGxNZWRpYUVsZW1lbnRDb250YWluZXJzXG59IGZyb20gJy4vdXRpbHMvZWxlbWVudC1jb250YWluZXItaGVscGVyJztcbmltcG9ydCBhZGRNYXJrZG93bkV2ZW50TGlzdGVuZXJzIGZyb20gJy4vZWxlbWVudHMvdGV4dC9tYXJrZG93bi9ldmVudC1saXN0ZW5lcic7XG5pbXBvcnQgYWRkTWVkaWFFdmVudExpc3RlbmVycyBmcm9tICcuL2VsZW1lbnRzL21lZGlhL2V2ZW50LWxpc3RlbmVyJztcbmltcG9ydCBzdG9wRXZlbnQgZnJvbSAnLi91dGlscy9ldmVudC1icm9rZXInO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgLy8gaW5pdGlhbGl6ZSBzdG9yYWdlXG4gICAgd2luZG93Lnd5c2l3eWcgPSB3aW5kb3cud3lzaXd5ZyB8fCB7fTtcbiAgICB3aW5kb3cud3lzaXd5Zy5pbnNlcnRNb2RlID0gZmFsc2U7XG4gICAgd2luZG93Lnd5c2l3eWcuc3RvcmFnZSA9IHdpbmRvdy53eXNpd3lnLnN0b3JhZ2UgfHwge307XG4gICAgd2luZG93Lnd5c2l3eWcuc3RvcmFnZS5tZWRpYSA9IFtdO1xuXG4gICAgLy8gYXR0YWNoIGVsZW1lbnQgY29udGFpbmVyIGtleWJvYXJkIGxpc3RlbmVyXG4gICAgaXRlcmF0ZUFsbEVsZW1lbnRDb250YWluZXJzKChjb250YWluZXIpID0+IHtcbiAgICAgICAgY29udGFpbmVyLm9ua2V5ZG93biA9IGVsZW1lbnRDb250YWluZXJLZXlMaXN0ZW5lcjtcbiAgICB9KTtcblxuICAgIC8vIGF0dGFjaCBtYXJrZG93biBlbGVtZW50IGNvbnRhaW5lciBldmVudCBsaXN0ZW5lclxuICAgIGl0ZXJhdGVBbGxNYXJrZG93bkVsZW1lbnRDb250YWluZXJzKChjb250YWluZXIpID0+IHtcbiAgICAgICAgYWRkTWFya2Rvd25FdmVudExpc3RlbmVycyhjb250YWluZXIpO1xuICAgIH0pO1xuXG4gICAgLy8gYXR0YWNoIG1lZGlhIGVsZW1lbnQgY29udGFpbmVyIGV2ZW50IGxpc3RlbmVyXG4gICAgaXRlcmF0ZUFsbE1lZGlhRWxlbWVudENvbnRhaW5lcnMoKGNvbnRhaW5lcikgPT4ge1xuICAgICAgICBhZGRNZWRpYUV2ZW50TGlzdGVuZXJzKGNvbnRhaW5lcik7IFxuICAgIH0pO1xuXG4gICAgLy8gYXR0YWNoIGdsb2JhbCBrZXlib2FyZCBsaXN0ZW5lclxuICAgIGRvY3VtZW50Lm9ua2V5ZG93biA9IGdsb2JhbEtleUxpc3RlbmVyO1xuXG4gICAgLy8gcHJldmVudCBhbGwgZHJhcCBhbmQgZHJvcCBldmVudHMgZ2xvYmFsbHlcbiAgICBjb25zdCBwcmV2ZW50RHJvcEV2ZW50ID0gKGUpID0+IHtcbiAgICAgICAgZS5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICdub25lJztcbiAgICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdub25lJztcbiAgICAgICAgcmV0dXJuIHN0b3BFdmVudChlKTtcbiAgICB9O1xuICAgIGRvY3VtZW50LmJvZHkgPSBkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiQk9EWVwiKVswXTtcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgcHJldmVudERyb3BFdmVudCwgZmFsc2UpO1xuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsICAgICBwcmV2ZW50RHJvcEV2ZW50LCBmYWxzZSk7XG5cbiAgICAvLyBwcm90b3R5cGVzXG4gICAgLy8gb25seSBpbXBsZW1lbnQgaWYgbm8gbmF0aXZlIGltcGxlbWVudGF0aW9uIGlzIGF2YWlsYWJsZVxuICAgIGlmICh0eXBlb2YgQXJyYXkuaXNBcnJheSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgQXJyYXkuaXNBcnJheSA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgICAgICB9O1xuICAgIH1cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/resources/js/app.js\n");

/***/ }),

/***/ "./src/resources/js/elements/media/event-listener.js":
/*!***********************************************************!*\
  !*** ./src/resources/js/elements/media/event-listener.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return addEventListeners; });\n/* harmony import */ var _utils_event_broker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/event-broker */ \"./src/resources/js/utils/event-broker.js\");\n/* harmony import */ var _strategy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../strategy */ \"./src/resources/js/elements/strategy.js\");\n/* harmony import */ var _utils_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/config */ \"./src/resources/js/utils/config.js\");\n/* harmony import */ var _utils_notification__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/notification */ \"./src/resources/js/utils/notification.js\");\n\n\n\n\nfunction addEventListeners(container) {\n  // drop feature\n  if (window.FileReader) {\n    container.addEventListener('dragenter', onDragenter, false);\n    container.addEventListener('dragleave', onDragLeave, false);\n    container.addEventListener('dragover', onDragover, false);\n    container.addEventListener('drop', onDrop, false);\n  } else {\n    var msg = 'Your browser does not support the HTML5 FileReader. Drag&Drop features are not supported.';\n    console.log(msg);\n    Object(_utils_notification__WEBPACK_IMPORTED_MODULE_3__[\"default\"])('warning', msg);\n  }\n} //------------------------------------------------------\\\\\n//------------------  P R I V A T E  -------------------\\\\\n//------------------------------------------------------\\\\\n\nfunction enabled(e) {\n  if (window.wysiwyg.insertMode) {\n    e.dataTransfer.effectAllowed = 'copy';\n    e.dataTransfer.dropEffect = 'copy';\n    return true;\n  }\n\n  e.dataTransfer.effectAllowed = 'none';\n  e.dataTransfer.dropEffect = 'none';\n  return false;\n}\n\nfunction onDragenter(e) {\n  if (!enabled(e)) return true; // Tells the browser that we *can* drop on this target\n\n  return Object(_utils_event_broker__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(e);\n}\n\nfunction onDragLeave(e) {\n  if (!enabled(e)) return true;\n  e.dataTransfer.effectAllowed = 'none';\n  e.dataTransfer.dropEffect = 'none';\n}\n\nfunction onDragover(e) {\n  if (!enabled(e)) return true; // Tells the browser that we *can* drop on this target\n\n  return Object(_utils_event_broker__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(e);\n}\n\nfunction onDrop(e) {\n  if (!enabled(e)) return true;\n  var container = this;\n  e = e || window.event; // get window.event if e argument missing (in IE)   \n\n  try {\n    var file = e.dataTransfer.files[e.dataTransfer.files.length - 1];\n\n    if (fileRequirementsFulfilled(file, container.dataset.mimeType)) {\n      window.wysiwyg.storage.media[container.dataset.id] = file;\n      var reader = new FileReader();\n      reader.addEventListener(\"load\", function (e) {\n        Object(_strategy__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(container.dataset.mimeType).refreshValue(container, reader.result);\n      }, false);\n      reader.readAsDataURL(file);\n    }\n  } finally {\n    return Object(_utils_event_broker__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(e); // stops the browser from redirecting off to the image etc.\n  }\n}\n\nfunction fileRequirementsFulfilled(file, mimeType) {\n  var size = file.size;\n  var unit = 0;\n\n  while (size >= 1024) {\n    size /= 1024;\n    unit++;\n  }\n\n  size = Math.round(size * 100) / 100; // round to 2 digits\n\n  var sizeConfig = null;\n\n  switch (mimeType) {\n    case 'media/image':\n      sizeConfig = _utils_config__WEBPACK_IMPORTED_MODULE_2__[\"config\"].imageMaxSize;\n      break;\n\n    case 'media/video':\n      sizeConfig = _utils_config__WEBPACK_IMPORTED_MODULE_2__[\"config\"].videoMaxSize;\n      break;\n\n    default:\n      console.error(\"Unhandeled mime type: '\".concat(mimeType, \"'\"));\n      return false;\n  }\n\n  if (unit > sizeConfig.unit || unit == sizeConfig.unit && size > sizeConfig.size) {\n    var extensions = ['Bytes', 'KB', 'MB', 'GB'];\n    Object(_utils_notification__WEBPACK_IMPORTED_MODULE_3__[\"default\"])('error', \"The media file is to big.<br/>File is \".concat(size, \" \").concat(extensions[unit], \" large but max size is \").concat(sizeConfig.size, \" \").concat(extensions[sizeConfig.unit]));\n    return false;\n  }\n\n  return true;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL2VsZW1lbnRzL21lZGlhL2V2ZW50LWxpc3RlbmVyLmpzPzQ5Y2IiXSwibmFtZXMiOlsiYWRkRXZlbnRMaXN0ZW5lcnMiLCJjb250YWluZXIiLCJ3aW5kb3ciLCJGaWxlUmVhZGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uRHJhZ2VudGVyIiwib25EcmFnTGVhdmUiLCJvbkRyYWdvdmVyIiwib25Ecm9wIiwibXNnIiwiY29uc29sZSIsImxvZyIsIm5vdGlmeSIsImVuYWJsZWQiLCJlIiwid3lzaXd5ZyIsImluc2VydE1vZGUiLCJkYXRhVHJhbnNmZXIiLCJlZmZlY3RBbGxvd2VkIiwiZHJvcEVmZmVjdCIsInN0b3BFdmVudCIsImV2ZW50IiwiZmlsZSIsImZpbGVzIiwibGVuZ3RoIiwiZmlsZVJlcXVpcmVtZW50c0Z1bGZpbGxlZCIsImRhdGFzZXQiLCJtaW1lVHlwZSIsInN0b3JhZ2UiLCJtZWRpYSIsImlkIiwicmVhZGVyIiwiZ2V0U3RyYXRlZ3kiLCJyZWZyZXNoVmFsdWUiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwic2l6ZSIsInVuaXQiLCJNYXRoIiwicm91bmQiLCJzaXplQ29uZmlnIiwiY29uZmlnIiwiaW1hZ2VNYXhTaXplIiwidmlkZW9NYXhTaXplIiwiZXJyb3IiLCJleHRlbnNpb25zIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdlLFNBQVNBLGlCQUFULENBQTJCQyxTQUEzQixFQUFzQztBQUNqRDtBQUNBLE1BQUdDLE1BQU0sQ0FBQ0MsVUFBVixFQUFzQjtBQUNsQkYsYUFBUyxDQUFDRyxnQkFBVixDQUEyQixXQUEzQixFQUF3Q0MsV0FBeEMsRUFBcUQsS0FBckQ7QUFDQUosYUFBUyxDQUFDRyxnQkFBVixDQUEyQixXQUEzQixFQUF3Q0UsV0FBeEMsRUFBcUQsS0FBckQ7QUFDQUwsYUFBUyxDQUFDRyxnQkFB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Y2VzL2pzL2VsZW1lbnRzL21lZGlhL2V2ZW50LWxpc3RlbmVyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHN0b3BFdmVudCBmcm9tICcuLi8uLi91dGlscy9ldmVudC1icm9rZXInO1xuaW1wb3J0IGdldFN0cmF0ZWd5IGZyb20gJy4uL3N0cmF0ZWd5JztcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4uLy4uL3V0aWxzL2NvbmZpZyc7XG5pbXBvcnQgbm90aWZ5IGZyb20gJy4uLy4uL3V0aWxzL25vdGlmaWNhdGlvbic7XG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnMoY29udGFpbmVyKSB7XG4gICAgLy8gZHJvcCBmZWF0dXJlXG4gICAgaWYod2luZG93LkZpbGVSZWFkZXIpIHtcbiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIG9uRHJhZ2VudGVyLCBmYWxzZSk7XG4gICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBvbkRyYWdMZWF2ZSwgZmFsc2UpO1xuICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCAgb25EcmFnb3ZlciwgIGZhbHNlKTtcbiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCAgICAgIG9uRHJvcCwgICAgICBmYWxzZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBtc2cgPSAnWW91ciBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgdGhlIEhUTUw1IEZpbGVSZWFkZXIuIERyYWcmRHJvcCBmZWF0dXJlcyBhcmUgbm90IHN1cHBvcnRlZC4nO1xuICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xuICAgICAgICBub3RpZnkoJ3dhcm5pbmcnLCBtc2cpO1xuICAgIH1cbn1cblxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcXFxcbi8vLS0tLS0tLS0tLS0tLS0tLS0tICBQIFIgSSBWIEEgVCBFICAtLS0tLS0tLS0tLS0tLS0tLS0tXFxcXFxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXFxcXG5cbmZ1bmN0aW9uIGVuYWJsZWQoZSkge1xuICAgIGlmICh3aW5kb3cud3lzaXd5Zy5pbnNlcnRNb2RlKSB7XG4gICAgICAgIGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnY29weSc7XG4gICAgICAgIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnY29weSc7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnbm9uZSc7XG4gICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdub25lJztcbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIG9uRHJhZ2VudGVyKGUpIHtcbiAgICBpZiAoIWVuYWJsZWQoZSkpIHJldHVybiB0cnVlO1xuXG4gICAgLy8gVGVsbHMgdGhlIGJyb3dzZXIgdGhhdCB3ZSAqY2FuKiBkcm9wIG9uIHRoaXMgdGFyZ2V0XG4gICAgcmV0dXJuIHN0b3BFdmVudChlKTtcbn1cblxuZnVuY3Rpb24gb25EcmFnTGVhdmUoZSkge1xuICAgIGlmICghZW5hYmxlZChlKSkgcmV0dXJuIHRydWU7XG5cbiAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ25vbmUnO1xuICAgIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbm9uZSc7XG59XG5cbmZ1bmN0aW9uIG9uRHJhZ292ZXIoZSkge1xuICAgIGlmICghZW5hYmxlZChlKSkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBUZWxscyB0aGUgYnJvd3NlciB0aGF0IHdlICpjYW4qIGRyb3Agb24gdGhpcyB0YXJnZXRcbiAgICByZXR1cm4gc3RvcEV2ZW50KGUpO1xufVxuXG5mdW5jdGlvbiBvbkRyb3AoZSkge1xuICAgIGlmICghZW5hYmxlZChlKSkgcmV0dXJuIHRydWU7XG5cbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzO1xuICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDsgLy8gZ2V0IHdpbmRvdy5ldmVudCBpZiBlIGFyZ3VtZW50IG1pc3NpbmcgKGluIElFKSAgIFxuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZmlsZSA9IGUuZGF0YVRyYW5zZmVyLmZpbGVzW2UuZGF0YVRyYW5zZmVyLmZpbGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoZmlsZVJlcXVpcmVtZW50c0Z1bGZpbGxlZChmaWxlLCBjb250YWluZXIuZGF0YXNldC5taW1lVHlwZSkpIHtcbiAgICAgICAgICAgIHdpbmRvdy53eXNpd3lnLnN0b3JhZ2UubWVkaWFbY29udGFpbmVyLmRhdGFzZXQuaWRdID0gZmlsZTtcblxuICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBnZXRTdHJhdGVneShjb250YWluZXIuZGF0YXNldC5taW1lVHlwZSkucmVmcmVzaFZhbHVlKGNvbnRhaW5lciwgcmVhZGVyLnJlc3VsdCk7XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICAgICAgfVxuICAgIH0gZmluYWxseXtcbiAgICAgICAgcmV0dXJuIHN0b3BFdmVudChlKTsgLy8gc3RvcHMgdGhlIGJyb3dzZXIgZnJvbSByZWRpcmVjdGluZyBvZmYgdG8gdGhlIGltYWdlIGV0Yy5cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZpbGVSZXF1aXJlbWVudHNGdWxmaWxsZWQoZmlsZSwgbWltZVR5cGUpIHtcbiAgICBsZXQgc2l6ZSA9IGZpbGUuc2l6ZTtcbiAgICBsZXQgdW5pdCA9IDA7XG4gICAgd2hpbGUgKHNpemUgPj0gMTAyNCkge1xuICAgICAgICBzaXplIC89IDEwMjQ7XG4gICAgICAgIHVuaXQrKztcbiAgICB9XG4gICAgc2l6ZSA9IE1hdGgucm91bmQoc2l6ZSAqIDEwMCkgLyAxMDA7ICAvLyByb3VuZCB0byAyIGRpZ2l0c1xuXG4gICAgbGV0IHNpemVDb25maWcgPSBudWxsO1xuICAgIHN3aXRjaCAobWltZVR5cGUpIHtcbiAgICAgICAgY2FzZSAnbWVkaWEvaW1hZ2UnOlxuICAgICAgICAgICAgc2l6ZUNvbmZpZyA9IGNvbmZpZy5pbWFnZU1heFNpemU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbWVkaWEvdmlkZW8nOlxuICAgICAgICAgICAgc2l6ZUNvbmZpZyA9IGNvbmZpZy52aWRlb01heFNpemU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFVuaGFuZGVsZWQgbWltZSB0eXBlOiAnJHttaW1lVHlwZX0nYCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHVuaXQgPiBzaXplQ29uZmlnLnVuaXQgfHwgKHVuaXQgPT0gc2l6ZUNvbmZpZy51bml0ICYmIHNpemUgPiBzaXplQ29uZmlnLnNpemUpKSB7XG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSBbICdCeXRlcycsICdLQicsICdNQicsICdHQicgXTtcbiAgICAgICAgbm90aWZ5KFxuICAgICAgICAgICAgJ2Vycm9yJyxcbiAgICAgICAgICAgIGBUaGUgbWVkaWEgZmlsZSBpcyB0byBiaWcuPGJyLz5GaWxlIGlzICR7c2l6ZX0gJHtleHRlbnNpb25zW3VuaXRdfSBsYXJnZSBidXQgbWF4IHNpemUgaXMgJHtzaXplQ29uZmlnLnNpemV9ICR7ZXh0ZW5zaW9uc1tzaXplQ29uZmlnLnVuaXRdfWBcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/resources/js/elements/media/event-listener.js\n");

/***/ }),

/***/ "./src/resources/js/elements/media/helpers.js":
/*!****************************************************!*\
  !*** ./src/resources/js/elements/media/helpers.js ***!
  \****************************************************/
/*! exports provided: save */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"save\", function() { return save; });\n/**\n * Save media on server.\n * \n * @param {array<element>|element} data  element container or array of element containers to save\n * \n * @return {Promise}\n */\nfunction save(data) {\n  var preparedData = prepareTransferData(data);\n\n  if (preparedData) {\n    return m_save(prepareTransferData(data), Array.isArray(data) ? null : data.dataset.id);\n  } // no changes\n\n\n  return Promise.resolve();\n} //------------------------------------------------------\\\\\n//------------------  P R I V A T E  -------------------\\\\\n//------------------------------------------------------\\\\\n\nfunction prepareTransferData(data) {\n  if (Array.isArray(data)) {\n    // save multiple\n    var formData = new FormData();\n    var elementCounter = 0;\n\n    for (var i = 0; i < data.length; i++) {\n      var _id = data[i].dataset.id;\n      var _file = window.wysiwyg.storage.media[_id];\n\n      if (_file) {\n        formData.append('ids[]', _id);\n        formData.append('files[]', _file);\n        elementCounter++;\n      }\n    }\n\n    if (elementCounter > 0) {\n      return formData;\n    }\n\n    return null;\n  } // save single\n\n\n  var id = data.dataset.id;\n  var file = window.wysiwyg.storage.media[id];\n\n  if (file) {\n    var _formData = new FormData();\n\n    _formData.append('id', id);\n\n    _formData.append('file', file);\n\n    return _formData;\n  }\n\n  return null;\n}\n\nfunction m_save(data, id) {\n  return new Promise(function (resolve, reject) {\n    var baseUrl = '/api/WYSIWYG/media';\n    var url = id ? \"\".concat(baseUrl, \"/\").concat(id) : baseUrl;\n    var xmlHttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\");\n    xmlHttp.open('POST', url, true);\n    xmlHttp.setRequestHeader('X-CSRF-TOKEN', document.querySelector('meta[name=\"csrf-token\"]').content);\n\n    xmlHttp.onreadystatechange = function () {\n      if (this.readyState == 4) {\n        if (this.status == 200) {\n          resolve(this);\n        } else {\n          reject(this);\n        }\n      }\n    };\n\n    xmlHttp.send(data);\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL2VsZW1lbnRzL21lZGlhL2hlbHBlcnMuanM/M2Q2YiJdLCJuYW1lcyI6WyJzYXZlIiwiZGF0YSIsInByZXBhcmVkRGF0YSIsInByZXBhcmVUcmFuc2ZlckRhdGEiLCJtX3NhdmUiLCJBcnJheSIsImlzQXJyYXkiLCJkYXRhc2V0IiwiaWQiLCJQcm9taXNlIiwicmVzb2x2ZSIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJlbGVtZW50Q291bnRlciIsImkiLCJsZW5ndGgiLCJmaWxlIiwid2luZG93Iiwid3lzaXd5ZyIsInN0b3JhZ2UiLCJtZWRpYSIsImFwcGVuZCIsInJlamVjdCIsImJhc2VVcmwiLCJ1cmwiLCJ4bWxIdHRwIiwiWE1MSHR0cFJlcXVlc3QiLCJBY3RpdmVYT2JqZWN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInNlbmQiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTs7Ozs7OztBQU9PLFNBQVNBLElBQVQsQ0FBY0MsSUFBZCxFQUFvQjtBQUN2QixNQUFNQyxZQUFZLEdBQUdDLG1CQUFtQixDQUFDRixJQUFELENBQXhDOztBQUNBLE1BQUlDLFlBQUosRUFBa0I7QUFDZCxXQUFPRSxNQUFNLENBQ1RELG1CQUFtQixDQUFDRixJQUFELENBRFYsRUFFVEksS0FBSyxDQUFDQyxPQUFOLENBQWNMLElBQWQsSUFBc0IsSUFBdEIsR0FBNkJBLElBQUksQ0FBQ00sT0FBTCxDQUFhQyxFQUZqQyxDQUFiO0FBSUgsR0FQc0IsQ0FTdkI7OztBQUNBLFNBQU9DLE9BQU8sQ0FBQ0MsT0FBUixFQUFQO0FBQ0gsQyxDQUdEO0FBQ0E7QUFDQTs7QUFFQSxTQUFTUCxtQkFBVCxDQUE2QkYsSUFBN0IsRUFBbUM7QUFDL0IsTUFBSUksS0FBSyxDQUFDQyxPQUFOLENBQWNMLElBQWQsQ0FBSixFQUF5QjtBQUNyQjtBQUNBLFFBQUlVLFFBQVEsR0FBRyxJQUFJQyxRQUFKLEVBQWY7QUFDQSxRQUFJQyxjQUFjLEdBQUcsQ0FBckI7O0FBQ0EsU0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHYixJQUFJLENBQUNjLE1BQXpCLEVBQWlDRCxDQUFDLEVBQWxDLEVBQXNDO0FBQ2xDLFVBQU1OLEdBQUUsR0FBR1AsSUFBSSxDQUFDYSxDQUFELENBQUosQ0FBUVAsT0FBUixDQUFnQkMsRUFBM0I7QUFDQSxVQUFNUSxLQUFJLEdBQUdDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFlQyxPQUFmLENBQXVCQyxLQUF2QixDQUE2QlosR0FBN0IsQ0FBYjs7QUFDQSxVQUFJUSxLQUFKLEVBQVU7QUFDTkwsZ0JBQVEsQ0FBQ1UsTUFBVCxDQUFnQixPQUFoQixFQUF5QmIsR0FBekI7QUFDQUcsZ0JBQVEsQ0FBQ1UsTUFBVCxDQUFnQixTQUFoQixFQUEyQkwsS0FBM0I7QUFDQUgsc0JBQWM7QUFDakI7QUFDSjs7QUFDRCxRQUFJQSxjQUFjLEdBQUcsQ0FBckIsRUFBd0I7QUFDcEIsYUFBT0YsUUFBUDtBQUNIOztBQUNELFdBQU8sSUFBUDtBQUNILEdBbEI4QixDQW9CL0I7OztBQUNBLE1BQU1ILEVBQUUsR0FBR1AsSUFBSSxDQUFDTSxPQUFMLENBQWFDLEVBQXhCO0FBQ0EsTUFBTVEsSUFBSSxHQUFHQyxNQUFNLENBQUNDLE9BQVAsQ0FBZUMsT0FBZixDQUF1QkMsS0FBdkIsQ0FBNkJaLEVBQTdCLENBQWI7O0FBQ0EsTUFBSVEsSUFBSixFQUFVO0FBQ04sUUFBSUwsU0FBUSxHQUFHLElBQUlDLFFBQUosRUFBZjs7QUFDQUQsYUFBUSxDQUFDVSxNQUFULENBQWdCLElBQWhCLEVBQXNCYixFQUF0Qjs7QUFDQUcsYUFBUSxDQUFDVSxNQUFULENBQWdCLE1BQWhCLEVBQXdCTCxJQUF4Qjs7QUFDQSxXQUFPTCxTQUFQO0FBQ0g7O0FBQ0QsU0FBTyxJQUFQO0FBQ0g7O0FBRUQsU0FBU1AsTUFBVCxDQUFnQkgsSUFBaEIsRUFBc0JPLEVBQXRCLEVBQTBCO0FBQ3RCLFNBQU8sSUFBSUMsT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVVksTUFBVixFQUFxQjtBQUNwQyxRQUFNQyxPQUFPLEdBQUcsb0JBQWhCO0FBQ0EsUUFBTUMsR0FBRyxHQUFHaEIsRUFBRSxhQUFNZSxPQUFOLGNBQWlCZixFQUFqQixJQUF3QmUsT0FBdEM7QUFFQSxRQUFNRSxPQUFPLEdBQUlSLE1BQU0sQ0FBQ1MsY0FBUixHQUEwQixJQUFJQSxjQUFKLEVBQTFCLEdBQWlELElBQUlDLGFBQUosQ0FBa0IsbUJBQWxCLENBQWpFO0FBQ0FGLFdBQU8sQ0FBQ0csSUFBUixDQUFhLE1BQWIsRUFBcUJKLEdBQXJCLEVBQTBCLElBQTFCO0FBQ0FDLFdBQU8sQ0FBQ0ksZ0JBQVIsQ0FBeUIsY0FBekIsRUFBeUNDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1Qix5QkFBdkIsRUFBa0RDLE9BQTNGOztBQUNBUCxXQUFPLENBQUNRLGtCQUFSLEdBQTZCLFlBQVc7QUFDcEMsVUFBSSxLQUFLQyxVQUFMLElBQW1CLENBQXZCLEVBQTBCO0FBQ3RCLFlBQUksS0FBS0MsTUFBTCxJQUFlLEdBQW5CLEVBQXdCO0FBQ3BCekIsaUJBQU8sQ0FBQyxJQUFELENBQVA7QUFDSCxTQUZELE1BR0s7QUFDRFksZ0JBQU0sQ0FBQyxJQUFELENBQU47QUFDSDtBQUNKO0FBQ0osS0FURDs7QUFVQUcsV0FBTyxDQUFDVyxJQUFSLENBQWFuQyxJQUFiO0FBQ0gsR0FsQk0sQ0FBUDtBQW1CSCIsImZpbGUiOiIuL3NyYy9yZXNvdXJjZXMvanMvZWxlbWVudHMvbWVkaWEvaGVscGVycy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2F2ZSBtZWRpYSBvbiBzZXJ2ZXIuXG4gKiBcbiAqIEBwYXJhbSB7YXJyYXk8ZWxlbWVudD58ZWxlbWVudH0gZGF0YSAgZWxlbWVudCBjb250YWluZXIgb3IgYXJyYXkgb2YgZWxlbWVudCBjb250YWluZXJzIHRvIHNhdmVcbiAqIFxuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhdmUoZGF0YSkge1xuICAgIGNvbnN0IHByZXBhcmVkRGF0YSA9IHByZXBhcmVUcmFuc2ZlckRhdGEoZGF0YSk7XG4gICAgaWYgKHByZXBhcmVkRGF0YSkge1xuICAgICAgICByZXR1cm4gbV9zYXZlKFxuICAgICAgICAgICAgcHJlcGFyZVRyYW5zZmVyRGF0YShkYXRhKSxcbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoZGF0YSkgPyBudWxsIDogZGF0YS5kYXRhc2V0LmlkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gbm8gY2hhbmdlc1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbn1cblxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcXFxcbi8vLS0tLS0tLS0tLS0tLS0tLS0tICBQIFIgSSBWIEEgVCBFICAtLS0tLS0tLS0tLS0tLS0tLS0tXFxcXFxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXFxcXG5cbmZ1bmN0aW9uIHByZXBhcmVUcmFuc2ZlckRhdGEoZGF0YSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgIC8vIHNhdmUgbXVsdGlwbGVcbiAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIGxldCBlbGVtZW50Q291bnRlciA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBkYXRhW2ldLmRhdGFzZXQuaWQ7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gd2luZG93Lnd5c2l3eWcuc3RvcmFnZS5tZWRpYVtpZF07XG4gICAgICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnaWRzW10nLCBpZCk7XG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlc1tdJywgZmlsZSk7XG4gICAgICAgICAgICAgICAgZWxlbWVudENvdW50ZXIrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudENvdW50ZXIgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZm9ybURhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gc2F2ZSBzaW5nbGVcbiAgICBjb25zdCBpZCA9IGRhdGEuZGF0YXNldC5pZDtcbiAgICBjb25zdCBmaWxlID0gd2luZG93Lnd5c2l3eWcuc3RvcmFnZS5tZWRpYVtpZF07XG4gICAgaWYgKGZpbGUpIHtcbiAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnaWQnLCBpZCk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgICByZXR1cm4gZm9ybURhdGE7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBtX3NhdmUoZGF0YSwgaWQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBiYXNlVXJsID0gJy9hcGkvV1lTSVdZRy9tZWRpYSc7XG4gICAgICAgIGNvbnN0IHVybCA9IGlkID8gYCR7YmFzZVVybH0vJHtpZH1gIDogYmFzZVVybDtcblxuICAgICAgICBjb25zdCB4bWxIdHRwID0gKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCkgPyBuZXcgWE1MSHR0cFJlcXVlc3QoKSA6IG5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIik7XG4gICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsIHVybCwgdHJ1ZSk7XG4gICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcignWC1DU1JGLVRPS0VOJywgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPVwiY3NyZi10b2tlblwiXScpLmNvbnRlbnQpO1xuICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgeG1sSHR0cC5zZW5kKGRhdGEpO1xuICAgIH0pO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/resources/js/elements/media/helpers.js\n");

/***/ }),

/***/ "./src/resources/js/elements/media/image/strategy.js":
/*!***********************************************************!*\
  !*** ./src/resources/js/elements/media/image/strategy.js ***!
  \***********************************************************/
/*! exports provided: iterateAllElementContainers, save, saveAll, refresh, refreshValue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"iterateAllElementContainers\", function() { return iterateAllElementContainers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"save\", function() { return save; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"saveAll\", function() { return saveAll; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"refresh\", function() { return refresh; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"refreshValue\", function() { return refreshValue; });\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers */ \"./src/resources/js/elements/media/helpers.js\");\n/* harmony import */ var _utils_element_container_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/element-container-helper */ \"./src/resources/js/utils/element-container-helper.js\");\n\n\n/**\n * Iterate all image-element container of strategy.\n * \n * @param {function} callback function called on each element.\n */\n\nfunction iterateAllElementContainers(callback) {\n  Object(_utils_element_container_helper__WEBPACK_IMPORTED_MODULE_1__[\"iterateAllImageElementContainers\"])(callback);\n}\n/**\n * Save image-element on server.\n * \n * @param {array<element>|element} data  image-element container or array of image-element containers to save\n * \n * @return {Promise}\n */\n\nfunction save(data) {\n  return Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"save\"])(data);\n}\n/**\n * Save all image-elements from document.\n * \n * @return {Promise}\n */\n\nfunction saveAll() {\n  var elements = [];\n  iterateAllElementContainers(function (container) {\n    elements.push(container);\n  });\n  return save(elements);\n}\n/**\n * Refresh image-element (media/image) container.\n * \n * @param {html-element} container  element container\n * @param {element}      data       image-element data (image-element)\n * \n * @return {Promise}\n */\n\nfunction refresh(container, data) {\n  return refreshValue(container, data.value);\n}\n/**\n * Refresh image-element (media/image) container value.\n * \n * @param {html-element} container  element container\n * @param {element}      value      image-element data (image-element) value\n * \n * @return {Promise}\n */\n\nfunction refreshValue(container, value) {\n  return new Promise(function (resolve, reject) {\n    if (container.hasAttribute('src')) {\n      container.src = value;\n    } else {\n      container.style.backgroundImage = \"url('\".concat(value, \"')\");\n    }\n\n    resolve({\n      container: container,\n      value: value\n    });\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL2VsZW1lbnRzL21lZGlhL2ltYWdlL3N0cmF0ZWd5LmpzPzE5ODAiXSwibmFtZXMiOlsiaXRlcmF0ZUFsbEVsZW1lbnRDb250YWluZXJzIiwiY2FsbGJhY2siLCJpdGVyYXRlQWxsSW1hZ2VFbGVtZW50Q29udGFpbmVycyIsInNhdmUiLCJkYXRhIiwic2F2ZU1lZGlhIiwic2F2ZUFsbCIsImVsZW1lbnRzIiwiY29udGFpbmVyIiwicHVzaCIsInJlZnJlc2giLCJyZWZyZXNoVmFsdWUiLCJ2YWx1ZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiaGFzQXR0cmlidXRlIiwic3JjIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7Ozs7OztBQUtPLFNBQVNBLDJCQUFULENBQXFDQyxRQUFyQyxFQUErQztBQUNsREMsMEdBQWdDLENBQUNELFFBQUQsQ0FBaEM7QUFDSDtBQUdEOzs7Ozs7OztBQU9PLFNBQVNFLElBQVQsQ0FBY0MsSUFBZCxFQUFvQjtBQUN2QixTQUFPQyxxREFBUyxDQUFDRCxJQUFELENBQWhCO0FBQ0g7QUFFRDs7Ozs7O0FBS08sU0FBU0UsT0FBVCxHQUFtQjtBQUN0QixNQUFJQyxRQUFRLEdBQUcsRUFBZjtBQUNBUCw2QkFBMkIsQ0FBQyxVQUFDUSxTQUFELEVBQWM7QUFDdENELFlBQVEsQ0FBQ0UsSUFBVCxDQUFjRCxTQUFkO0FBQ0gsR0FGMEIsQ0FBM0I7QUFHQSxTQUFPTCxJQUFJLENBQUNJLFFBQUQsQ0FBWDtBQUNIO0FBR0Q7Ozs7Ozs7OztBQVFPLFNBQVNHLE9BQVQsQ0FBaUJGLFNBQWpCLEVBQTRCSixJQUE1QixFQUFrQztBQUNyQyxTQUFPTyxZQUFZLENBQUNILFNBQUQsRUFBWUosSUFBSSxDQUFDUSxLQUFqQixDQUFuQjtBQUNIO0FBRUQ7Ozs7Ozs7OztBQVFPLFNBQVNELFlBQVQsQ0FBc0JILFNBQXRCLEVBQWlDSSxLQUFqQyxFQUF3QztBQUMzQyxTQUFPLElBQUlDLE9BQUosQ0FBWSxVQUFDQyxPQUFELEVBQVVDLE1BQVYsRUFBcUI7QUFDcEMsUUFBSVAsU0FBUyxDQUFDUSxZQUFWLENBQXVCLEtBQXZCLENBQUosRUFBbUM7QUFDL0JSLGVBQVMsQ0FBQ1MsR0FBVixHQUFnQkwsS0FBaEI7QUFDSCxLQUZELE1BR0s7QUFDREosZUFBUyxDQUFDVSxLQUFWLENBQWdCQyxlQUFoQixrQkFBMENQLEtBQTFDO0FBQ0g7O0FBQ0RFLFdBQU8sQ0FBQztBQUFFTixlQUFTLEVBQUVBLFNBQWI7QUFBd0JJLFdBQUssRUFBRUE7QUFBL0IsS0FBRCxDQUFQO0FBQ0gsR0FSTSxDQUFQO0FBU0giLCJmaWxlIjoiLi9zcmMvcmVzb3VyY2VzL2pzL2VsZW1lbnRzL21lZGlhL2ltYWdlL3N0cmF0ZWd5LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2F2ZSBhcyBzYXZlTWVkaWEgfSBmcm9tICcuLi9oZWxwZXJzJztcbmltcG9ydCB7IGl0ZXJhdGVBbGxJbWFnZUVsZW1lbnRDb250YWluZXJzIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvZWxlbWVudC1jb250YWluZXItaGVscGVyJztcblxuXG4vKipcbiAqIEl0ZXJhdGUgYWxsIGltYWdlLWVsZW1lbnQgY29udGFpbmVyIG9mIHN0cmF0ZWd5LlxuICogXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgb24gZWFjaCBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXRlcmF0ZUFsbEVsZW1lbnRDb250YWluZXJzKGNhbGxiYWNrKSB7XG4gICAgaXRlcmF0ZUFsbEltYWdlRWxlbWVudENvbnRhaW5lcnMoY2FsbGJhY2spO1xufVxuXG5cbi8qKlxuICogU2F2ZSBpbWFnZS1lbGVtZW50IG9uIHNlcnZlci5cbiAqIFxuICogQHBhcmFtIHthcnJheTxlbGVtZW50PnxlbGVtZW50fSBkYXRhICBpbWFnZS1lbGVtZW50IGNvbnRhaW5lciBvciBhcnJheSBvZiBpbWFnZS1lbGVtZW50IGNvbnRhaW5lcnMgdG8gc2F2ZVxuICogXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2F2ZShkYXRhKSB7XG4gICAgcmV0dXJuIHNhdmVNZWRpYShkYXRhKTtcbn1cblxuLyoqXG4gKiBTYXZlIGFsbCBpbWFnZS1lbGVtZW50cyBmcm9tIGRvY3VtZW50LlxuICogXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2F2ZUFsbCgpIHtcbiAgICBsZXQgZWxlbWVudHMgPSBbXTtcbiAgICBpdGVyYXRlQWxsRWxlbWVudENvbnRhaW5lcnMoKGNvbnRhaW5lcik9PiB7XG4gICAgICAgIGVsZW1lbnRzLnB1c2goY29udGFpbmVyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gc2F2ZShlbGVtZW50cyk7XG59XG5cblxuLyoqXG4gKiBSZWZyZXNoIGltYWdlLWVsZW1lbnQgKG1lZGlhL2ltYWdlKSBjb250YWluZXIuXG4gKiBcbiAqIEBwYXJhbSB7aHRtbC1lbGVtZW50fSBjb250YWluZXIgIGVsZW1lbnQgY29udGFpbmVyXG4gKiBAcGFyYW0ge2VsZW1lbnR9ICAgICAgZGF0YSAgICAgICBpbWFnZS1lbGVtZW50IGRhdGEgKGltYWdlLWVsZW1lbnQpXG4gKiBcbiAqIEByZXR1cm4ge1Byb21pc2V9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWZyZXNoKGNvbnRhaW5lciwgZGF0YSkge1xuICAgIHJldHVybiByZWZyZXNoVmFsdWUoY29udGFpbmVyLCBkYXRhLnZhbHVlKTtcbn1cblxuLyoqXG4gKiBSZWZyZXNoIGltYWdlLWVsZW1lbnQgKG1lZGlhL2ltYWdlKSBjb250YWluZXIgdmFsdWUuXG4gKiBcbiAqIEBwYXJhbSB7aHRtbC1lbGVtZW50fSBjb250YWluZXIgIGVsZW1lbnQgY29udGFpbmVyXG4gKiBAcGFyYW0ge2VsZW1lbnR9ICAgICAgdmFsdWUgICAgICBpbWFnZS1lbGVtZW50IGRhdGEgKGltYWdlLWVsZW1lbnQpIHZhbHVlXG4gKiBcbiAqIEByZXR1cm4ge1Byb21pc2V9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWZyZXNoVmFsdWUoY29udGFpbmVyLCB2YWx1ZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGlmIChjb250YWluZXIuaGFzQXR0cmlidXRlKCdzcmMnKSkge1xuICAgICAgICAgICAgY29udGFpbmVyLnNyYyA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJyR7dmFsdWV9JylgO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUoeyBjb250YWluZXI6IGNvbnRhaW5lciwgdmFsdWU6IHZhbHVlIH0pO1xuICAgIH0pOyBcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/resources/js/elements/media/image/strategy.js\n");

/***/ }),

/***/ "./src/resources/js/elements/strategy.js":
/*!***********************************************!*\
  !*** ./src/resources/js/elements/strategy.js ***!
  \***********************************************/
/*! exports provided: default, iterateAllStrategies */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return getStrategy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"iterateAllStrategies\", function() { return iterateAllStrategies; });\n/* harmony import */ var _text_plain_strategy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./text/plain/strategy */ \"./src/resources/js/elements/text/plain/strategy.js\");\n/* harmony import */ var _text_markdown_strategy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./text/markdown/strategy */ \"./src/resources/js/elements/text/markdown/strategy.js\");\n/* harmony import */ var _media_image_strategy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./media/image/strategy */ \"./src/resources/js/elements/media/image/strategy.js\");\n// /**\n//  * Element strategy.\n//  */\n// interface element {\n//\n//     /**\n//      * Iterate all element container of strategy.\n//      * \n//      * @param {function} callback function called on each element.\n//      */\n//     iterateAllElementContainers(callback);\n//\n//     /**\n//      * Save element on server.\n//      * \n//      * @param {array<element>|element} data  element or array of elements to save\n//      * \n//      * @return {Promise}\n//      */\n//     save(data);\n//\n//     /**\n//      * Save all elements from document.\n//      * \n//      * @return {Promise}\n//      */\n//     saveAll();\n//\n//     /**\n//      * Refresh element container.\n//      * \n//      * @param {html-element} container  element container\n//      * @param {element}      data       element data (e.g.: markdown-element)\n//      *\n//      * @return {Promise<RefreshResponse>}\n//      */\n//     refresh(container, data);\n//\n//     /**\n//      * Refresh element container value.\n//      * \n//      * @param {html-element} container  element container\n//      * @param {element}      value      element data (e.g.: markdown-element) value\n//      *\n//      * @return {Promise<RefreshResponse>}\n//      */\n//     refresh(container, value);\n// }\n// /**\n//  * Save promise (resolve and reject) response.\n//  */\n// SaveResponse: XMLHttpRequest\n// /**\n//  * Refresh promise (resolve and reject) response.\n//  */\n// struct RefreshResponse {\n//     container;\n//     value;\n//     error?: {\n//         obj?;\n//         msg?;\n//     }\n// }\n\n\n\nvar strategies = {\n  'text/plain': _text_plain_strategy__WEBPACK_IMPORTED_MODULE_0__,\n  'text/markdown': _text_markdown_strategy__WEBPACK_IMPORTED_MODULE_1__,\n  'media/image': _media_image_strategy__WEBPACK_IMPORTED_MODULE_2__\n};\n/**\n * Get Strategy object of element.\n * \n * @param {string} name  mime type of element equals strategy name\n */\n\nfunction getStrategy(name) {\n  // return require(`${name}/strategy.js`);\n  return strategies[name];\n}\n/**\n * Iterate all strategies.\n * \n * @param {function} callback function called on each strategy\n */\n\nfunction iterateAllStrategies(callback) {\n  for (var name in strategies) {\n    callback(name, strategies[name]);\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL2VsZW1lbnRzL3N0cmF0ZWd5LmpzP2U2NjEiXSwibmFtZXMiOlsic3RyYXRlZ2llcyIsIlRleHRQbGFpblN0cmF0ZWd5IiwiTWFya2Rvd25TdHJhdGVneSIsIkltYWdlU3RyYXRlZ3kiLCJnZXRTdHJhdGVneSIsIm5hbWUiLCJpdGVyYXRlQWxsU3RyYXRlZ2llcyIsImNhbGxiYWNrIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQSxJQUFNQSxVQUFVLEdBQUc7QUFDZixnQkFBa0JDLGlEQURIO0FBRWYsbUJBQWtCQyxvREFGSDtBQUdmLGlCQUFrQkMsa0RBQWFBO0FBSGhCLENBQW5CO0FBT0E7Ozs7OztBQUtlLFNBQVNDLFdBQVQsQ0FBcUJDLElBQXJCLEVBQTJCO0FBQ3RDO0FBQ0EsU0FBT0wsVUFBVSxDQUFDSyxJQUFELENBQWpCO0FBQ0g7QUFFRDs7Ozs7O0FBS08sU0FBU0Msb0JBQVQsQ0FBOEJDLFFBQTlCLEVBQXdDO0FBQzNDLE9BQUssSUFBSUYsSUFBVCxJQUFpQkwsVUFBakIsRUFBNkI7QUFDekJPLFlBQVEsQ0FBQ0YsSUFBRCxFQUFPTCxVQUFVLENBQUNLLElBQUQsQ0FBakIsQ0FBUjtBQUNIO0FBQ0oiLCJmaWxlIjoiLi9zcmMvcmVzb3VyY2VzL2pzL2VsZW1lbnRzL3N0cmF0ZWd5LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gLyoqXG4vLyAgKiBFbGVtZW50IHN0cmF0ZWd5LlxuLy8gICovXG4vLyBpbnRlcmZhY2UgZWxlbWVudCB7XG4vL1xuLy8gICAgIC8qKlxuLy8gICAgICAqIEl0ZXJhdGUgYWxsIGVsZW1lbnQgY29udGFpbmVyIG9mIHN0cmF0ZWd5LlxuLy8gICAgICAqIFxuLy8gICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBvbiBlYWNoIGVsZW1lbnQuXG4vLyAgICAgICovXG4vLyAgICAgaXRlcmF0ZUFsbEVsZW1lbnRDb250YWluZXJzKGNhbGxiYWNrKTtcbi8vXG4vLyAgICAgLyoqXG4vLyAgICAgICogU2F2ZSBlbGVtZW50IG9uIHNlcnZlci5cbi8vICAgICAgKiBcbi8vICAgICAgKiBAcGFyYW0ge2FycmF5PGVsZW1lbnQ+fGVsZW1lbnR9IGRhdGEgIGVsZW1lbnQgb3IgYXJyYXkgb2YgZWxlbWVudHMgdG8gc2F2ZVxuLy8gICAgICAqIFxuLy8gICAgICAqIEByZXR1cm4ge1Byb21pc2V9XG4vLyAgICAgICovXG4vLyAgICAgc2F2ZShkYXRhKTtcbi8vXG4vLyAgICAgLyoqXG4vLyAgICAgICogU2F2ZSBhbGwgZWxlbWVudHMgZnJvbSBkb2N1bWVudC5cbi8vICAgICAgKiBcbi8vICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuLy8gICAgICAqL1xuLy8gICAgIHNhdmVBbGwoKTtcbi8vXG4vLyAgICAgLyoqXG4vLyAgICAgICogUmVmcmVzaCBlbGVtZW50IGNvbnRhaW5lci5cbi8vICAgICAgKiBcbi8vICAgICAgKiBAcGFyYW0ge2h0bWwtZWxlbWVudH0gY29udGFpbmVyICBlbGVtZW50IGNvbnRhaW5lclxuLy8gICAgICAqIEBwYXJhbSB7ZWxlbWVudH0gICAgICBkYXRhICAgICAgIGVsZW1lbnQgZGF0YSAoZS5nLjogbWFya2Rvd24tZWxlbWVudClcbi8vICAgICAgKlxuLy8gICAgICAqIEByZXR1cm4ge1Byb21pc2U8UmVmcmVzaFJlc3BvbnNlPn1cbi8vICAgICAgKi9cbi8vICAgICByZWZyZXNoKGNvbnRhaW5lciwgZGF0YSk7XG4vL1xuLy8gICAgIC8qKlxuLy8gICAgICAqIFJlZnJlc2ggZWxlbWVudCBjb250YWluZXIgdmFsdWUuXG4vLyAgICAgICogXG4vLyAgICAgICogQHBhcmFtIHtodG1sLWVsZW1lbnR9IGNvbnRhaW5lciAgZWxlbWVudCBjb250YWluZXJcbi8vICAgICAgKiBAcGFyYW0ge2VsZW1lbnR9ICAgICAgdmFsdWUgICAgICBlbGVtZW50IGRhdGEgKGUuZy46IG1hcmtkb3duLWVsZW1lbnQpIHZhbHVlXG4vLyAgICAgICpcbi8vICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFJlZnJlc2hSZXNwb25zZT59XG4vLyAgICAgICovXG4vLyAgICAgcmVmcmVzaChjb250YWluZXIsIHZhbHVlKTtcbi8vIH1cblxuLy8gLyoqXG4vLyAgKiBTYXZlIHByb21pc2UgKHJlc29sdmUgYW5kIHJlamVjdCkgcmVzcG9uc2UuXG4vLyAgKi9cbi8vIFNhdmVSZXNwb25zZTogWE1MSHR0cFJlcXVlc3RcblxuLy8gLyoqXG4vLyAgKiBSZWZyZXNoIHByb21pc2UgKHJlc29sdmUgYW5kIHJlamVjdCkgcmVzcG9uc2UuXG4vLyAgKi9cbi8vIHN0cnVjdCBSZWZyZXNoUmVzcG9uc2Uge1xuLy8gICAgIGNvbnRhaW5lcjtcbi8vICAgICB2YWx1ZTtcbi8vICAgICBlcnJvcj86IHtcbi8vICAgICAgICAgb2JqPztcbi8vICAgICAgICAgbXNnPztcbi8vICAgICB9XG4vLyB9XG5cblxuaW1wb3J0ICogYXMgVGV4dFBsYWluU3RyYXRlZ3kgZnJvbSAnLi90ZXh0L3BsYWluL3N0cmF0ZWd5JztcbmltcG9ydCAqIGFzIE1hcmtkb3duU3RyYXRlZ3kgZnJvbSAnLi90ZXh0L21hcmtkb3duL3N0cmF0ZWd5JztcbmltcG9ydCAqIGFzIEltYWdlU3RyYXRlZ3kgZnJvbSAnLi9tZWRpYS9pbWFnZS9zdHJhdGVneSc7XG5cblxuY29uc3Qgc3RyYXRlZ2llcyA9IHtcbiAgICAndGV4dC9wbGFpbic6ICAgICBUZXh0UGxhaW5TdHJhdGVneSxcbiAgICAndGV4dC9tYXJrZG93bic6ICBNYXJrZG93blN0cmF0ZWd5LFxuICAgICdtZWRpYS9pbWFnZSc6ICAgIEltYWdlU3RyYXRlZ3lcbn07XG5cblxuLyoqXG4gKiBHZXQgU3RyYXRlZ3kgb2JqZWN0IG9mIGVsZW1lbnQuXG4gKiBcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lICBtaW1lIHR5cGUgb2YgZWxlbWVudCBlcXVhbHMgc3RyYXRlZ3kgbmFtZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRTdHJhdGVneShuYW1lKSB7XG4gICAgLy8gcmV0dXJuIHJlcXVpcmUoYCR7bmFtZX0vc3RyYXRlZ3kuanNgKTtcbiAgICByZXR1cm4gc3RyYXRlZ2llc1tuYW1lXTtcbn1cblxuLyoqXG4gKiBJdGVyYXRlIGFsbCBzdHJhdGVnaWVzLlxuICogXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgb24gZWFjaCBzdHJhdGVneVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXRlcmF0ZUFsbFN0cmF0ZWdpZXMoY2FsbGJhY2spIHtcbiAgICBmb3IgKGxldCBuYW1lIGluIHN0cmF0ZWdpZXMpIHtcbiAgICAgICAgY2FsbGJhY2sobmFtZSwgc3RyYXRlZ2llc1tuYW1lXSk7XG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/resources/js/elements/strategy.js\n");

/***/ }),

/***/ "./src/resources/js/elements/text/helpers.js":
/*!***************************************************!*\
  !*** ./src/resources/js/elements/text/helpers.js ***!
  \***************************************************/
/*! exports provided: save */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"save\", function() { return save; });\n/**\n * Save text on server.\n * \n * @param {array<element>|element} data  element container or array of element containers to save\n * \n * @return {Promise}\n */\nfunction save(data) {\n  if (Array.isArray(data)) {\n    // save multiple\n    var _preparedTransferData = data.reduce(function (result, container) {\n      var preparedData = null;\n\n      if ((preparedData = prepareTransferData(container)) !== null) {\n        result.push(preparedData);\n      }\n\n      return result;\n    }, []);\n\n    if (_preparedTransferData.length < 1) {\n      // no changes\n      return Promise.resolve();\n    }\n\n    return m_save(_preparedTransferData, null);\n  } // save single\n\n\n  var preparedTransferData = prepareTransferData(data);\n\n  if (preparedTransferData === null) {\n    // no changes\n    return Promise.resolve();\n  }\n\n  return m_save(preparedTransferData, data.dataset.id);\n} //------------------------------------------------------\\\\\n//------------------  P R I V A T E  -------------------\\\\\n//------------------------------------------------------\\\\\n\nfunction prepareTransferData(container) {\n  var value = container.dataset.valueCurrent || container.innerText;\n\n  if (value === container.dataset.valueSaved) {\n    // no changes\n    return null;\n  }\n\n  return {\n    id: container.dataset.id,\n    value: value\n  };\n}\n\nfunction m_save(data, id) {\n  return new Promise(function (resolve, reject) {\n    var baseUrl = '/api/WYSIWYG/text';\n    var url = id ? \"\".concat(baseUrl, \"/\").concat(id) : baseUrl;\n    var mimeType = 'application/json';\n    var xmlHttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\");\n    xmlHttp.open('PUT', url, true);\n    xmlHttp.setRequestHeader('Content-Type', mimeType);\n    xmlHttp.setRequestHeader('X-CSRF-TOKEN', document.querySelector('meta[name=\"csrf-token\"]').content);\n\n    xmlHttp.onreadystatechange = function () {\n      if (this.readyState == 4) {\n        if (this.status == 200) {\n          resolve(this);\n        } else {\n          reject(this);\n        }\n      }\n    };\n\n    xmlHttp.send(JSON.stringify(data));\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL2VsZW1lbnRzL3RleHQvaGVscGVycy5qcz85MjEzIl0sIm5hbWVzIjpbInNhdmUiLCJkYXRhIiwiQXJyYXkiLCJpc0FycmF5IiwicHJlcGFyZWRUcmFuc2ZlckRhdGEiLCJyZWR1Y2UiLCJyZXN1bHQiLCJjb250YWluZXIiLCJwcmVwYXJlZERhdGEiLCJwcmVwYXJlVHJhbnNmZXJEYXRhIiwicHVzaCIsImxlbmd0aCIsIlByb21pc2UiLCJyZXNvbHZlIiwibV9zYXZlIiwiZGF0YXNldCIsImlkIiwidmFsdWUiLCJ2YWx1ZUN1cnJlbnQiLCJpbm5lclRleHQiLCJ2YWx1ZVNhdmVkIiwicmVqZWN0IiwiYmFzZVVybCIsInVybCIsIm1pbWVUeXBlIiwieG1sSHR0cCIsIndpbmRvdyIsIlhNTEh0dHBSZXF1ZXN0IiwiQWN0aXZlWE9iamVjdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBOzs7Ozs7O0FBT08sU0FBU0EsSUFBVCxDQUFjQyxJQUFkLEVBQW9CO0FBQ3ZCLE1BQUlDLEtBQUssQ0FBQ0MsT0FBTixDQUFjRixJQUFkLENBQUosRUFBeUI7QUFDckI7QUFDQSxRQUFNRyxxQkFBb0IsR0FBR0gsSUFBSSxDQUFDSSxNQUFMLENBQVksVUFBU0MsTUFBVCxFQUFpQkMsU0FBakIsRUFBNEI7QUFDakUsVUFBSUMsWUFBWSxHQUFHLElBQW5COztBQUNBLFVBQUksQ0FBQ0EsWUFBWSxHQUFHQyxtQkFBbUIsQ0FBQ0YsU0FBRCxDQUFuQyxNQUFvRCxJQUF4RCxFQUE4RDtBQUMxREQsY0FBTSxDQUFDSSxJQUFQLENBQVlGLFlBQVo7QUFDSDs7QUFDRCxhQUFPRixNQUFQO0FBQ0gsS0FONEIsRUFNMUIsRUFOMEIsQ0FBN0I7O0FBT0EsUUFBSUYscUJBQW9CLENBQUNPLE1BQXJCLEdBQThCLENBQWxDLEVBQXFDO0FBQ2pDO0FBQ0EsYUFBT0MsT0FBTyxDQUFDQyxPQUFSLEVBQVA7QUFDSDs7QUFDRCxXQUFPQyxNQUFNLENBQUNWLHFCQUFELEVBQXVCLElBQXZCLENBQWI7QUFDSCxHQWZzQixDQWlCdkI7OztBQUNBLE1BQU1BLG9CQUFvQixHQUFHSyxtQkFBbUIsQ0FBQ1IsSUFBRCxDQUFoRDs7QUFDQSxNQUFJRyxvQkFBb0IsS0FBSyxJQUE3QixFQUFtQztBQUMvQjtBQUNBLFdBQU9RLE9BQU8sQ0FBQ0MsT0FBUixFQUFQO0FBQ0g7O0FBQ0QsU0FBT0MsTUFBTSxDQUFDVixvQkFBRCxFQUF1QkgsSUFBSSxDQUFDYyxPQUFMLENBQWFDLEVBQXBDLENBQWI7QUFDSCxDLENBR0Q7QUFDQTtBQUNBOztBQUVBLFNBQVNQLG1CQUFULENBQTZCRixTQUE3QixFQUF3QztBQUNwQyxNQUFNVSxLQUFLLEdBQUdWLFNBQVMsQ0FBQ1EsT0FBVixDQUFrQkcsWUFBbEIsSUFBa0NYLFNBQVMsQ0FBQ1ksU0FBMUQ7O0FBQ0EsTUFBSUYsS0FBSyxLQUFLVixTQUFTLENBQUNRLE9BQVYsQ0FBa0JLLFVBQWhDLEVBQTRDO0FBQ3hDO0FBQ0EsV0FBTyxJQUFQO0FBQ0g7O0FBQ0QsU0FBTztBQUFFSixNQUFFLEVBQUVULFNBQVMsQ0FBQ1EsT0FBVixDQUFrQkMsRUFBeEI7QUFBNEJDLFNBQUssRUFBRUE7QUFBbkMsR0FBUDtBQUNIOztBQUVELFNBQVNILE1BQVQsQ0FBZ0JiLElBQWhCLEVBQXNCZSxFQUF0QixFQUEwQjtBQUN0QixTQUFPLElBQUlKLE9BQUosQ0FBWSxVQUFDQyxPQUFELEVBQVVRLE1BQVYsRUFBcUI7QUFDcEMsUUFBTUMsT0FBTyxHQUFHLG1CQUFoQjtBQUNBLFFBQU1DLEdBQUcsR0FBR1AsRUFBRSxhQUFNTSxPQUFOLGNBQWlCTixFQUFqQixJQUF3Qk0sT0FBdEM7QUFDQSxRQUFNRSxRQUFRLEdBQUcsa0JBQWpCO0FBRUEsUUFBTUMsT0FBTyxHQUFJQyxNQUFNLENBQUNDLGNBQVIsR0FBMEIsSUFBSUEsY0FBSixFQUExQixHQUFpRCxJQUFJQyxhQUFKLENBQWtCLG1CQUFsQixDQUFqRTtBQUNBSCxXQUFPLENBQUNJLElBQVIsQ0FBYSxLQUFiLEVBQW9CTixHQUFwQixFQUF5QixJQUF6QjtBQUNBRSxXQUFPLENBQUNLLGdCQUFSLENBQXlCLGNBQXpCLEVBQXlDTixRQUF6QztBQUNBQyxXQUFPLENBQUNLLGdCQUFSLENBQXlCLGNBQXpCLEVBQXlDQyxRQUFRLENBQUNDLGFBQVQsQ0FBdUIseUJBQXZCLEVBQWtEQyxPQUEzRjs7QUFDQVIsV0FBTyxDQUFDUyxrQkFBUixHQUE2QixZQUFXO0FBQ3BDLFVBQUksS0FBS0MsVUFBTCxJQUFtQixDQUF2QixFQUEwQjtBQUN0QixZQUFJLEtBQUtDLE1BQUwsSUFBZSxHQUFuQixFQUF3QjtBQUNwQnZCLGlCQUFPLENBQUMsSUFBRCxDQUFQO0FBQ0gsU0FGRCxNQUdLO0FBQ0RRLGdCQUFNLENBQUMsSUFBRCxDQUFOO0FBQ0g7QUFDSjtBQUNKLEtBVEQ7O0FBVUFJLFdBQU8sQ0FBQ1ksSUFBUixDQUFhQyxJQUFJLENBQUNDLFNBQUwsQ0FBZXRDLElBQWYsQ0FBYjtBQUNILEdBcEJNLENBQVA7QUFxQkgiLCJmaWxlIjoiLi9zcmMvcmVzb3VyY2VzL2pzL2VsZW1lbnRzL3RleHQvaGVscGVycy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2F2ZSB0ZXh0IG9uIHNlcnZlci5cbiAqIFxuICogQHBhcmFtIHthcnJheTxlbGVtZW50PnxlbGVtZW50fSBkYXRhICBlbGVtZW50IGNvbnRhaW5lciBvciBhcnJheSBvZiBlbGVtZW50IGNvbnRhaW5lcnMgdG8gc2F2ZVxuICogXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2F2ZShkYXRhKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgLy8gc2F2ZSBtdWx0aXBsZVxuICAgICAgICBjb25zdCBwcmVwYXJlZFRyYW5zZmVyRGF0YSA9IGRhdGEucmVkdWNlKGZ1bmN0aW9uKHJlc3VsdCwgY29udGFpbmVyKSB7XG4gICAgICAgICAgICBsZXQgcHJlcGFyZWREYXRhID0gbnVsbDtcbiAgICAgICAgICAgIGlmICgocHJlcGFyZWREYXRhID0gcHJlcGFyZVRyYW5zZmVyRGF0YShjb250YWluZXIpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHByZXBhcmVkRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIGlmIChwcmVwYXJlZFRyYW5zZmVyRGF0YS5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAvLyBubyBjaGFuZ2VzXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1fc2F2ZShwcmVwYXJlZFRyYW5zZmVyRGF0YSwgbnVsbCk7XG4gICAgfVxuXG4gICAgLy8gc2F2ZSBzaW5nbGVcbiAgICBjb25zdCBwcmVwYXJlZFRyYW5zZmVyRGF0YSA9IHByZXBhcmVUcmFuc2ZlckRhdGEoZGF0YSk7XG4gICAgaWYgKHByZXBhcmVkVHJhbnNmZXJEYXRhID09PSBudWxsKSB7XG4gICAgICAgIC8vIG5vIGNoYW5nZXNcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gbV9zYXZlKHByZXBhcmVkVHJhbnNmZXJEYXRhLCBkYXRhLmRhdGFzZXQuaWQpO1xufVxuXG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxcXFxuLy8tLS0tLS0tLS0tLS0tLS0tLS0gIFAgUiBJIFYgQSBUIEUgIC0tLS0tLS0tLS0tLS0tLS0tLS1cXFxcXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcXFxcblxuZnVuY3Rpb24gcHJlcGFyZVRyYW5zZmVyRGF0YShjb250YWluZXIpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGNvbnRhaW5lci5kYXRhc2V0LnZhbHVlQ3VycmVudCB8fCBjb250YWluZXIuaW5uZXJUZXh0O1xuICAgIGlmICh2YWx1ZSA9PT0gY29udGFpbmVyLmRhdGFzZXQudmFsdWVTYXZlZCkge1xuICAgICAgICAvLyBubyBjaGFuZ2VzXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4geyBpZDogY29udGFpbmVyLmRhdGFzZXQuaWQsIHZhbHVlOiB2YWx1ZSB9O1xufVxuXG5mdW5jdGlvbiBtX3NhdmUoZGF0YSwgaWQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBiYXNlVXJsID0gJy9hcGkvV1lTSVdZRy90ZXh0JztcbiAgICAgICAgY29uc3QgdXJsID0gaWQgPyBgJHtiYXNlVXJsfS8ke2lkfWAgOiBiYXNlVXJsO1xuICAgICAgICBjb25zdCBtaW1lVHlwZSA9ICdhcHBsaWNhdGlvbi9qc29uJztcblxuICAgICAgICBjb25zdCB4bWxIdHRwID0gKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCkgPyBuZXcgWE1MSHR0cFJlcXVlc3QoKSA6IG5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIik7XG4gICAgICAgIHhtbEh0dHAub3BlbignUFVUJywgdXJsLCB0cnVlKTtcbiAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCBtaW1lVHlwZSk7XG4gICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcignWC1DU1JGLVRPS0VOJywgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPVwiY3NyZi10b2tlblwiXScpLmNvbnRlbnQpO1xuICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgeG1sSHR0cC5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICB9KTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/resources/js/elements/text/helpers.js\n");

/***/ }),

/***/ "./src/resources/js/elements/text/markdown/event-listener.js":
/*!*******************************************************************!*\
  !*** ./src/resources/js/elements/text/markdown/event-listener.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return addEventListeners; });\n/* harmony import */ var _utils_notification__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/notification */ \"./src/resources/js/utils/notification.js\");\n/* harmony import */ var _strategy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../strategy */ \"./src/resources/js/elements/strategy.js\");\n\n\nfunction addEventListeners(container) {\n  container.onfocus = onfocus;\n  container.onblur = onblur;\n} //------------------------------------------------------\\\\\n//------------------  P R I V A T E  -------------------\\\\\n//------------------------------------------------------\\\\\n\nvar blurInProgess = false;\n\nfunction onfocus(e) {\n  var container = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  // e:    FocusEvent\n  // this: element container\n  container = container || this;\n\n  if (blurInProgess) {\n    // Problem: Between blur need some time to parse\n    //   and change the content (innerText/innerHTML).\n    //   If you focus before the blur is finish you\n    //   will change the markdown html not markdown code.\n    setTimeout(function () {\n      onfocus(e, container);\n    }, 100);\n  } else {\n    container.innerText = container.dataset.valueCurrent;\n  }\n}\n\nfunction onblur(e) {\n  // e:    FocusEvent\n  // this: element container\n  var container = this;\n  var value = this.innerText;\n\n  if (container.dataset.preventBlurEvent === 'true') {\n    // At least save changes.\n    container.dataset.valueCurrent = value;\n    container.dataset.preventBlurEvent = 'false';\n    return;\n  }\n\n  blurInProgess = true;\n  document.body.setAttribute('cursor-wait', true);\n  Object(_strategy__WEBPACK_IMPORTED_MODULE_1__[\"default\"])('text/markdown').refreshValue(container, value)[\"catch\"](handleError)[\"finally\"](function () {\n    document.body.removeAttribute('cursor-wait');\n    blurInProgess = false;\n  });\n}\n\nfunction handleError(reason) {\n  console.error(reason);\n\n  if (!reason || !reason.error) {\n    // unknown error (ugly display)\n    Object(_utils_notification__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('error', reason);\n    return Promise.resolve();\n  }\n\n  if (typeof reason.error.obj.status !== 'undefined' && typeof reason.error.obj.status !== 'undefined') {\n    var xmlHttp = reason.error.obj;\n    Object(_utils_notification__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('error', \"Oh no. Request failed. Status: \".concat(xmlHttp.status, \"<br/><br/>Response:<br/>\").concat(xmlHttp.responseText));\n    return Promise.resolve();\n  }\n\n  if (typeof reason.error.msg !== 'undefined') {\n    Object(_utils_notification__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('error', reason.error.msg);\n    return Promise.resolve();\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL2VsZW1lbnRzL3RleHQvbWFya2Rvd24vZXZlbnQtbGlzdGVuZXIuanM/OWJlMSJdLCJuYW1lcyI6WyJhZGRFdmVudExpc3RlbmVycyIsImNvbnRhaW5lciIsIm9uZm9jdXMiLCJvbmJsdXIiLCJibHVySW5Qcm9nZXNzIiwiZSIsInNldFRpbWVvdXQiLCJpbm5lclRleHQiLCJkYXRhc2V0IiwidmFsdWVDdXJyZW50IiwidmFsdWUiLCJwcmV2ZW50Qmx1ckV2ZW50IiwiZG9jdW1lbnQiLCJib2R5Iiwic2V0QXR0cmlidXRlIiwiZ2V0U3RyYXRlZ3kiLCJyZWZyZXNoVmFsdWUiLCJoYW5kbGVFcnJvciIsInJlbW92ZUF0dHJpYnV0ZSIsInJlYXNvbiIsImNvbnNvbGUiLCJlcnJvciIsIm5vdGlmeSIsIlByb21pc2UiLCJyZXNvbHZlIiwib2JqIiwic3RhdHVzIiwieG1sSHR0cCIsInJlc3BvbnNlVGV4dCIsIm1zZyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR2UsU0FBU0EsaUJBQVQsQ0FBMkJDLFNBQTNCLEVBQXNDO0FBQ2pEQSxXQUFTLENBQUNDLE9BQVYsR0FBb0JBLE9BQXBCO0FBQ0FELFdBQVMsQ0FBQ0UsTUFBVixHQUFtQkEsTUFBbkI7QUFDSCxDLENBR0Q7QUFDQTtBQUNBOztBQUVBLElBQUlDLGFBQWEsR0FBRyxLQUFwQjs7QUFFQSxTQUFTRixPQUFULENBQWlCRyxDQUFqQixFQUFzQztBQUFBLE1BQWxCSixTQUFrQix1RUFBTixJQUFNO0FBQ2xDO0FBQ0E7QUFFQUEsV0FBUyxHQUFHQSxTQUFTLElBQUksSUFBekI7O0FBRUEsTUFBSUcsYUFBSixFQUFtQjtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0FFLGNBQVUsQ0FBQyxZQUFNO0FBQUVKLGFBQU8sQ0FBQ0csQ0FBRCxFQUFJSixTQUFKLENBQVA7QUFBd0IsS0FBakMsRUFBbUMsR0FBbkMsQ0FBVjtBQUNILEdBTkQsTUFPSztBQUNEQSxhQUFTLENBQUNNLFNBQVYsR0FBc0JOLFNBQVMsQ0FBQ08sT0FBVixDQUFrQkMsWUFBeEM7QUFDSDtBQUNKOztBQUVELFNBQVNOLE1BQVQsQ0FBZ0JFLENBQWhCLEVBQW1CO0FBQ2Y7QUFDQTtBQUVBLE1BQU1KLFNBQVMsR0FBRyxJQUFsQjtBQUNBLE1BQU1TLEtBQUssR0FBRyxLQUFLSCxTQUFuQjs7QUFFQSxNQUFJTixTQUFTLENBQUNPLE9BQVYsQ0FBa0JHLGdCQUFsQixLQUF1QyxNQUEzQyxFQUFtRDtBQUMvQztBQUNBVixhQUFTLENBQUNPLE9BQVYsQ0FBa0JDLFlBQWxCLEdBQWlDQyxLQUFqQztBQUVBVCxhQUFTLENBQUNPLE9BQVYsQ0FBa0JHLGdCQUFsQixHQUFxQyxPQUFyQztBQUNBO0FBQ0g7O0FBRURQLGVBQWEsR0FBRyxJQUFoQjtBQUVBUSxVQUFRLENBQUNDLElBQVQsQ0FBY0MsWUFBZCxDQUEyQixhQUEzQixFQUEwQyxJQUExQztBQUNBQywyREFBVyxDQUFDLGVBQUQsQ0FBWCxDQUE2QkMsWUFBN0IsQ0FBMENmLFNBQTFDLEVBQXFEUyxLQUFyRCxXQUNPTyxXQURQLGFBRVMsWUFBTTtBQUNYTCxZQUFRLENBQUNDLElBQVQsQ0FBY0ssZUFBZCxDQUE4QixhQUE5QjtBQUNBZCxpQkFBYSxHQUFHLEtBQWhCO0FBQ0gsR0FMRDtBQU1IOztBQUVELFNBQVNhLFdBQVQsQ0FBcUJFLE1BQXJCLEVBQTZCO0FBQ3pCQyxTQUFPLENBQUNDLEtBQVIsQ0FBY0YsTUFBZDs7QUFDQSxNQUFJLENBQUNBLE1BQUQsSUFBVyxDQUFDQSxNQUFNLENBQUNFLEtBQXZCLEVBQThCO0FBQzFCO0FBQ0FDLHVFQUFNLENBQUMsT0FBRCxFQUFVSCxNQUFWLENBQU47QUFDQSxXQUFPSSxPQUFPLENBQUNDLE9BQVIsRUFBUDtBQUNIOztBQUNELE1BQUksT0FBT0wsTUFBTSxDQUFDRSxLQUFQLENBQWFJLEdBQWIsQ0FBaUJDLE1BQXhCLEtBQW1DLFdBQW5DLElBQWtELE9BQU9QLE1BQU0sQ0FBQ0UsS0FBUCxDQUFhSSxHQUFiLENBQWlCQyxNQUF4QixLQUFtQyxXQUF6RixFQUFzRztBQUNsRyxRQUFNQyxPQUFPLEdBQUdSLE1BQU0sQ0FBQ0UsS0FBUCxDQUFhSSxHQUE3QjtBQUNBSCx1RUFBTSxDQUFDLE9BQUQsMkNBQTRDSyxPQUFPLENBQUNELE1BQXBELHFDQUFxRkMsT0FBTyxDQUFDQyxZQUE3RixFQUFOO0FBQ0EsV0FBT0wsT0FBTyxDQUFDQyxPQUFSLEVBQVA7QUFDSDs7QUFDRCxNQUFJLE9BQU9MLE1BQU0sQ0FBQ0UsS0FBUCxDQUFhUSxHQUFwQixLQUE0QixXQUFoQyxFQUE2QztBQUN6Q1AsdUVBQU0sQ0FBQyxPQUFELEVBQVVILE1BQU0sQ0FBQ0UsS0FBUCxDQUFhUSxHQUF2QixDQUFOO0FBQ0EsV0FBT04sT0FBTyxDQUFDQyxPQUFSLEVBQVA7QUFDSDtBQUNKIiwiZmlsZSI6Ii4vc3JjL3Jlc291cmNlcy9qcy9lbGVtZW50cy90ZXh0L21hcmtkb3duL2V2ZW50LWxpc3RlbmVyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG5vdGlmeSBmcm9tICcuLi8uLi8uLi91dGlscy9ub3RpZmljYXRpb24nO1xuaW1wb3J0IGdldFN0cmF0ZWd5IGZyb20gJy4uLy4uL3N0cmF0ZWd5JztcblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycyhjb250YWluZXIpIHtcbiAgICBjb250YWluZXIub25mb2N1cyA9IG9uZm9jdXM7XG4gICAgY29udGFpbmVyLm9uYmx1ciA9IG9uYmx1cjtcbn1cblxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcXFxcbi8vLS0tLS0tLS0tLS0tLS0tLS0tICBQIFIgSSBWIEEgVCBFICAtLS0tLS0tLS0tLS0tLS0tLS0tXFxcXFxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXFxcXG5cbmxldCBibHVySW5Qcm9nZXNzID0gZmFsc2U7XG5cbmZ1bmN0aW9uIG9uZm9jdXMoZSwgY29udGFpbmVyID0gbnVsbCkge1xuICAgIC8vIGU6ICAgIEZvY3VzRXZlbnRcbiAgICAvLyB0aGlzOiBlbGVtZW50IGNvbnRhaW5lclxuXG4gICAgY29udGFpbmVyID0gY29udGFpbmVyIHx8IHRoaXM7XG5cbiAgICBpZiAoYmx1ckluUHJvZ2Vzcykge1xuICAgICAgICAvLyBQcm9ibGVtOiBCZXR3ZWVuIGJsdXIgbmVlZCBzb21lIHRpbWUgdG8gcGFyc2VcbiAgICAgICAgLy8gICBhbmQgY2hhbmdlIHRoZSBjb250ZW50IChpbm5lclRleHQvaW5uZXJIVE1MKS5cbiAgICAgICAgLy8gICBJZiB5b3UgZm9jdXMgYmVmb3JlIHRoZSBibHVyIGlzIGZpbmlzaCB5b3VcbiAgICAgICAgLy8gICB3aWxsIGNoYW5nZSB0aGUgbWFya2Rvd24gaHRtbCBub3QgbWFya2Rvd24gY29kZS5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IG9uZm9jdXMoZSwgY29udGFpbmVyKTsgfSwgMTAwKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnRhaW5lci5pbm5lclRleHQgPSBjb250YWluZXIuZGF0YXNldC52YWx1ZUN1cnJlbnQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBvbmJsdXIoZSkge1xuICAgIC8vIGU6ICAgIEZvY3VzRXZlbnRcbiAgICAvLyB0aGlzOiBlbGVtZW50IGNvbnRhaW5lclxuXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcztcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuaW5uZXJUZXh0O1xuXG4gICAgaWYgKGNvbnRhaW5lci5kYXRhc2V0LnByZXZlbnRCbHVyRXZlbnQgPT09ICd0cnVlJykge1xuICAgICAgICAvLyBBdCBsZWFzdCBzYXZlIGNoYW5nZXMuXG4gICAgICAgIGNvbnRhaW5lci5kYXRhc2V0LnZhbHVlQ3VycmVudCA9IHZhbHVlO1xuXG4gICAgICAgIGNvbnRhaW5lci5kYXRhc2V0LnByZXZlbnRCbHVyRXZlbnQgPSAnZmFsc2UnO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYmx1ckluUHJvZ2VzcyA9IHRydWU7XG5cbiAgICBkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZSgnY3Vyc29yLXdhaXQnLCB0cnVlKTtcbiAgICBnZXRTdHJhdGVneSgndGV4dC9tYXJrZG93bicpLnJlZnJlc2hWYWx1ZShjb250YWluZXIsIHZhbHVlKVxuICAgIC5jYXRjaChoYW5kbGVFcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQXR0cmlidXRlKCdjdXJzb3Itd2FpdCcpO1xuICAgICAgICBibHVySW5Qcm9nZXNzID0gZmFsc2U7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVycm9yKHJlYXNvbikge1xuICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTtcbiAgICBpZiAoIXJlYXNvbiB8fCAhcmVhc29uLmVycm9yKSB7XG4gICAgICAgIC8vIHVua25vd24gZXJyb3IgKHVnbHkgZGlzcGxheSlcbiAgICAgICAgbm90aWZ5KCdlcnJvcicsIHJlYXNvbik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiByZWFzb24uZXJyb3Iub2JqLnN0YXR1cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHJlYXNvbi5lcnJvci5vYmouc3RhdHVzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCB4bWxIdHRwID0gcmVhc29uLmVycm9yLm9iajtcbiAgICAgICAgbm90aWZ5KCdlcnJvcicsIGBPaCBuby4gUmVxdWVzdCBmYWlsZWQuIFN0YXR1czogJHt4bWxIdHRwLnN0YXR1c308YnIvPjxici8+UmVzcG9uc2U6PGJyLz4ke3htbEh0dHAucmVzcG9uc2VUZXh0fWApO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcmVhc29uLmVycm9yLm1zZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbm90aWZ5KCdlcnJvcicsIHJlYXNvbi5lcnJvci5tc2cpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/resources/js/elements/text/markdown/event-listener.js\n");

/***/ }),

/***/ "./src/resources/js/elements/text/markdown/strategy.js":
/*!*************************************************************!*\
  !*** ./src/resources/js/elements/text/markdown/strategy.js ***!
  \*************************************************************/
/*! exports provided: iterateAllElementContainers, save, saveAll, refresh, refreshValue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"iterateAllElementContainers\", function() { return iterateAllElementContainers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"save\", function() { return save; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"saveAll\", function() { return saveAll; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"refresh\", function() { return refresh; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"refreshValue\", function() { return refreshValue; });\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers */ \"./src/resources/js/elements/text/helpers.js\");\n/* harmony import */ var _utils_element_container_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/element-container-helper */ \"./src/resources/js/utils/element-container-helper.js\");\n\n\n/**\n * Iterate all markdown-element container of strategy.\n * \n * @param {function} callback function called on each element.\n */\n\nfunction iterateAllElementContainers(callback) {\n  Object(_utils_element_container_helper__WEBPACK_IMPORTED_MODULE_1__[\"iterateAllMarkdownElementContainers\"])(callback);\n}\n/**\n * Save markdown-element on server.\n * \n * @param {array<element>|element} data  markdown-element or array of markdown-elements to save\n * \n * @return {Promise}\n */\n\nfunction save(data) {\n  return Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"save\"])(data);\n}\n/**\n * Save all markdown-elements from document.\n * \n * @return {Promise}\n */\n\nfunction saveAll() {\n  var elements = [];\n  iterateAllElementContainers(function (container) {\n    elements.push(container);\n  });\n  return save(elements);\n}\n/**\n * Refresh markdown-element (text/markdown) container.\n * \n * @param {html-element} container  element container\n * @param {element}      data       text-element data (markdown-element)\n * \n * @return {Promise}\n */\n\nfunction refresh(container, data) {\n  return refreshValue(container, data.value);\n}\n/**\n * Refresh markdown-element (text/markdown) container value.\n * \n * @param {html-element} container  element container\n * @param {element}      value      text-element data (markdown-element) value\n * \n * @return {Promise}\n */\n\nfunction refreshValue(container, value) {\n  return new Promise(function (resolve, reject) {\n    container.dataset.valueCurrent = value;\n    parse(value, function (xmlHttp) {\n      container.innerHTML = xmlHttp.responseText;\n      resolve({\n        container: container,\n        value: value\n      });\n    }, function (xmlHttp) {\n      reject({\n        container: container,\n        value: value,\n        error: {\n          obj: xmlHttp\n        }\n      });\n    });\n  });\n} //------------------------------------------------------\\\\\n//------------------  P R I V A T E  -------------------\\\\\n//------------------------------------------------------\\\\\n\nfunction parse(markdownRaw, fnSuccess) {\n  var fnError = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var mimeType = 'application/json';\n  var url = '/api/WYSIWYG/markdown-parser';\n  var xmlHttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\");\n  xmlHttp.open('POST', url, true);\n  xmlHttp.setRequestHeader('Content-Type', mimeType);\n  xmlHttp.setRequestHeader('X-CSRF-TOKEN', document.querySelector('meta[name=\"csrf-token\"]').content);\n\n  xmlHttp.onreadystatechange = function () {\n    if (this.readyState == 4) {\n      if (this.status == 200) {\n        fnSuccess(this);\n      } else {\n        if (fnError) {\n          fnError(this);\n        } else {\n          notify('error', \"Oh no. Request failed. Status: \".concat(xmlHttp.status, \"<br/><br/>Response:<br/>\").concat(xmlHttp.responseText));\n        }\n      }\n    }\n  };\n\n  xmlHttp.send(JSON.stringify({\n    data: markdownRaw\n  }));\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL2VsZW1lbnRzL3RleHQvbWFya2Rvd24vc3RyYXRlZ3kuanM/MTA5YyJdLCJuYW1lcyI6WyJpdGVyYXRlQWxsRWxlbWVudENvbnRhaW5lcnMiLCJjYWxsYmFjayIsIml0ZXJhdGVBbGxNYXJrZG93bkVsZW1lbnRDb250YWluZXJzIiwic2F2ZSIsImRhdGEiLCJzYXZlVGV4dCIsInNhdmVBbGwiLCJlbGVtZW50cyIsImNvbnRhaW5lciIsInB1c2giLCJyZWZyZXNoIiwicmVmcmVzaFZhbHVlIiwidmFsdWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImRhdGFzZXQiLCJ2YWx1ZUN1cnJlbnQiLCJwYXJzZSIsInhtbEh0dHAiLCJpbm5lckhUTUwiLCJyZXNwb25zZVRleHQiLCJlcnJvciIsIm9iaiIsIm1hcmtkb3duUmF3IiwiZm5TdWNjZXNzIiwiZm5FcnJvciIsIm1pbWVUeXBlIiwidXJsIiwid2luZG93IiwiWE1MSHR0cFJlcXVlc3QiLCJBY3RpdmVYT2JqZWN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsIm5vdGlmeSIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBOzs7Ozs7QUFLTyxTQUFTQSwyQkFBVCxDQUFxQ0MsUUFBckMsRUFBK0M7QUFDbERDLDZHQUFtQyxDQUFDRCxRQUFELENBQW5DO0FBQ0g7QUFHRDs7Ozs7Ozs7QUFPTyxTQUFTRSxJQUFULENBQWNDLElBQWQsRUFBb0I7QUFDdkIsU0FBT0MscURBQVEsQ0FBQ0QsSUFBRCxDQUFmO0FBQ0g7QUFFRDs7Ozs7O0FBS08sU0FBU0UsT0FBVCxHQUFtQjtBQUN0QixNQUFJQyxRQUFRLEdBQUcsRUFBZjtBQUNBUCw2QkFBMkIsQ0FBQyxVQUFDUSxTQUFELEVBQWM7QUFDdENELFlBQVEsQ0FBQ0UsSUFBVCxDQUFjRCxTQUFkO0FBQ0gsR0FGMEIsQ0FBM0I7QUFHQSxTQUFPTCxJQUFJLENBQUNJLFFBQUQsQ0FBWDtBQUNIO0FBR0Q7Ozs7Ozs7OztBQVFPLFNBQVNHLE9BQVQsQ0FBaUJGLFNBQWpCLEVBQTRCSixJQUE1QixFQUFrQztBQUNyQyxTQUFPTyxZQUFZLENBQUNILFNBQUQsRUFBWUosSUFBSSxDQUFDUSxLQUFqQixDQUFuQjtBQUNIO0FBRUQ7Ozs7Ozs7OztBQVFPLFNBQVNELFlBQVQsQ0FBc0JILFNBQXRCLEVBQWlDSSxLQUFqQyxFQUF3QztBQUMzQyxTQUFPLElBQUlDLE9BQUosQ0FBWSxVQUFDQyxPQUFELEVBQVVDLE1BQVYsRUFBcUI7QUFDcENQLGFBQVMsQ0FBQ1EsT0FBVixDQUFrQkMsWUFBbEIsR0FBaUNMLEtBQWpDO0FBQ0FNLFNBQUssQ0FBQ04sS0FBRCxFQUFRLFVBQUNPLE9BQUQsRUFBYTtBQUN0QlgsZUFBUyxDQUFDWSxTQUFWLEdBQXNCRCxPQUFPLENBQUNFLFlBQTlCO0FBQ0FQLGFBQU8sQ0FBQztBQUFFTixpQkFBUyxFQUFFQSxTQUFiO0FBQXdCSSxhQUFLLEVBQUVBO0FBQS9CLE9BQUQsQ0FBUDtBQUNILEtBSEksRUFHRixVQUFDTyxPQUFELEVBQWE7QUFDWkosWUFBTSxDQUFDO0FBQ0hQLGlCQUFTLEVBQUVBLFNBRFI7QUFFSEksYUFBSyxFQUFFQSxLQUZKO0FBR0hVLGFBQUssRUFBRTtBQUNIQyxhQUFHLEVBQUVKO0FBREY7QUFISixPQUFELENBQU47QUFPSCxLQVhJLENBQUw7QUFZSCxHQWRNLENBQVA7QUFlSCxDLENBR0Q7QUFDQTtBQUNBOztBQUVBLFNBQVNELEtBQVQsQ0FBZU0sV0FBZixFQUE0QkMsU0FBNUIsRUFBdUQ7QUFBQSxNQUFoQkMsT0FBZ0IsdUVBQU4sSUFBTTtBQUNuRCxNQUFNQyxRQUFRLEdBQUcsa0JBQWpCO0FBQ0EsTUFBTUMsR0FBRyxHQUFHLDhCQUFaO0FBQ0EsTUFBTVQsT0FBTyxHQUFJVSxNQUFNLENBQUNDLGNBQVIsR0FBMEIsSUFBSUEsY0FBSixFQUExQixHQUFpRCxJQUFJQyxhQUFKLENBQWtCLG1CQUFsQixDQUFqRTtBQUNBWixTQUFPLENBQUNhLElBQVIsQ0FBYSxNQUFiLEVBQXFCSixHQUFyQixFQUEwQixJQUExQjtBQUNBVCxTQUFPLENBQUNjLGdCQUFSLENBQXlCLGNBQXpCLEVBQXlDTixRQUF6QztBQUNBUixTQUFPLENBQUNjLGdCQUFSLENBQXlCLGNBQXpCLEVBQXlDQyxRQUFRLENBQUNDLGFBQVQsQ0FBdUIseUJBQXZCLEVBQWtEQyxPQUEzRjs7QUFDQWpCLFNBQU8sQ0FBQ2tCLGtCQUFSLEdBQTZCLFlBQVc7QUFDcEMsUUFBSSxLQUFLQyxVQUFMLElBQW1CLENBQXZCLEVBQTBCO0FBQ3RCLFVBQUksS0FBS0MsTUFBTCxJQUFlLEdBQW5CLEVBQXdCO0FBQ3BCZCxpQkFBUyxDQUFDLElBQUQsQ0FBVDtBQUNILE9BRkQsTUFHSztBQUNELFlBQUlDLE9BQUosRUFBYTtBQUNUQSxpQkFBTyxDQUFDLElBQUQsQ0FBUDtBQUNILFNBRkQsTUFHSztBQUNEYyxnQkFBTSxDQUFDLE9BQUQsMkNBQTRDckIsT0FBTyxDQUFDb0IsTUFBcEQscUNBQXFGcEIsT0FBTyxDQUFDRSxZQUE3RixFQUFOO0FBQ0g7QUFDSjtBQUNKO0FBQ0osR0FkRDs7QUFlQUYsU0FBTyxDQUFDc0IsSUFBUixDQUFhQyxJQUFJLENBQUNDLFNBQUwsQ0FBZTtBQUFFdkMsUUFBSSxFQUFFb0I7QUFBUixHQUFmLENBQWI7QUFDSCIsImZpbGUiOiIuL3NyYy9yZXNvdXJjZXMvanMvZWxlbWVudHMvdGV4dC9tYXJrZG93bi9zdHJhdGVneS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNhdmUgYXMgc2F2ZVRleHQgfSBmcm9tICcuLi9oZWxwZXJzJztcbmltcG9ydCB7IGl0ZXJhdGVBbGxNYXJrZG93bkVsZW1lbnRDb250YWluZXJzIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvZWxlbWVudC1jb250YWluZXItaGVscGVyJztcblxuXG4vKipcbiAqIEl0ZXJhdGUgYWxsIG1hcmtkb3duLWVsZW1lbnQgY29udGFpbmVyIG9mIHN0cmF0ZWd5LlxuICogXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgb24gZWFjaCBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXRlcmF0ZUFsbEVsZW1lbnRDb250YWluZXJzKGNhbGxiYWNrKSB7XG4gICAgaXRlcmF0ZUFsbE1hcmtkb3duRWxlbWVudENvbnRhaW5lcnMoY2FsbGJhY2spO1xufVxuXG5cbi8qKlxuICogU2F2ZSBtYXJrZG93bi1lbGVtZW50IG9uIHNlcnZlci5cbiAqIFxuICogQHBhcmFtIHthcnJheTxlbGVtZW50PnxlbGVtZW50fSBkYXRhICBtYXJrZG93bi1lbGVtZW50IG9yIGFycmF5IG9mIG1hcmtkb3duLWVsZW1lbnRzIHRvIHNhdmVcbiAqIFxuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhdmUoZGF0YSkge1xuICAgIHJldHVybiBzYXZlVGV4dChkYXRhKTtcbn1cblxuLyoqXG4gKiBTYXZlIGFsbCBtYXJrZG93bi1lbGVtZW50cyBmcm9tIGRvY3VtZW50LlxuICogXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2F2ZUFsbCgpIHtcbiAgICBsZXQgZWxlbWVudHMgPSBbXTtcbiAgICBpdGVyYXRlQWxsRWxlbWVudENvbnRhaW5lcnMoKGNvbnRhaW5lcik9PiB7XG4gICAgICAgIGVsZW1lbnRzLnB1c2goY29udGFpbmVyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gc2F2ZShlbGVtZW50cyk7XG59XG5cblxuLyoqXG4gKiBSZWZyZXNoIG1hcmtkb3duLWVsZW1lbnQgKHRleHQvbWFya2Rvd24pIGNvbnRhaW5lci5cbiAqIFxuICogQHBhcmFtIHtodG1sLWVsZW1lbnR9IGNvbnRhaW5lciAgZWxlbWVudCBjb250YWluZXJcbiAqIEBwYXJhbSB7ZWxlbWVudH0gICAgICBkYXRhICAgICAgIHRleHQtZWxlbWVudCBkYXRhIChtYXJrZG93bi1lbGVtZW50KVxuICogXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVmcmVzaChjb250YWluZXIsIGRhdGEpIHtcbiAgICByZXR1cm4gcmVmcmVzaFZhbHVlKGNvbnRhaW5lciwgZGF0YS52YWx1ZSk7XG59XG5cbi8qKlxuICogUmVmcmVzaCBtYXJrZG93bi1lbGVtZW50ICh0ZXh0L21hcmtkb3duKSBjb250YWluZXIgdmFsdWUuXG4gKiBcbiAqIEBwYXJhbSB7aHRtbC1lbGVtZW50fSBjb250YWluZXIgIGVsZW1lbnQgY29udGFpbmVyXG4gKiBAcGFyYW0ge2VsZW1lbnR9ICAgICAgdmFsdWUgICAgICB0ZXh0LWVsZW1lbnQgZGF0YSAobWFya2Rvd24tZWxlbWVudCkgdmFsdWVcbiAqIFxuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZnJlc2hWYWx1ZShjb250YWluZXIsIHZhbHVlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29udGFpbmVyLmRhdGFzZXQudmFsdWVDdXJyZW50ID0gdmFsdWU7XG4gICAgICAgIHBhcnNlKHZhbHVlLCAoeG1sSHR0cCkgPT4ge1xuICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IHhtbEh0dHAucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgcmVzb2x2ZSh7IGNvbnRhaW5lcjogY29udGFpbmVyLCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgIH0sICh4bWxIdHRwKSA9PiB7XG4gICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgICAgICBvYmo6IHhtbEh0dHBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXFxcXG4vLy0tLS0tLS0tLS0tLS0tLS0tLSAgUCBSIEkgViBBIFQgRSAgLS0tLS0tLS0tLS0tLS0tLS0tLVxcXFxcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxcXFxuXG5mdW5jdGlvbiBwYXJzZShtYXJrZG93blJhdywgZm5TdWNjZXNzLCBmbkVycm9yID0gbnVsbCkge1xuICAgIGNvbnN0IG1pbWVUeXBlID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgIGNvbnN0IHVybCA9ICcvYXBpL1dZU0lXWUcvbWFya2Rvd24tcGFyc2VyJztcbiAgICBjb25zdCB4bWxIdHRwID0gKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCkgPyBuZXcgWE1MSHR0cFJlcXVlc3QoKSA6IG5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIik7XG4gICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgdXJsLCB0cnVlKTtcbiAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsIG1pbWVUeXBlKTtcbiAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoJ1gtQ1NSRi1UT0tFTicsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5jb250ZW50KTtcbiAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICBmblN1Y2Nlc3ModGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZm5FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBmbkVycm9yKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbm90aWZ5KCdlcnJvcicsIGBPaCBuby4gUmVxdWVzdCBmYWlsZWQuIFN0YXR1czogJHt4bWxIdHRwLnN0YXR1c308YnIvPjxici8+UmVzcG9uc2U6PGJyLz4ke3htbEh0dHAucmVzcG9uc2VUZXh0fWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgeG1sSHR0cC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgZGF0YTogbWFya2Rvd25SYXcgfSkpO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/resources/js/elements/text/markdown/strategy.js\n");

/***/ }),

/***/ "./src/resources/js/elements/text/plain/strategy.js":
/*!**********************************************************!*\
  !*** ./src/resources/js/elements/text/plain/strategy.js ***!
  \**********************************************************/
/*! exports provided: iterateAllElementContainers, save, saveAll, refresh, refreshValue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"iterateAllElementContainers\", function() { return iterateAllElementContainers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"save\", function() { return save; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"saveAll\", function() { return saveAll; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"refresh\", function() { return refresh; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"refreshValue\", function() { return refreshValue; });\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers */ \"./src/resources/js/elements/text/helpers.js\");\n/* harmony import */ var _utils_element_container_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/element-container-helper */ \"./src/resources/js/utils/element-container-helper.js\");\n\n\n/**\n * Iterate all markdown-element container of strategy.\n * \n * @param {function} callback function called on each element.\n */\n\nfunction iterateAllElementContainers(callback) {\n  Object(_utils_element_container_helper__WEBPACK_IMPORTED_MODULE_1__[\"iterateAllTextPlainElementContainers\"])(callback);\n}\n/**\n * Save text-element on server.\n * \n * @param {array<element>|element} data  text-element container or array of text-element containers to save\n * \n * @return {Promise}\n */\n\nfunction save(data) {\n  return Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"save\"])(data);\n}\n/**\n * Save all text-elements from document.\n * \n * @return {Promise}\n */\n\nfunction saveAll() {\n  var elements = [];\n  iterateAllElementContainers(function (container) {\n    elements.push(container);\n  });\n  return save(elements);\n}\n/**\n * Refresh text-element (text/plain) container.\n * \n * @param {html-element} container  element container\n * @param {element}      data       text-element data (text-element)\n * \n * @return {Promise}\n */\n\nfunction refresh(container, data) {\n  return refreshValue(container, data.value);\n}\n/**\n * Refresh text-element (text/plain) container value.\n * \n * @param {html-element} container  element container\n * @param {element}      value      text-element data (text-element) value\n * \n * @return {Promise}\n */\n\nfunction refreshValue(container, value) {\n  return new Promise(function (resolve, reject) {\n    container.innerText = value;\n    container.dataset.valueSaved = value;\n    resolve({\n      container: container,\n      value: value\n    });\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL2VsZW1lbnRzL3RleHQvcGxhaW4vc3RyYXRlZ3kuanM/NDM3OCJdLCJuYW1lcyI6WyJpdGVyYXRlQWxsRWxlbWVudENvbnRhaW5lcnMiLCJjYWxsYmFjayIsIml0ZXJhdGVBbGxUZXh0UGxhaW5FbGVtZW50Q29udGFpbmVycyIsInNhdmUiLCJkYXRhIiwic2F2ZVRleHQiLCJzYXZlQWxsIiwiZWxlbWVudHMiLCJjb250YWluZXIiLCJwdXNoIiwicmVmcmVzaCIsInJlZnJlc2hWYWx1ZSIsInZhbHVlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJpbm5lclRleHQiLCJkYXRhc2V0IiwidmFsdWVTYXZlZCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTs7Ozs7O0FBS08sU0FBU0EsMkJBQVQsQ0FBcUNDLFFBQXJDLEVBQStDO0FBQ2xEQyw4R0FBb0MsQ0FBQ0QsUUFBRCxDQUFwQztBQUNIO0FBR0Q7Ozs7Ozs7O0FBT08sU0FBU0UsSUFBVCxDQUFjQyxJQUFkLEVBQW9CO0FBQ3ZCLFNBQU9DLHFEQUFRLENBQUNELElBQUQsQ0FBZjtBQUNIO0FBRUQ7Ozs7OztBQUtPLFNBQVNFLE9BQVQsR0FBbUI7QUFDdEIsTUFBSUMsUUFBUSxHQUFHLEVBQWY7QUFDQVAsNkJBQTJCLENBQUMsVUFBQ1EsU0FBRCxFQUFjO0FBQ3RDRCxZQUFRLENBQUNFLElBQVQsQ0FBY0QsU0FBZDtBQUNILEdBRjBCLENBQTNCO0FBR0EsU0FBT0wsSUFBSSxDQUFDSSxRQUFELENBQVg7QUFDSDtBQUdEOzs7Ozs7Ozs7QUFRTyxTQUFTRyxPQUFULENBQWlCRixTQUFqQixFQUE0QkosSUFBNUIsRUFBa0M7QUFDckMsU0FBT08sWUFBWSxDQUFDSCxTQUFELEVBQVlKLElBQUksQ0FBQ1EsS0FBakIsQ0FBbkI7QUFDSDtBQUVEOzs7Ozs7Ozs7QUFRTyxTQUFTRCxZQUFULENBQXNCSCxTQUF0QixFQUFpQ0ksS0FBakMsRUFBd0M7QUFDM0MsU0FBTyxJQUFJQyxPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQXFCO0FBQ3BDUCxhQUFTLENBQUNRLFNBQVYsR0FBc0JKLEtBQXRCO0FBQ0FKLGFBQVMsQ0FBQ1MsT0FBVixDQUFrQkMsVUFBbEIsR0FBK0JOLEtBQS9CO0FBQ0FFLFdBQU8sQ0FBQztBQUFFTixlQUFTLEVBQUVBLFNBQWI7QUFBd0JJLFdBQUssRUFBRUE7QUFBL0IsS0FBRCxDQUFQO0FBQ0gsR0FKTSxDQUFQO0FBS0giLCJmaWxlIjoiLi9zcmMvcmVzb3VyY2VzL2pzL2VsZW1lbnRzL3RleHQvcGxhaW4vc3RyYXRlZ3kuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzYXZlIGFzIHNhdmVUZXh0IH0gZnJvbSAnLi4vaGVscGVycyc7XG5pbXBvcnQgeyBpdGVyYXRlQWxsVGV4dFBsYWluRWxlbWVudENvbnRhaW5lcnMgfSBmcm9tICcuLi8uLi8uLi91dGlscy9lbGVtZW50LWNvbnRhaW5lci1oZWxwZXInO1xuXG5cbi8qKlxuICogSXRlcmF0ZSBhbGwgbWFya2Rvd24tZWxlbWVudCBjb250YWluZXIgb2Ygc3RyYXRlZ3kuXG4gKiBcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBvbiBlYWNoIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpdGVyYXRlQWxsRWxlbWVudENvbnRhaW5lcnMoY2FsbGJhY2spIHtcbiAgICBpdGVyYXRlQWxsVGV4dFBsYWluRWxlbWVudENvbnRhaW5lcnMoY2FsbGJhY2spO1xufVxuXG5cbi8qKlxuICogU2F2ZSB0ZXh0LWVsZW1lbnQgb24gc2VydmVyLlxuICogXG4gKiBAcGFyYW0ge2FycmF5PGVsZW1lbnQ+fGVsZW1lbnR9IGRhdGEgIHRleHQtZWxlbWVudCBjb250YWluZXIgb3IgYXJyYXkgb2YgdGV4dC1lbGVtZW50IGNvbnRhaW5lcnMgdG8gc2F2ZVxuICogXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2F2ZShkYXRhKSB7XG4gICAgcmV0dXJuIHNhdmVUZXh0KGRhdGEpO1xufVxuXG4vKipcbiAqIFNhdmUgYWxsIHRleHQtZWxlbWVudHMgZnJvbSBkb2N1bWVudC5cbiAqIFxuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhdmVBbGwoKSB7XG4gICAgbGV0IGVsZW1lbnRzID0gW107XG4gICAgaXRlcmF0ZUFsbEVsZW1lbnRDb250YWluZXJzKChjb250YWluZXIpPT4ge1xuICAgICAgICBlbGVtZW50cy5wdXNoKGNvbnRhaW5lcik7XG4gICAgfSk7XG4gICAgcmV0dXJuIHNhdmUoZWxlbWVudHMpO1xufVxuXG5cbi8qKlxuICogUmVmcmVzaCB0ZXh0LWVsZW1lbnQgKHRleHQvcGxhaW4pIGNvbnRhaW5lci5cbiAqIFxuICogQHBhcmFtIHtodG1sLWVsZW1lbnR9IGNvbnRhaW5lciAgZWxlbWVudCBjb250YWluZXJcbiAqIEBwYXJhbSB7ZWxlbWVudH0gICAgICBkYXRhICAgICAgIHRleHQtZWxlbWVudCBkYXRhICh0ZXh0LWVsZW1lbnQpXG4gKiBcbiAqIEByZXR1cm4ge1Byb21pc2V9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWZyZXNoKGNvbnRhaW5lciwgZGF0YSkge1xuICAgIHJldHVybiByZWZyZXNoVmFsdWUoY29udGFpbmVyLCBkYXRhLnZhbHVlKTtcbn1cblxuLyoqXG4gKiBSZWZyZXNoIHRleHQtZWxlbWVudCAodGV4dC9wbGFpbikgY29udGFpbmVyIHZhbHVlLlxuICogXG4gKiBAcGFyYW0ge2h0bWwtZWxlbWVudH0gY29udGFpbmVyICBlbGVtZW50IGNvbnRhaW5lclxuICogQHBhcmFtIHtlbGVtZW50fSAgICAgIHZhbHVlICAgICAgdGV4dC1lbGVtZW50IGRhdGEgKHRleHQtZWxlbWVudCkgdmFsdWVcbiAqIFxuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZnJlc2hWYWx1ZShjb250YWluZXIsIHZhbHVlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29udGFpbmVyLmlubmVyVGV4dCA9IHZhbHVlO1xuICAgICAgICBjb250YWluZXIuZGF0YXNldC52YWx1ZVNhdmVkID0gdmFsdWU7XG4gICAgICAgIHJlc29sdmUoeyBjb250YWluZXI6IGNvbnRhaW5lciwgdmFsdWU6IHZhbHVlIH0pO1xuICAgIH0pO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/resources/js/elements/text/plain/strategy.js\n");

/***/ }),

/***/ "./src/resources/js/key-listeners/element-container-key-listener.js":
/*!**************************************************************************!*\
  !*** ./src/resources/js/key-listeners/element-container-key-listener.js ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return elementContainerKeyListener; });\n/* harmony import */ var _utils_event_broker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/event-broker */ \"./src/resources/js/utils/event-broker.js\");\n/* harmony import */ var _utils_save__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/save */ \"./src/resources/js/utils/save.js\");\n\n\nfunction elementContainerKeyListener(e) {\n  // e:    KeyboardEvent\n  // this: element container\n  // check if is CMD (on mac) or CTRL (other) pressed\n  var isCtrlOrMeta = window.navigator.platform.match('Mac') ? e.metaKey : e.ctrlKey; // save\n\n  if (isCtrlOrMeta && e.code === 'KeyS') {\n    if (e.shiftKey) {\n      // CRTL+SHIFT+S or CMD+SHIFT+S  =>  save all\n      // let global listener handle this\n      return true;\n    } // CRTL+S or CMD+S  =>  save this element\n\n\n    Object(_utils_save__WEBPACK_IMPORTED_MODULE_1__[\"save\"])(this);\n    return Object(_utils_event_broker__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(e);\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL2tleS1saXN0ZW5lcnMvZWxlbWVudC1jb250YWluZXIta2V5LWxpc3RlbmVyLmpzPzQ2NDQiXSwibmFtZXMiOlsiZWxlbWVudENvbnRhaW5lcktleUxpc3RlbmVyIiwiZSIsImlzQ3RybE9yTWV0YSIsIndpbmRvdyIsIm5hdmlnYXRvciIsInBsYXRmb3JtIiwibWF0Y2giLCJtZXRhS2V5IiwiY3RybEtleSIsImNvZGUiLCJzaGlmdEtleSIsInNhdmUiLCJzdG9wRXZlbnQiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVlLFNBQVNBLDJCQUFULENBQXFDQyxDQUFyQyxFQUF3QztBQUNuRDtBQUNBO0FBRUE7QUFDQSxNQUFNQyxZQUFZLEdBQUdDLE1BQU0sQ0FBQ0MsU0FBUCxDQUFpQkMsUUFBakIsQ0FBMEJDLEtBQTFCLENBQWdDLEtBQWhDLElBQXlDTCxDQUFDLENBQUNNLE9BQTNDLEdBQXFETixDQUFDLENBQUNPLE9BQTVFLENBTG1ELENBT25EOztBQUNBLE1BQUlOLFlBQVksSUFBSUQsQ0FBQyxDQUFDUSxJQUFGLEtBQVcsTUFBL0IsRUFBdUM7QUFDbkMsUUFBSVIsQ0FBQyxDQUFDUyxRQUFOLEVBQWdCO0FBQ1o7QUFDQTtBQUNBLGFBQU8sSUFBUDtBQUNILEtBTGtDLENBT25DOzs7QUFDQUMsNERBQUksQ0FBQyxJQUFELENBQUo7QUFDQSxXQUFPQyxtRUFBUyxDQUFDWCxDQUFELENBQWhCO0FBQ0g7QUFDSiIsImZpbGUiOiIuL3NyYy9yZXNvdXJjZXMvanMva2V5LWxpc3RlbmVycy9lbGVtZW50LWNvbnRhaW5lci1rZXktbGlzdGVuZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc3RvcEV2ZW50IGZyb20gJy4uL3V0aWxzL2V2ZW50LWJyb2tlcic7XG5pbXBvcnQgeyBzYXZlIH0gZnJvbSAnLi4vdXRpbHMvc2F2ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGVsZW1lbnRDb250YWluZXJLZXlMaXN0ZW5lcihlKSB7XG4gICAgLy8gZTogICAgS2V5Ym9hcmRFdmVudFxuICAgIC8vIHRoaXM6IGVsZW1lbnQgY29udGFpbmVyXG5cbiAgICAvLyBjaGVjayBpZiBpcyBDTUQgKG9uIG1hYykgb3IgQ1RSTCAob3RoZXIpIHByZXNzZWRcbiAgICBjb25zdCBpc0N0cmxPck1ldGEgPSB3aW5kb3cubmF2aWdhdG9yLnBsYXRmb3JtLm1hdGNoKCdNYWMnKSA/IGUubWV0YUtleSA6IGUuY3RybEtleTtcblxuICAgIC8vIHNhdmVcbiAgICBpZiAoaXNDdHJsT3JNZXRhICYmIGUuY29kZSA9PT0gJ0tleVMnKSB7XG4gICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAvLyBDUlRMK1NISUZUK1Mgb3IgQ01EK1NISUZUK1MgID0+ICBzYXZlIGFsbFxuICAgICAgICAgICAgLy8gbGV0IGdsb2JhbCBsaXN0ZW5lciBoYW5kbGUgdGhpc1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDUlRMK1Mgb3IgQ01EK1MgID0+ICBzYXZlIHRoaXMgZWxlbWVudFxuICAgICAgICBzYXZlKHRoaXMpO1xuICAgICAgICByZXR1cm4gc3RvcEV2ZW50KGUpO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/resources/js/key-listeners/element-container-key-listener.js\n");

/***/ }),

/***/ "./src/resources/js/key-listeners/global-key-listener.js":
/*!***************************************************************!*\
  !*** ./src/resources/js/key-listeners/global-key-listener.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return globalKeyListener; });\n/* harmony import */ var _utils_event_broker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/event-broker */ \"./src/resources/js/utils/event-broker.js\");\n/* harmony import */ var _utils_save__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/save */ \"./src/resources/js/utils/save.js\");\n/* harmony import */ var _utils_element_container_helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/element-container-helper */ \"./src/resources/js/utils/element-container-helper.js\");\n\n\n\nvar DELTA = 500;\nvar lastKeypressTime = 0;\n/**\n * Global keyboard event listener.\n *\n * @param {object} e keyboard event\n *\n * @return {boolean} true if event should be further propagated; otherwise false\n */\n\nfunction globalKeyListener(e) {\n  // e:    KeyboardEvent\n  // this: #document\n  // check if is CMD (on mac) or CTRL (other) pressed\n  var isCtrlOrMeta = window.navigator.platform.match('Mac') ? e.metaKey : e.ctrlKey; // save\n\n  if (isCtrlOrMeta && e.code === 'KeyS') {\n    if (e.shiftKey) {\n      // save all\n      // CRTL+SHIFT+S or CMD+SHIFT+S  =>  save all\n      Object(_utils_save__WEBPACK_IMPORTED_MODULE_1__[\"saveAll\"])();\n      return Object(_utils_event_broker__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(e);\n    } // CRTL+S or CMD+S  =>  ask user to save all\n\n\n    if (confirm('No element selected. Do you want to save all elements?')) {\n      Object(_utils_save__WEBPACK_IMPORTED_MODULE_1__[\"saveAll\"])();\n    }\n\n    return Object(_utils_event_broker__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(e);\n  } // display borders on dopple key detection\n\n\n  if (['ControlLeft', 'ControlRight', 'ShiftLeft', 'ShiftRight'].includes(e.code)) {\n    var thisKeypressTime = new Date();\n\n    if (thisKeypressTime - lastKeypressTime <= DELTA) {\n      startBorderAnimation(); // optional - if we'd rather not detect a triple-press\n      // as a second double-press, reset the timestamp\n\n      thisKeypressTime = 0;\n    }\n\n    lastKeypressTime = thisKeypressTime;\n    return Object(_utils_event_broker__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(e);\n  } // toggle insert mode\n\n\n  if (isCtrlOrMeta && e.code === 'KeyE') {\n    // CRTL+E or CMD+E  =>  toggle insert mode\n    insertMode();\n    return Object(_utils_event_broker__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(e);\n  } // toggle placeholder mode\n\n\n  if (isCtrlOrMeta && e.code === 'KeyP') {\n    // CRTL+E or CMD+E  =>  toggle placeholder mode\n    togglePlaceholder();\n    return Object(_utils_event_broker__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(e);\n  } // insert mode\n\n\n  if (e.code === 'KeyI') {\n    // I  =>  enable insert mode\n    insertMode(true);\n    return true;\n  } // normal mode\n\n\n  if (e.code === 'Escape') {\n    // ESC  =>  disable insert mode -> normal mode\n    insertMode(false);\n    document.body.removeAttribute('cursor-wait');\n    return Object(_utils_event_broker__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(e);\n  }\n} //------------------------------------------------------\\\\\n//------------------  P R I V A T E  -------------------\\\\\n//------------------------------------------------------\\\\\n\n/**\n * insert: true   => enable\n * insert: false  => disable\n * insert: null   => toggle\n**/\n\nvar insertMode = function () {\n  var enableInsertModeFirstTime = false;\n\n  function prevendAllInteractions() {\n    // remove all to prevend submits/buttons, links and effects\n    var fn_onclick = function fn_onclick(e) {\n      if (window.wysiwyg.insertMode) {\n        return Object(_utils_event_broker__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(e);\n      }\n\n      return true;\n    };\n\n    var elements = document.getElementsByTagName(\"*\");\n\n    for (var i = 0; i < elements.length; i++) {\n      elements[i].onclick = fn_onclick;\n    }\n  }\n\n  function setPointerEventStyle(element, value) {\n    if (value) {\n      element.style.pointerEvents = value;\n      return;\n    }\n\n    element.style.removeProperty('pointer-events');\n  }\n\n  return function () {\n    var insert = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    insert = insert === null ? !window.wysiwyg.insertMode : insert;\n    window.wysiwyg.insertMode = insert;\n\n    if (!enableInsertModeFirstTime) {\n      enableInsertModeFirstTime = true;\n      prevendAllInteractions();\n    } // (un)set pointer-events to get more drag&drop support\n\n\n    setPointerEventStyle(document.body, insert ? 'none' : null);\n    Object(_utils_element_container_helper__WEBPACK_IMPORTED_MODULE_2__[\"iterateAllElementContainers\"])(function (container) {\n      setPointerEventStyle(container, insert ? 'auto' : null);\n    }); // (un)set contenteditable to text elements (e.g. plain and markdown)\n\n    Object(_utils_element_container_helper__WEBPACK_IMPORTED_MODULE_2__[\"iterateAllTextElementContainers\"])(function (container) {\n      container.contentEditable = insert;\n    });\n  };\n}();\n\nfunction togglePlaceholder() {\n  Object(_utils_element_container_helper__WEBPACK_IMPORTED_MODULE_2__[\"iterateAllElementContainers\"])(function (container) {\n    container.classList.toggle(\"no-placeholder\");\n  });\n}\n\nfunction startBorderAnimation() {\n  Object(_utils_element_container_helper__WEBPACK_IMPORTED_MODULE_2__[\"iterateAllElementContainers\"])(function (container) {\n    container.classList.add(\"WYSIWYG__container-border\");\n\n    if (getComputedStyle(container, null).display === 'inline') {\n      container.classList.add(\"WYSIWYG__container-border-no-inline\");\n    }\n\n    setTimeout(function () {\n      this.classList.remove(\"WYSIWYG__container-border\");\n      this.classList.remove(\"WYSIWYG__container-border-no-inline\");\n    }.bind(container), 2000);\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL2tleS1saXN0ZW5lcnMvZ2xvYmFsLWtleS1saXN0ZW5lci5qcz84ZTI4Il0sIm5hbWVzIjpbIkRFTFRBIiwibGFzdEtleXByZXNzVGltZSIsImdsb2JhbEtleUxpc3RlbmVyIiwiZSIsImlzQ3RybE9yTWV0YSIsIndpbmRvdyIsIm5hdmlnYXRvciIsInBsYXRmb3JtIiwibWF0Y2giLCJtZXRhS2V5IiwiY3RybEtleSIsImNvZGUiLCJzaGlmdEtleSIsInNhdmVBbGwiLCJzdG9wRXZlbnQiLCJjb25maXJtIiwiaW5jbHVkZXMiLCJ0aGlzS2V5cHJlc3NUaW1lIiwiRGF0ZSIsInN0YXJ0Qm9yZGVyQW5pbWF0aW9uIiwiaW5zZXJ0TW9kZSIsInRvZ2dsZVBsYWNlaG9sZGVyIiwiZG9jdW1lbnQiLCJib2R5IiwicmVtb3ZlQXR0cmlidXRlIiwiZW5hYmxlSW5zZXJ0TW9kZUZpcnN0VGltZSIsInByZXZlbmRBbGxJbnRlcmFjdGlvbnMiLCJmbl9vbmNsaWNrIiwid3lzaXd5ZyIsImVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpIiwibGVuZ3RoIiwib25jbGljayIsInNldFBvaW50ZXJFdmVudFN0eWxlIiwiZWxlbWVudCIsInZhbHVlIiwic3R5bGUiLCJwb2ludGVyRXZlbnRzIiwicmVtb3ZlUHJvcGVydHkiLCJpbnNlcnQiLCJpdGVyYXRlQWxsRWxlbWVudENvbnRhaW5lcnMiLCJjb250YWluZXIiLCJpdGVyYXRlQWxsVGV4dEVsZW1lbnRDb250YWluZXJzIiwiY29udGVudEVkaXRhYmxlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiYWRkIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImRpc3BsYXkiLCJzZXRUaW1lb3V0IiwicmVtb3ZlIiwiYmluZCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUtBLElBQU1BLEtBQUssR0FBRyxHQUFkO0FBQ0EsSUFBSUMsZ0JBQWdCLEdBQUcsQ0FBdkI7QUFFQTs7Ozs7Ozs7QUFPZSxTQUFTQyxpQkFBVCxDQUEyQkMsQ0FBM0IsRUFBOEI7QUFDekM7QUFDQTtBQUVBO0FBQ0EsTUFBTUMsWUFBWSxHQUFHQyxNQUFNLENBQUNDLFNBQVAsQ0FBaUJDLFFBQWpCLENBQTBCQyxLQUExQixDQUFnQyxLQUFoQyxJQUF5Q0wsQ0FBQyxDQUFDTSxPQUEzQyxHQUFxRE4sQ0FBQyxDQUFDTyxPQUE1RSxDQUx5QyxDQU96Qzs7QUFDQSxNQUFJTixZQUFZLElBQUlELENBQUMsQ0FBQ1EsSUFBRixLQUFXLE1BQS9CLEVBQXVDO0FBQ25DLFFBQUlSLENBQUMsQ0FBQ1MsUUFBTixFQUFnQjtBQUNaO0FBQ0E7QUFDQUMsaUVBQU87QUFDUCxhQUFPQyxtRUFBUyxDQUFDWCxDQUFELENBQWhCO0FBQ0gsS0FOa0MsQ0FRbkM7OztBQUNBLFFBQUlZLE9BQU8sQ0FBQyx3REFBRCxDQUFYLEVBQXVFO0FBQ25FRixpRUFBTztBQUNWOztBQUNELFdBQU9DLG1FQUFTLENBQUNYLENBQUQsQ0FBaEI7QUFDSCxHQXJCd0MsQ0F1QnpDOzs7QUFDQSxNQUFJLENBQUUsYUFBRixFQUFpQixjQUFqQixFQUFpQyxXQUFqQyxFQUE4QyxZQUE5QyxFQUE2RGEsUUFBN0QsQ0FBc0ViLENBQUMsQ0FBQ1EsSUFBeEUsQ0FBSixFQUFtRjtBQUMvRSxRQUFJTSxnQkFBZ0IsR0FBRyxJQUFJQyxJQUFKLEVBQXZCOztBQUNBLFFBQU1ELGdCQUFnQixHQUFHaEIsZ0JBQXBCLElBQXlDRCxLQUE5QyxFQUFzRDtBQUNsRG1CLDBCQUFvQixHQUQ4QixDQUVsRDtBQUNBOztBQUNBRixzQkFBZ0IsR0FBRyxDQUFuQjtBQUNIOztBQUNEaEIsb0JBQWdCLEdBQUdnQixnQkFBbkI7QUFDQSxXQUFPSCxtRUFBUyxDQUFDWCxDQUFELENBQWhCO0FBQ0gsR0FsQ3dDLENBb0N6Qzs7O0FBQ0EsTUFBSUMsWUFBWSxJQUFJRCxDQUFDLENBQUNRLElBQUYsS0FBVyxNQUEvQixFQUF1QztBQUNuQztBQUNBUyxjQUFVO0FBQ1YsV0FBT04sbUVBQVMsQ0FBQ1gsQ0FBRCxDQUFoQjtBQUNILEdBekN3QyxDQTJDekM7OztBQUNBLE1BQUlDLFlBQVksSUFBSUQsQ0FBQyxDQUFDUSxJQUFGLEtBQVcsTUFBL0IsRUFBdUM7QUFDbkM7QUFDQVUscUJBQWlCO0FBQ2pCLFdBQU9QLG1FQUFTLENBQUNYLENBQUQsQ0FBaEI7QUFDSCxHQWhEd0MsQ0FrRHpDOzs7QUFDQSxNQUFJQSxDQUFDLENBQUNRLElBQUYsS0FBVyxNQUFmLEVBQXVCO0FBQ25CO0FBQ0FTLGNBQVUsQ0FBQyxJQUFELENBQVY7QUFDQSxXQUFPLElBQVA7QUFDSCxHQXZEd0MsQ0F5RHpDOzs7QUFDQSxNQUFJakIsQ0FBQyxDQUFDUSxJQUFGLEtBQVcsUUFBZixFQUF5QjtBQUNyQjtBQUNBUyxjQUFVLENBQUMsS0FBRCxDQUFWO0FBQ0FFLFlBQVEsQ0FBQ0MsSUFBVCxDQUFjQyxlQUFkLENBQThCLGFBQTlCO0FBQ0EsV0FBT1YsbUVBQVMsQ0FBQ1gsQ0FBRCxDQUFoQjtBQUNIO0FBQ0osQyxDQUdEO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7O0FBS0EsSUFBTWlCLFVBQVUsR0FBSSxZQUFXO0FBQzNCLE1BQUlLLHlCQUF5QixHQUFHLEtBQWhDOztBQUVBLFdBQVNDLHNCQUFULEdBQWtDO0FBQzlCO0FBQ0EsUUFBTUMsVUFBVSxHQUFHLFNBQWJBLFVBQWEsQ0FBQ3hCLENBQUQsRUFBTztBQUN0QixVQUFJRSxNQUFNLENBQUN1QixPQUFQLENBQWVSLFVBQW5CLEVBQStCO0FBQzNCLGVBQU9OLG1FQUFTLENBQUNYLENBQUQsQ0FBaEI7QUFDSDs7QUFDRCxhQUFPLElBQVA7QUFDSCxLQUxEOztBQU1BLFFBQU0wQixRQUFRLEdBQUdQLFFBQVEsQ0FBQ1Esb0JBQVQsQ0FBOEIsR0FBOUIsQ0FBakI7O0FBQ0EsU0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHRixRQUFRLENBQUNHLE1BQTdCLEVBQXFDRCxDQUFDLEVBQXRDLEVBQTBDO0FBQ3RDRixjQUFRLENBQUNFLENBQUQsQ0FBUixDQUFZRSxPQUFaLEdBQXNCTixVQUF0QjtBQUNIO0FBQ0o7O0FBRUQsV0FBU08sb0JBQVQsQ0FBOEJDLE9BQTlCLEVBQXVDQyxLQUF2QyxFQUE4QztBQUMxQyxRQUFJQSxLQUFKLEVBQVc7QUFDUEQsYUFBTyxDQUFDRSxLQUFSLENBQWNDLGFBQWQsR0FBOEJGLEtBQTlCO0FBQ0E7QUFDSDs7QUFDREQsV0FBTyxDQUFDRSxLQUFSLENBQWNFLGNBQWQsQ0FBNkIsZ0JBQTdCO0FBQ0g7O0FBRUQsU0FBTyxZQUF3QjtBQUFBLFFBQWZDLE1BQWUsdUVBQU4sSUFBTTtBQUMzQkEsVUFBTSxHQUFJQSxNQUFNLEtBQUssSUFBWixHQUFvQixDQUFDbkMsTUFBTSxDQUFDdUIsT0FBUCxDQUFlUixVQUFwQyxHQUFpRG9CLE1BQTFEO0FBQ0FuQyxVQUFNLENBQUN1QixPQUFQLENBQWVSLFVBQWYsR0FBNEJvQixNQUE1Qjs7QUFFQSxRQUFJLENBQUVmLHlCQUFOLEVBQWlDO0FBQzdCQSwrQkFBeUIsR0FBRyxJQUE1QjtBQUNBQyw0QkFBc0I7QUFDekIsS0FQMEIsQ0FTM0I7OztBQUNBUSx3QkFBb0IsQ0FBQ1osUUFBUSxDQUFDQyxJQUFWLEVBQWlCaUIsTUFBRCxHQUFXLE1BQVgsR0FBb0IsSUFBcEMsQ0FBcEI7QUFDQUMsdUdBQTJCLENBQUMsVUFBQ0MsU0FBRCxFQUFlO0FBQ3ZDUiwwQkFBb0IsQ0FBQ1EsU0FBRCxFQUFhRixNQUFELEdBQVcsTUFBWCxHQUFvQixJQUFoQyxDQUFwQjtBQUNILEtBRjBCLENBQTNCLENBWDJCLENBZTNCOztBQUNBRywyR0FBK0IsQ0FBQyxVQUFDRCxTQUFELEVBQWU7QUFDM0NBLGVBQVMsQ0FBQ0UsZUFBVixHQUE0QkosTUFBNUI7QUFDSCxLQUY4QixDQUEvQjtBQUdILEdBbkJEO0FBb0JILENBN0NrQixFQUFuQjs7QUErQ0EsU0FBU25CLGlCQUFULEdBQTZCO0FBQ3pCb0IscUdBQTJCLENBQUMsVUFBQ0MsU0FBRCxFQUFlO0FBQ3ZDQSxhQUFTLENBQUNHLFNBQVYsQ0FBb0JDLE1BQXBCLENBQTJCLGdCQUEzQjtBQUNILEdBRjBCLENBQTNCO0FBR0g7O0FBRUQsU0FBUzNCLG9CQUFULEdBQWdDO0FBQzVCc0IscUdBQTJCLENBQUMsVUFBQ0MsU0FBRCxFQUFlO0FBQ3ZDQSxhQUFTLENBQUNHLFNBQVYsQ0FBb0JFLEdBQXBCLENBQXdCLDJCQUF4Qjs7QUFDQSxRQUFJQyxnQkFBZ0IsQ0FBQ04sU0FBRCxFQUFZLElBQVosQ0FBaEIsQ0FBa0NPLE9BQWxDLEtBQThDLFFBQWxELEVBQTREO0FBQ3hEUCxlQUFTLENBQUNHLFNBQVYsQ0FBb0JFLEdBQXBCLENBQXdCLHFDQUF4QjtBQUNIOztBQUNERyxjQUFVLENBQUMsWUFBVztBQUNsQixXQUFLTCxTQUFMLENBQWVNLE1BQWYsQ0FBc0IsMkJBQXRCO0FBQ0EsV0FBS04sU0FBTCxDQUFlTSxNQUFmLENBQXNCLHFDQUF0QjtBQUNILEtBSFUsQ0FHVEMsSUFIUyxDQUdKVixTQUhJLENBQUQsRUFHUyxJQUhULENBQVY7QUFJSCxHQVQwQixDQUEzQjtBQVVIIiwiZmlsZSI6Ii4vc3JjL3Jlc291cmNlcy9qcy9rZXktbGlzdGVuZXJzL2dsb2JhbC1rZXktbGlzdGVuZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc3RvcEV2ZW50IGZyb20gJy4uL3V0aWxzL2V2ZW50LWJyb2tlcic7XG5pbXBvcnQgeyBzYXZlQWxsIH0gZnJvbSAnLi4vdXRpbHMvc2F2ZSc7XG5pbXBvcnQge1xuICAgIGl0ZXJhdGVBbGxFbGVtZW50Q29udGFpbmVycyxcbiAgICBpdGVyYXRlQWxsVGV4dEVsZW1lbnRDb250YWluZXJzXG59IGZyb20gJy4uL3V0aWxzL2VsZW1lbnQtY29udGFpbmVyLWhlbHBlcic7XG5cbmNvbnN0IERFTFRBID0gNTAwO1xubGV0IGxhc3RLZXlwcmVzc1RpbWUgPSAwO1xuXG4vKipcbiAqIEdsb2JhbCBrZXlib2FyZCBldmVudCBsaXN0ZW5lci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gZSBrZXlib2FyZCBldmVudFxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgZXZlbnQgc2hvdWxkIGJlIGZ1cnRoZXIgcHJvcGFnYXRlZDsgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdsb2JhbEtleUxpc3RlbmVyKGUpIHtcbiAgICAvLyBlOiAgICBLZXlib2FyZEV2ZW50XG4gICAgLy8gdGhpczogI2RvY3VtZW50XG5cbiAgICAvLyBjaGVjayBpZiBpcyBDTUQgKG9uIG1hYykgb3IgQ1RSTCAob3RoZXIpIHByZXNzZWRcbiAgICBjb25zdCBpc0N0cmxPck1ldGEgPSB3aW5kb3cubmF2aWdhdG9yLnBsYXRmb3JtLm1hdGNoKCdNYWMnKSA/IGUubWV0YUtleSA6IGUuY3RybEtleTtcblxuICAgIC8vIHNhdmVcbiAgICBpZiAoaXNDdHJsT3JNZXRhICYmIGUuY29kZSA9PT0gJ0tleVMnKSB7XG4gICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAvLyBzYXZlIGFsbFxuICAgICAgICAgICAgLy8gQ1JUTCtTSElGVCtTIG9yIENNRCtTSElGVCtTICA9PiAgc2F2ZSBhbGxcbiAgICAgICAgICAgIHNhdmVBbGwoKTtcbiAgICAgICAgICAgIHJldHVybiBzdG9wRXZlbnQoZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDUlRMK1Mgb3IgQ01EK1MgID0+ICBhc2sgdXNlciB0byBzYXZlIGFsbFxuICAgICAgICBpZiAoY29uZmlybSgnTm8gZWxlbWVudCBzZWxlY3RlZC4gRG8geW91IHdhbnQgdG8gc2F2ZSBhbGwgZWxlbWVudHM/JykpIHtcbiAgICAgICAgICAgIHNhdmVBbGwoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RvcEV2ZW50KGUpO1xuICAgIH1cblxuICAgIC8vIGRpc3BsYXkgYm9yZGVycyBvbiBkb3BwbGUga2V5IGRldGVjdGlvblxuICAgIGlmIChbICdDb250cm9sTGVmdCcsICdDb250cm9sUmlnaHQnLCAnU2hpZnRMZWZ0JywgJ1NoaWZ0UmlnaHQnIF0uaW5jbHVkZXMoZS5jb2RlKSkge1xuICAgICAgICBsZXQgdGhpc0tleXByZXNzVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGlmICggKHRoaXNLZXlwcmVzc1RpbWUgLSBsYXN0S2V5cHJlc3NUaW1lKSA8PSBERUxUQSApIHtcbiAgICAgICAgICAgIHN0YXJ0Qm9yZGVyQW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAvLyBvcHRpb25hbCAtIGlmIHdlJ2QgcmF0aGVyIG5vdCBkZXRlY3QgYSB0cmlwbGUtcHJlc3NcbiAgICAgICAgICAgIC8vIGFzIGEgc2Vjb25kIGRvdWJsZS1wcmVzcywgcmVzZXQgdGhlIHRpbWVzdGFtcFxuICAgICAgICAgICAgdGhpc0tleXByZXNzVGltZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdEtleXByZXNzVGltZSA9IHRoaXNLZXlwcmVzc1RpbWU7XG4gICAgICAgIHJldHVybiBzdG9wRXZlbnQoZSk7XG4gICAgfVxuXG4gICAgLy8gdG9nZ2xlIGluc2VydCBtb2RlXG4gICAgaWYgKGlzQ3RybE9yTWV0YSAmJiBlLmNvZGUgPT09ICdLZXlFJykge1xuICAgICAgICAvLyBDUlRMK0Ugb3IgQ01EK0UgID0+ICB0b2dnbGUgaW5zZXJ0IG1vZGVcbiAgICAgICAgaW5zZXJ0TW9kZSgpO1xuICAgICAgICByZXR1cm4gc3RvcEV2ZW50KGUpO1xuICAgIH1cblxuICAgIC8vIHRvZ2dsZSBwbGFjZWhvbGRlciBtb2RlXG4gICAgaWYgKGlzQ3RybE9yTWV0YSAmJiBlLmNvZGUgPT09ICdLZXlQJykge1xuICAgICAgICAvLyBDUlRMK0Ugb3IgQ01EK0UgID0+ICB0b2dnbGUgcGxhY2Vob2xkZXIgbW9kZVxuICAgICAgICB0b2dnbGVQbGFjZWhvbGRlcigpO1xuICAgICAgICByZXR1cm4gc3RvcEV2ZW50KGUpO1xuICAgIH1cblxuICAgIC8vIGluc2VydCBtb2RlXG4gICAgaWYgKGUuY29kZSA9PT0gJ0tleUknKSB7XG4gICAgICAgIC8vIEkgID0+ICBlbmFibGUgaW5zZXJ0IG1vZGVcbiAgICAgICAgaW5zZXJ0TW9kZSh0cnVlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gbm9ybWFsIG1vZGVcbiAgICBpZiAoZS5jb2RlID09PSAnRXNjYXBlJykge1xuICAgICAgICAvLyBFU0MgID0+ICBkaXNhYmxlIGluc2VydCBtb2RlIC0+IG5vcm1hbCBtb2RlXG4gICAgICAgIGluc2VydE1vZGUoZmFsc2UpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUF0dHJpYnV0ZSgnY3Vyc29yLXdhaXQnKTtcbiAgICAgICAgcmV0dXJuIHN0b3BFdmVudChlKTtcbiAgICB9XG59XG5cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXFxcXG4vLy0tLS0tLS0tLS0tLS0tLS0tLSAgUCBSIEkgViBBIFQgRSAgLS0tLS0tLS0tLS0tLS0tLS0tLVxcXFxcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxcXFxuXG4vKipcbiAqIGluc2VydDogdHJ1ZSAgID0+IGVuYWJsZVxuICogaW5zZXJ0OiBmYWxzZSAgPT4gZGlzYWJsZVxuICogaW5zZXJ0OiBudWxsICAgPT4gdG9nZ2xlXG4qKi9cbmNvbnN0IGluc2VydE1vZGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgbGV0IGVuYWJsZUluc2VydE1vZGVGaXJzdFRpbWUgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIHByZXZlbmRBbGxJbnRlcmFjdGlvbnMoKSB7XG4gICAgICAgIC8vIHJlbW92ZSBhbGwgdG8gcHJldmVuZCBzdWJtaXRzL2J1dHRvbnMsIGxpbmtzIGFuZCBlZmZlY3RzXG4gICAgICAgIGNvbnN0IGZuX29uY2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy53eXNpd3lnLmluc2VydE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcEV2ZW50KGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBlbGVtZW50c1tpXS5vbmNsaWNrID0gZm5fb25jbGljaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFBvaW50ZXJFdmVudFN0eWxlKGVsZW1lbnQsIHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncG9pbnRlci1ldmVudHMnKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGluc2VydCA9IG51bGwpIHtcbiAgICAgICAgaW5zZXJ0ID0gKGluc2VydCA9PT0gbnVsbCkgPyAhd2luZG93Lnd5c2l3eWcuaW5zZXJ0TW9kZSA6IGluc2VydDtcbiAgICAgICAgd2luZG93Lnd5c2l3eWcuaW5zZXJ0TW9kZSA9IGluc2VydDtcblxuICAgICAgICBpZiAoISBlbmFibGVJbnNlcnRNb2RlRmlyc3RUaW1lKSB7XG4gICAgICAgICAgICBlbmFibGVJbnNlcnRNb2RlRmlyc3RUaW1lID0gdHJ1ZTtcbiAgICAgICAgICAgIHByZXZlbmRBbGxJbnRlcmFjdGlvbnMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vICh1bilzZXQgcG9pbnRlci1ldmVudHMgdG8gZ2V0IG1vcmUgZHJhZyZkcm9wIHN1cHBvcnRcbiAgICAgICAgc2V0UG9pbnRlckV2ZW50U3R5bGUoZG9jdW1lbnQuYm9keSwgKGluc2VydCkgPyAnbm9uZScgOiBudWxsKTtcbiAgICAgICAgaXRlcmF0ZUFsbEVsZW1lbnRDb250YWluZXJzKChjb250YWluZXIpID0+IHtcbiAgICAgICAgICAgIHNldFBvaW50ZXJFdmVudFN0eWxlKGNvbnRhaW5lciwgKGluc2VydCkgPyAnYXV0bycgOiBudWxsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gKHVuKXNldCBjb250ZW50ZWRpdGFibGUgdG8gdGV4dCBlbGVtZW50cyAoZS5nLiBwbGFpbiBhbmQgbWFya2Rvd24pXG4gICAgICAgIGl0ZXJhdGVBbGxUZXh0RWxlbWVudENvbnRhaW5lcnMoKGNvbnRhaW5lcikgPT4ge1xuICAgICAgICAgICAgY29udGFpbmVyLmNvbnRlbnRFZGl0YWJsZSA9IGluc2VydDtcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pKCk7XG5cbmZ1bmN0aW9uIHRvZ2dsZVBsYWNlaG9sZGVyKCkge1xuICAgIGl0ZXJhdGVBbGxFbGVtZW50Q29udGFpbmVycygoY29udGFpbmVyKSA9PiB7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwibm8tcGxhY2Vob2xkZXJcIik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHN0YXJ0Qm9yZGVyQW5pbWF0aW9uKCkge1xuICAgIGl0ZXJhdGVBbGxFbGVtZW50Q29udGFpbmVycygoY29udGFpbmVyKSA9PiB7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiV1lTSVdZR19fY29udGFpbmVyLWJvcmRlclwiKTtcbiAgICAgICAgaWYgKGdldENvbXB1dGVkU3R5bGUoY29udGFpbmVyLCBudWxsKS5kaXNwbGF5ID09PSAnaW5saW5lJykge1xuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJXWVNJV1lHX19jb250YWluZXItYm9yZGVyLW5vLWlubGluZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwiV1lTSVdZR19fY29udGFpbmVyLWJvcmRlclwiKTtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcIldZU0lXWUdfX2NvbnRhaW5lci1ib3JkZXItbm8taW5saW5lXCIpO1xuICAgICAgICB9LmJpbmQoY29udGFpbmVyKSwgMjAwMCk7XG4gICAgfSk7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/resources/js/key-listeners/global-key-listener.js\n");

/***/ }),

/***/ "./src/resources/js/utils/config.js":
/*!******************************************!*\
  !*** ./src/resources/js/utils/config.js ***!
  \******************************************/
/*! exports provided: config */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"config\", function() { return config; });\n/* harmony import */ var _notification__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./notification */ \"./src/resources/js/utils/notification.js\");\n\nvar config = function () {\n  var url = '/api/WYSIWYG/config';\n  var xmlHttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\");\n  xmlHttp.open('GET', url, false); // false: synchronous\n\n  xmlHttp.setRequestHeader('X-CSRF-TOKEN', document.querySelector('meta[name=\"csrf-token\"]').content);\n  xmlHttp.send(null);\n\n  if (xmlHttp.status === 200) {\n    var _config = JSON.parse(xmlHttp.responseText);\n\n    window.wysiwyg = window.wysiwyg || {};\n    window.wysiwyg.config = _config;\n    return _config;\n  }\n\n  Object(_notification__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('error', \"Config could not be loaded.<br/><br/>Status: \".concat(xmlHttp.status, \"<br/>response text:<br/>xmlHttp.responseText\"));\n  return null;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL3V0aWxzL2NvbmZpZy5qcz82ZjM1Il0sIm5hbWVzIjpbImNvbmZpZyIsInVybCIsInhtbEh0dHAiLCJ3aW5kb3ciLCJYTUxIdHRwUmVxdWVzdCIsIkFjdGl2ZVhPYmplY3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJzZW5kIiwic3RhdHVzIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0Iiwid3lzaXd5ZyIsIm5vdGlmeSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFFTyxJQUFNQSxNQUFNLEdBQUksWUFBVztBQUM5QixNQUFNQyxHQUFHLEdBQUcscUJBQVo7QUFDQSxNQUFNQyxPQUFPLEdBQUlDLE1BQU0sQ0FBQ0MsY0FBUixHQUEwQixJQUFJQSxjQUFKLEVBQTFCLEdBQWlELElBQUlDLGFBQUosQ0FBa0IsbUJBQWxCLENBQWpFO0FBQ0FILFNBQU8sQ0FBQ0ksSUFBUixDQUFhLEtBQWIsRUFBb0JMLEdBQXBCLEVBQXlCLEtBQXpCLEVBSDhCLENBR0c7O0FBQ2pDQyxTQUFPLENBQUNLLGdCQUFSLENBQXlCLGNBQXpCLEVBQXlDQyxRQUFRLENBQUNDLGFBQVQsQ0FBdUIseUJBQXZCLEVBQWtEQyxPQUEzRjtBQUNBUixTQUFPLENBQUNTLElBQVIsQ0FBYSxJQUFiOztBQUNBLE1BQUlULE9BQU8sQ0FBQ1UsTUFBUixLQUFtQixHQUF2QixFQUE0QjtBQUN4QixRQUFNWixPQUFNLEdBQUdhLElBQUksQ0FBQ0MsS0FBTCxDQUFXWixPQUFPLENBQUNhLFlBQW5CLENBQWY7O0FBQ0FaLFVBQU0sQ0FBQ2EsT0FBUCxHQUFpQmIsTUFBTSxDQUFDYSxPQUFQLElBQWtCLEVBQW5DO0FBQ0FiLFVBQU0sQ0FBQ2EsT0FBUCxDQUFlaEIsTUFBZixHQUF3QkEsT0FBeEI7QUFDQSxXQUFPQSxPQUFQO0FBQ0g7O0FBQ0RpQiwrREFBTSxDQUFDLE9BQUQseURBQTBEZixPQUFPLENBQUNVLE1BQWxFLGtEQUFOO0FBQ0EsU0FBTyxJQUFQO0FBQ0gsQ0FkcUIsRUFBZiIsImZpbGUiOiIuL3NyYy9yZXNvdXJjZXMvanMvdXRpbHMvY29uZmlnLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG5vdGlmeSBmcm9tIFwiLi9ub3RpZmljYXRpb25cIjtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IChmdW5jdGlvbigpIHtcbiAgICBjb25zdCB1cmwgPSAnL2FwaS9XWVNJV1lHL2NvbmZpZyc7XG4gICAgY29uc3QgeG1sSHR0cCA9ICh3aW5kb3cuWE1MSHR0cFJlcXVlc3QpID8gbmV3IFhNTEh0dHBSZXF1ZXN0KCkgOiBuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpO1xuICAgIHhtbEh0dHAub3BlbignR0VUJywgdXJsLCBmYWxzZSk7IC8vIGZhbHNlOiBzeW5jaHJvbm91c1xuICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcignWC1DU1JGLVRPS0VOJywgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPVwiY3NyZi10b2tlblwiXScpLmNvbnRlbnQpO1xuICAgIHhtbEh0dHAuc2VuZChudWxsKTtcbiAgICBpZiAoeG1sSHR0cC5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICBjb25zdCBjb25maWcgPSBKU09OLnBhcnNlKHhtbEh0dHAucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgd2luZG93Lnd5c2l3eWcgPSB3aW5kb3cud3lzaXd5ZyB8fCB7fTtcbiAgICAgICAgd2luZG93Lnd5c2l3eWcuY29uZmlnID0gY29uZmlnO1xuICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cbiAgICBub3RpZnkoJ2Vycm9yJywgYENvbmZpZyBjb3VsZCBub3QgYmUgbG9hZGVkLjxici8+PGJyLz5TdGF0dXM6ICR7eG1sSHR0cC5zdGF0dXN9PGJyLz5yZXNwb25zZSB0ZXh0Ojxici8+eG1sSHR0cC5yZXNwb25zZVRleHRgKTtcbiAgICByZXR1cm4gbnVsbDtcbn0pKCk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/resources/js/utils/config.js\n");

/***/ }),

/***/ "./src/resources/js/utils/element-container-helper.js":
/*!************************************************************!*\
  !*** ./src/resources/js/utils/element-container-helper.js ***!
  \************************************************************/
/*! exports provided: iterateAllElementContainers, iterateAllTextElementContainers, iterateAllTextPlainElementContainers, iterateAllMarkdownElementContainers, iterateAllMediaElementContainers, iterateAllImageElementContainers */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"iterateAllElementContainers\", function() { return iterateAllElementContainers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"iterateAllTextElementContainers\", function() { return iterateAllTextElementContainers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"iterateAllTextPlainElementContainers\", function() { return iterateAllTextPlainElementContainers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"iterateAllMarkdownElementContainers\", function() { return iterateAllMarkdownElementContainers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"iterateAllMediaElementContainers\", function() { return iterateAllMediaElementContainers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"iterateAllImageElementContainers\", function() { return iterateAllImageElementContainers; });\n/**\n * Iterate all content elements of each type\n * e.g. 'text/plain', 'text/markdown', 'media', ...\n * \n * @param {function} callback function called on each element.\n */\nfunction iterateAllElementContainers(callback) {\n  var containers = document.getElementsByClassName(\"WYSIWYG__container\") || [];\n\n  for (var i = 0; i < containers.length; i++) {\n    callback(containers[i]);\n  }\n}\n/**\n * Iterate all text elements\n * 'text/plain' and 'text/markdown'\n * \n * @param {function} callback function called on each element.\n */\n\nfunction iterateAllTextElementContainers(callback) {\n  var containers = document.getElementsByClassName(\"WYSIWYG__container-text\") || [];\n\n  for (var i = 0; i < containers.length; i++) {\n    callback(containers[i]);\n  }\n}\n/**\n * Iterate all plain text elements 'text/plain'\n * \n * @param {function} callback function called on each element.\n */\n\nfunction iterateAllTextPlainElementContainers(callback) {\n  var containers = document.getElementsByClassName(\"WYSIWYG__container-text-plain\") || [];\n\n  for (var i = 0; i < containers.length; i++) {\n    callback(containers[i]);\n  }\n}\n/**\n * Iterate all markdown elements 'text/markdown'\n * \n * @param {function} callback function called on each element.\n */\n\nfunction iterateAllMarkdownElementContainers(callback) {\n  var containers = document.getElementsByClassName(\"WYSIWYG__container-text-markdown\") || [];\n\n  for (var i = 0; i < containers.length; i++) {\n    callback(containers[i]);\n  }\n}\n/**\n * Iterate all media elements 'media'\n * \n * @param {function} callback function called on each element.\n */\n\nfunction iterateAllMediaElementContainers(callback) {\n  var containers = document.getElementsByClassName(\"WYSIWYG__container-media\") || [];\n\n  for (var i = 0; i < containers.length; i++) {\n    callback(containers[i]);\n  }\n}\n/**\n * Iterate all media elements 'media/image'\n * \n * @param {function} callback function called on each element.\n */\n\nfunction iterateAllImageElementContainers(callback) {\n  var containers = document.getElementsByClassName(\"WYSIWYG__container-media-image\") || [];\n\n  for (var i = 0; i < containers.length; i++) {\n    callback(containers[i]);\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL3V0aWxzL2VsZW1lbnQtY29udGFpbmVyLWhlbHBlci5qcz8yOTQ3Il0sIm5hbWVzIjpbIml0ZXJhdGVBbGxFbGVtZW50Q29udGFpbmVycyIsImNhbGxiYWNrIiwiY29udGFpbmVycyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImkiLCJsZW5ndGgiLCJpdGVyYXRlQWxsVGV4dEVsZW1lbnRDb250YWluZXJzIiwiaXRlcmF0ZUFsbFRleHRQbGFpbkVsZW1lbnRDb250YWluZXJzIiwiaXRlcmF0ZUFsbE1hcmtkb3duRWxlbWVudENvbnRhaW5lcnMiLCJpdGVyYXRlQWxsTWVkaWFFbGVtZW50Q29udGFpbmVycyIsIml0ZXJhdGVBbGxJbWFnZUVsZW1lbnRDb250YWluZXJzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7QUFNTyxTQUFTQSwyQkFBVCxDQUFxQ0MsUUFBckMsRUFBK0M7QUFDbEQsTUFBTUMsVUFBVSxHQUFHQyxRQUFRLENBQUNDLHNCQUFULENBQWdDLG9CQUFoQyxLQUF5RCxFQUE1RTs7QUFDQSxPQUFJLElBQUlDLENBQUMsR0FBRyxDQUFaLEVBQWVBLENBQUMsR0FBR0gsVUFBVSxDQUFDSSxNQUE5QixFQUFzQ0QsQ0FBQyxFQUF2QyxFQUEyQztBQUN2Q0osWUFBUSxDQUFDQyxVQUFVLENBQUNHLENBQUQsQ0FBWCxDQUFSO0FBQ0g7QUFDSjtBQUVEOzs7Ozs7O0FBTU8sU0FBU0UsK0JBQVQsQ0FBeUNOLFFBQXpDLEVBQW1EO0FBQ3RELE1BQU1DLFVBQVUsR0FBR0MsUUFBUSxDQUFDQyxzQkFBVCxDQUFnQyx5QkFBaEMsS0FBOEQsRUFBakY7O0FBQ0EsT0FBSSxJQUFJQyxDQUFDLEdBQUcsQ0FBWixFQUFlQSxDQUFDLEdBQUdILFVBQVUsQ0FBQ0ksTUFBOUIsRUFBc0NELENBQUMsRUFBdkMsRUFBMkM7QUFDdkNKLFlBQVEsQ0FBQ0MsVUFBVSxDQUFDRyxDQUFELENBQVgsQ0FBUjtBQUNIO0FBQ0o7QUFFRDs7Ozs7O0FBS08sU0FBU0csb0NBQVQsQ0FBOENQLFFBQTlDLEVBQXdEO0FBQzNELE1BQU1DLFVBQVUsR0FBR0MsUUFBUSxDQUFDQyxzQkFBVCxDQUFnQywrQkFBaEMsS0FBb0UsRUFBdkY7O0FBQ0EsT0FBSSxJQUFJQyxDQUFDLEdBQUcsQ0FBWixFQUFlQSxDQUFDLEdBQUdILFVBQVUsQ0FBQ0ksTUFBOUIsRUFBc0NELENBQUMsRUFBdkMsRUFBMkM7QUFDdkNKLFlBQVEsQ0FBQ0MsVUFBVSxDQUFDRyxDQUFELENBQVgsQ0FBUjtBQUNIO0FBQ0o7QUFFRDs7Ozs7O0FBS08sU0FBU0ksbUNBQVQsQ0FBNkNSLFFBQTdDLEVBQXVEO0FBQzFELE1BQU1DLFVBQVUsR0FBR0MsUUFBUSxDQUFDQyxzQkFBVCxDQUFnQyxrQ0FBaEMsS0FBdUUsRUFBMUY7O0FBQ0EsT0FBSSxJQUFJQyxDQUFDLEdBQUcsQ0FBWixFQUFlQSxDQUFDLEdBQUdILFVBQVUsQ0FBQ0ksTUFBOUIsRUFBc0NELENBQUMsRUFBdkMsRUFBMkM7QUFDdkNKLFlBQVEsQ0FBQ0MsVUFBVSxDQUFDRyxDQUFELENBQVgsQ0FBUjtBQUNIO0FBQ0o7QUFFRDs7Ozs7O0FBS08sU0FBU0ssZ0NBQVQsQ0FBMENULFFBQTFDLEVBQW9EO0FBQ3ZELE1BQU1DLFVBQVUsR0FBR0MsUUFBUSxDQUFDQyxzQkFBVCxDQUFnQywwQkFBaEMsS0FBK0QsRUFBbEY7O0FBQ0EsT0FBSSxJQUFJQyxDQUFDLEdBQUcsQ0FBWixFQUFlQSxDQUFDLEdBQUdILFVBQVUsQ0FBQ0ksTUFBOUIsRUFBc0NELENBQUMsRUFBdkMsRUFBMkM7QUFDdkNKLFlBQVEsQ0FBQ0MsVUFBVSxDQUFDRyxDQUFELENBQVgsQ0FBUjtBQUNIO0FBQ0o7QUFFRDs7Ozs7O0FBS08sU0FBU00sZ0NBQVQsQ0FBMENWLFFBQTFDLEVBQW9EO0FBQ3ZELE1BQU1DLFVBQVUsR0FBR0MsUUFBUSxDQUFDQyxzQkFBVCxDQUFnQyxnQ0FBaEMsS0FBcUUsRUFBeEY7O0FBQ0EsT0FBSSxJQUFJQyxDQUFDLEdBQUcsQ0FBWixFQUFlQSxDQUFDLEdBQUdILFVBQVUsQ0FBQ0ksTUFBOUIsRUFBc0NELENBQUMsRUFBdkMsRUFBMkM7QUFDdkNKLFlBQVEsQ0FBQ0MsVUFBVSxDQUFDRyxDQUFELENBQVgsQ0FBUjtBQUNIO0FBQ0oiLCJmaWxlIjoiLi9zcmMvcmVzb3VyY2VzL2pzL3V0aWxzL2VsZW1lbnQtY29udGFpbmVyLWhlbHBlci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSXRlcmF0ZSBhbGwgY29udGVudCBlbGVtZW50cyBvZiBlYWNoIHR5cGVcbiAqIGUuZy4gJ3RleHQvcGxhaW4nLCAndGV4dC9tYXJrZG93bicsICdtZWRpYScsIC4uLlxuICogXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgb24gZWFjaCBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXRlcmF0ZUFsbEVsZW1lbnRDb250YWluZXJzKGNhbGxiYWNrKSB7XG4gICAgY29uc3QgY29udGFpbmVycyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJXWVNJV1lHX19jb250YWluZXJcIikgfHwgW107XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGNvbnRhaW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2FsbGJhY2soY29udGFpbmVyc1tpXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEl0ZXJhdGUgYWxsIHRleHQgZWxlbWVudHNcbiAqICd0ZXh0L3BsYWluJyBhbmQgJ3RleHQvbWFya2Rvd24nXG4gKiBcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBvbiBlYWNoIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpdGVyYXRlQWxsVGV4dEVsZW1lbnRDb250YWluZXJzKGNhbGxiYWNrKSB7XG4gICAgY29uc3QgY29udGFpbmVycyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJXWVNJV1lHX19jb250YWluZXItdGV4dFwiKSB8fCBbXTtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgY29udGFpbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjYWxsYmFjayhjb250YWluZXJzW2ldKTtcbiAgICB9XG59XG5cbi8qKlxuICogSXRlcmF0ZSBhbGwgcGxhaW4gdGV4dCBlbGVtZW50cyAndGV4dC9wbGFpbidcbiAqIFxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIG9uIGVhY2ggZWxlbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGl0ZXJhdGVBbGxUZXh0UGxhaW5FbGVtZW50Q29udGFpbmVycyhjYWxsYmFjaykge1xuICAgIGNvbnN0IGNvbnRhaW5lcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiV1lTSVdZR19fY29udGFpbmVyLXRleHQtcGxhaW5cIikgfHwgW107XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGNvbnRhaW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2FsbGJhY2soY29udGFpbmVyc1tpXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEl0ZXJhdGUgYWxsIG1hcmtkb3duIGVsZW1lbnRzICd0ZXh0L21hcmtkb3duJ1xuICogXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgb24gZWFjaCBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXRlcmF0ZUFsbE1hcmtkb3duRWxlbWVudENvbnRhaW5lcnMoY2FsbGJhY2spIHtcbiAgICBjb25zdCBjb250YWluZXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIldZU0lXWUdfX2NvbnRhaW5lci10ZXh0LW1hcmtkb3duXCIpIHx8IFtdO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjb250YWluZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNhbGxiYWNrKGNvbnRhaW5lcnNbaV0pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJdGVyYXRlIGFsbCBtZWRpYSBlbGVtZW50cyAnbWVkaWEnXG4gKiBcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBvbiBlYWNoIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpdGVyYXRlQWxsTWVkaWFFbGVtZW50Q29udGFpbmVycyhjYWxsYmFjaykge1xuICAgIGNvbnN0IGNvbnRhaW5lcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiV1lTSVdZR19fY29udGFpbmVyLW1lZGlhXCIpIHx8IFtdO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjb250YWluZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNhbGxiYWNrKGNvbnRhaW5lcnNbaV0pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJdGVyYXRlIGFsbCBtZWRpYSBlbGVtZW50cyAnbWVkaWEvaW1hZ2UnXG4gKiBcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBvbiBlYWNoIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpdGVyYXRlQWxsSW1hZ2VFbGVtZW50Q29udGFpbmVycyhjYWxsYmFjaykge1xuICAgIGNvbnN0IGNvbnRhaW5lcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiV1lTSVdZR19fY29udGFpbmVyLW1lZGlhLWltYWdlXCIpIHx8IFtdO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjb250YWluZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNhbGxiYWNrKGNvbnRhaW5lcnNbaV0pO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/resources/js/utils/element-container-helper.js\n");

/***/ }),

/***/ "./src/resources/js/utils/event-broker.js":
/*!************************************************!*\
  !*** ./src/resources/js/utils/event-broker.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return stopEvent; });\n/**\n * Stop all further event handling.\n *\n * @param {object} e event object\n *\n * @return {boolean} false to cancel further event handling (old style)\n */\nfunction stopEvent(e) {\n  // local event handling\n  if (e) {\n    e.preventDefault();\n    e.stopPropagation();\n  } // global event handling\n\n\n  var globalEvent = window.event;\n\n  if (globalEvent) {\n    if (globalEvent.preventDefault) {\n      globalEvent.preventDefault();\n    } else {\n      globalEvent.returnValue = false;\n    }\n  } // cancel further event handling\n\n\n  return false;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL3V0aWxzL2V2ZW50LWJyb2tlci5qcz9iMDlkIl0sIm5hbWVzIjpbInN0b3BFdmVudCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImdsb2JhbEV2ZW50Iiwid2luZG93IiwiZXZlbnQiLCJyZXR1cm5WYWx1ZSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBOzs7Ozs7O0FBT2UsU0FBU0EsU0FBVCxDQUFtQkMsQ0FBbkIsRUFBc0I7QUFDakM7QUFDQSxNQUFJQSxDQUFKLEVBQU87QUFDSEEsS0FBQyxDQUFDQyxjQUFGO0FBQ0FELEtBQUMsQ0FBQ0UsZUFBRjtBQUNILEdBTGdDLENBTWpDOzs7QUFDQSxNQUFNQyxXQUFXLEdBQUdDLE1BQU0sQ0FBQ0MsS0FBM0I7O0FBQ0EsTUFBSUYsV0FBSixFQUFpQjtBQUNiLFFBQUlBLFdBQVcsQ0FBQ0YsY0FBaEIsRUFBZ0M7QUFDNUJFLGlCQUFXLENBQUNGLGNBQVo7QUFDSCxLQUZELE1BR0s7QUFDREUsaUJBQVcsQ0FBQ0csV0FBWixHQUEwQixLQUExQjtBQUNIO0FBQ0osR0FmZ0MsQ0FnQmpDOzs7QUFDQSxTQUFPLEtBQVA7QUFDSCIsImZpbGUiOiIuL3NyYy9yZXNvdXJjZXMvanMvdXRpbHMvZXZlbnQtYnJva2VyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTdG9wIGFsbCBmdXJ0aGVyIGV2ZW50IGhhbmRsaW5nLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBlIGV2ZW50IG9iamVjdFxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IGZhbHNlIHRvIGNhbmNlbCBmdXJ0aGVyIGV2ZW50IGhhbmRsaW5nIChvbGQgc3R5bGUpXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0b3BFdmVudChlKSB7XG4gICAgLy8gbG9jYWwgZXZlbnQgaGFuZGxpbmdcbiAgICBpZiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICAgIC8vIGdsb2JhbCBldmVudCBoYW5kbGluZ1xuICAgIGNvbnN0IGdsb2JhbEV2ZW50ID0gd2luZG93LmV2ZW50O1xuICAgIGlmIChnbG9iYWxFdmVudCkge1xuICAgICAgICBpZiAoZ2xvYmFsRXZlbnQucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgICAgIGdsb2JhbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWxFdmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGNhbmNlbCBmdXJ0aGVyIGV2ZW50IGhhbmRsaW5nXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/resources/js/utils/event-broker.js\n");

/***/ }),

/***/ "./src/resources/js/utils/notification.js":
/*!************************************************!*\
  !*** ./src/resources/js/utils/notification.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return notify; });\n/* harmony import */ var noty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! noty */ \"./node_modules/noty/lib/noty.js\");\n/* harmony import */ var noty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(noty__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction notify(type, message) {\n  // https://ned.im/noty/#/options\n  new noty__WEBPACK_IMPORTED_MODULE_0___default.a({\n    type: type,\n    text: message,\n    timeout: 4000,\n    closeWith: ['button']\n  }).show();\n  console.info(type, message);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL3V0aWxzL25vdGlmaWNhdGlvbi5qcz84ZTlhIl0sIm5hbWVzIjpbIm5vdGlmeSIsInR5cGUiLCJtZXNzYWdlIiwiTm90eSIsInRleHQiLCJ0aW1lb3V0IiwiY2xvc2VXaXRoIiwic2hvdyIsImNvbnNvbGUiLCJpbmZvIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRWUsU0FBU0EsTUFBVCxDQUFnQkMsSUFBaEIsRUFBc0JDLE9BQXRCLEVBQStCO0FBQzFDO0FBQ0EsTUFBSUMsMkNBQUosQ0FBUztBQUNMRixRQUFJLEVBQUVBLElBREQ7QUFFTEcsUUFBSSxFQUFFRixPQUZEO0FBR0xHLFdBQU8sRUFBRSxJQUhKO0FBSUxDLGFBQVMsRUFBRSxDQUFFLFFBQUY7QUFKTixHQUFULEVBS0dDLElBTEg7QUFNQUMsU0FBTyxDQUFDQyxJQUFSLENBQWFSLElBQWIsRUFBbUJDLE9BQW5CO0FBQ0giLCJmaWxlIjoiLi9zcmMvcmVzb3VyY2VzL2pzL3V0aWxzL25vdGlmaWNhdGlvbi5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOb3R5IGZyb20gJ25vdHknO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBub3RpZnkodHlwZSwgbWVzc2FnZSkge1xuICAgIC8vIGh0dHBzOi8vbmVkLmltL25vdHkvIy9vcHRpb25zXG4gICAgbmV3IE5vdHkoe1xuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICB0ZXh0OiBtZXNzYWdlLFxuICAgICAgICB0aW1lb3V0OiA0MDAwLFxuICAgICAgICBjbG9zZVdpdGg6IFsgJ2J1dHRvbicgXVxuICAgIH0pLnNob3coKTtcbiAgICBjb25zb2xlLmluZm8odHlwZSwgbWVzc2FnZSk7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/resources/js/utils/notification.js\n");

/***/ }),

/***/ "./src/resources/js/utils/save.js":
/*!****************************************!*\
  !*** ./src/resources/js/utils/save.js ***!
  \****************************************/
/*! exports provided: save, saveAll */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"save\", function() { return save; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"saveAll\", function() { return saveAll; });\n/* harmony import */ var _notification__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./notification */ \"./src/resources/js/utils/notification.js\");\n/* harmony import */ var _elements_strategy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../elements/strategy */ \"./src/resources/js/elements/strategy.js\");\n\n\n/**\n * Save specific element container.\n * @param {object} container html element of element container\n */\n\nfunction save(container) {\n  document.body.setAttribute('cursor-wait', true);\n  container.dataset.preventBlurEvent = 'true';\n  container.blur();\n  var strategy = Object(_elements_strategy__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(container.dataset.mimeType);\n  strategy.save(container).then(function (xmlHttp) {\n    if (!xmlHttp) {\n      // no db update\n      var value = container.dataset.valueCurrent;\n\n      if (value) {\n        return Object(_elements_strategy__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(container.dataset.mimeType).refreshValue(container, value);\n      }\n\n      return Promise.resolve();\n    }\n\n    var data = JSON.parse(xmlHttp.responseText);\n    return strategy.refresh(container, data);\n  }).then(function () {\n    // notify user\n    Object(_notification__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('success', 'Changes saved successfully.');\n    return Promise.resolve();\n  })[\"catch\"](handleError)[\"finally\"](function () {\n    document.body.removeAttribute('cursor-wait');\n  });\n}\n/**\n * Save all element container.\n */\n\nfunction saveAll() {\n  document.body.setAttribute('cursor-wait', true);\n  var activeElement = null;\n\n  if (document.activeElement.classList.contains('WYSIWYG__container')) {\n    activeElement = document.activeElement;\n    activeElement.dataset.preventBlurEvent = 'true';\n    activeElement.blur();\n  }\n\n  var promises = [];\n  Object(_elements_strategy__WEBPACK_IMPORTED_MODULE_1__[\"iterateAllStrategies\"])(function (name, strategy) {\n    promises.push(strategy.saveAll().then(function (xmlHttp) {\n      if (!xmlHttp) {\n        // no db update\n        if (activeElement) {\n          var value = activeElement.dataset.valueCurrent;\n\n          if (value) {\n            return Object(_elements_strategy__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(activeElement.dataset.mimeType).refreshValue(activeElement, value);\n          }\n        }\n\n        return Promise.resolve();\n      }\n\n      var dataset = JSON.parse(xmlHttp.responseText);\n      var refreshPromises = [];\n      strategy.iterateAllElementContainers(function (container) {\n        var i = 0;\n\n        for (; i < dataset.length; i++) {\n          var data = dataset[i];\n\n          if (data.id === container.dataset.id) {\n            refreshPromises.push(strategy.refresh(container, data)); //dataset.splice(i);  // | speed up, but is it possible that\n            //break;              // | one element is multiple time on one page?\n          }\n        }\n\n        dataset.splice(i);\n      });\n      return Promise.all(refreshPromises);\n    }));\n  });\n  Promise.all(promises).then(function () {\n    // clear storage\n    window.wysiwyg.storage.media = []; // notify user\n\n    Object(_notification__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('success', 'All changes saved successfully.');\n    return Promise.resolve();\n  })[\"catch\"](handleError)[\"finally\"](function () {\n    document.body.removeAttribute('cursor-wait');\n  });\n} //------------------------------------------------------\\\\\n//------------------  P R I V A T E  -------------------\\\\\n//------------------------------------------------------\\\\\n\nfunction handleError(reason) {\n  console.error(reason);\n\n  if (!reason || !reason.error) {\n    // unknown error (ugly display)\n    Object(_notification__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('error', reason);\n    return Promise.resolve();\n  }\n\n  if (typeof reason.error.obj.status !== 'undefined' && typeof reason.error.obj.status !== 'undefined') {\n    var xmlHttp = reason.error.obj;\n    Object(_notification__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('error', \"Oh no. Request failed. Status: \".concat(xmlHttp.status, \"<br/><br/>Response:<br/>\").concat(xmlHttp.responseText));\n    return Promise.resolve();\n  }\n\n  if (typeof reason.error.msg !== 'undefined') {\n    Object(_notification__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('error', reason.error.msg);\n    return Promise.resolve();\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL2pzL3V0aWxzL3NhdmUuanM/NDUwYSJdLCJuYW1lcyI6WyJzYXZlIiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJib2R5Iiwic2V0QXR0cmlidXRlIiwiZGF0YXNldCIsInByZXZlbnRCbHVyRXZlbnQiLCJibHVyIiwic3RyYXRlZ3kiLCJnZXRTdHJhdGVneSIsIm1pbWVUeXBlIiwidGhlbiIsInhtbEh0dHAiLCJ2YWx1ZSIsInZhbHVlQ3VycmVudCIsInJlZnJlc2hWYWx1ZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInJlZnJlc2giLCJub3RpZnkiLCJoYW5kbGVFcnJvciIsInJlbW92ZUF0dHJpYnV0ZSIsInNhdmVBbGwiLCJhY3RpdmVFbGVtZW50IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJwcm9taXNlcyIsIml0ZXJhdGVBbGxTdHJhdGVnaWVzIiwibmFtZSIsInB1c2giLCJyZWZyZXNoUHJvbWlzZXMiLCJpdGVyYXRlQWxsRWxlbWVudENvbnRhaW5lcnMiLCJpIiwibGVuZ3RoIiwiaWQiLCJzcGxpY2UiLCJhbGwiLCJ3aW5kb3ciLCJ3eXNpd3lnIiwic3RvcmFnZSIsIm1lZGlhIiwicmVhc29uIiwiY29uc29sZSIsImVycm9yIiwib2JqIiwic3RhdHVzIiwibXNnIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBOzs7OztBQUlPLFNBQVNBLElBQVQsQ0FBY0MsU0FBZCxFQUF5QjtBQUM1QkMsVUFBUSxDQUFDQyxJQUFULENBQWNDLFlBQWQsQ0FBMkIsYUFBM0IsRUFBMEMsSUFBMUM7QUFFQUgsV0FBUyxDQUFDSSxPQUFWLENBQWtCQyxnQkFBbEIsR0FBcUMsTUFBckM7QUFDQUwsV0FBUyxDQUFDTSxJQUFWO0FBRUEsTUFBTUMsUUFBUSxHQUFHQyxrRUFBVyxDQUFDUixTQUFTLENBQUNJLE9BQVYsQ0FBa0JLLFFBQW5CLENBQTVCO0FBQ0FGLFVBQVEsQ0FBQ1IsSUFBVCxDQUFjQyxTQUFkLEVBQ0NVLElBREQsQ0FDTSxVQUFDQyxPQUFELEVBQWE7QUFDZixRQUFLLENBQUVBLE9BQVAsRUFBZ0I7QUFDWjtBQUNBLFVBQU1DLEtBQUssR0FBR1osU0FBUyxDQUFDSSxPQUFWLENBQWtCUyxZQUFoQzs7QUFDQSxVQUFJRCxLQUFKLEVBQVc7QUFDUCxlQUFPSixrRUFBVyxDQUFDUixTQUFTLENBQUNJLE9BQVYsQ0FBa0JLLFFBQW5CLENBQVgsQ0FDRkssWUFERSxDQUNXZCxTQURYLEVBQ3NCWSxLQUR0QixDQUFQO0FBRUg7O0FBQ0QsYUFBT0csT0FBTyxDQUFDQyxPQUFSLEVBQVA7QUFDSDs7QUFFRCxRQUFNQyxJQUFJLEdBQUdDLElBQUksQ0FBQ0MsS0FBTCxDQUFXUixPQUFPLENBQUNTLFlBQW5CLENBQWI7QUFDQSxXQUFPYixRQUFRLENBQUNjLE9BQVQsQ0FBaUJyQixTQUFqQixFQUE0QmlCLElBQTVCLENBQVA7QUFDSCxHQWRELEVBZUNQLElBZkQsQ0FlTSxZQUFNO0FBQ1I7QUFDQVksaUVBQU0sQ0FBQyxTQUFELEVBQVksNkJBQVosQ0FBTjtBQUNBLFdBQU9QLE9BQU8sQ0FBQ0MsT0FBUixFQUFQO0FBQ0gsR0FuQkQsV0FvQk9PLFdBcEJQLGFBcUJTLFlBQU07QUFDWHRCLFlBQVEsQ0FBQ0MsSUFBVCxDQUFjc0IsZUFBZCxDQUE4QixhQUE5QjtBQUNILEdBdkJEO0FBd0JIO0FBRUQ7Ozs7QUFHTyxTQUFTQyxPQUFULEdBQW1CO0FBQ3RCeEIsVUFBUSxDQUFDQyxJQUFULENBQWNDLFlBQWQsQ0FBMkIsYUFBM0IsRUFBMEMsSUFBMUM7QUFFQSxNQUFJdUIsYUFBYSxHQUFHLElBQXBCOztBQUNBLE1BQUl6QixRQUFRLENBQUN5QixhQUFULENBQXVCQyxTQUF2QixDQUFpQ0MsUUFBakMsQ0FBMEMsb0JBQTFDLENBQUosRUFBcUU7QUFDakVGLGlCQUFhLEdBQUd6QixRQUFRLENBQUN5QixhQUF6QjtBQUNBQSxpQkFBYSxDQUFDdEIsT0FBZCxDQUFzQkMsZ0JBQXRCLEdBQXlDLE1BQXpDO0FBQ0FxQixpQkFBYSxDQUFDcEIsSUFBZDtBQUNIOztBQUVELE1BQUl1QixRQUFRLEdBQUcsRUFBZjtBQUNBQyxpRkFBb0IsQ0FBQyxVQUFDQyxJQUFELEVBQU94QixRQUFQLEVBQW9CO0FBQ3JDc0IsWUFBUSxDQUFDRyxJQUFULENBQWN6QixRQUFRLENBQUNrQixPQUFULEdBQW1CZixJQUFuQixDQUF3QixVQUFDQyxPQUFELEVBQWE7QUFDL0MsVUFBSyxDQUFFQSxPQUFQLEVBQWdCO0FBQ1o7QUFDQSxZQUFJZSxhQUFKLEVBQW1CO0FBQ2YsY0FBTWQsS0FBSyxHQUFHYyxhQUFhLENBQUN0QixPQUFkLENBQXNCUyxZQUFwQzs7QUFDQSxjQUFJRCxLQUFKLEVBQVc7QUFDUCxtQkFBT0osa0VBQVcsQ0FBQ2tCLGFBQWEsQ0FBQ3RCLE9BQWQsQ0FBc0JLLFFBQXZCLENBQVgsQ0FDRkssWUFERSxDQUNXWSxhQURYLEVBQzBCZCxLQUQxQixDQUFQO0FBRUg7QUFDSjs7QUFDRCxlQUFPRyxPQUFPLENBQUNDLE9BQVIsRUFBUDtBQUNIOztBQUVELFVBQUlaLE9BQU8sR0FBR2MsSUFBSSxDQUFDQyxLQUFMLENBQVdSLE9BQU8sQ0FBQ1MsWUFBbkIsQ0FBZDtBQUNBLFVBQUlhLGVBQWUsR0FBRyxFQUF0QjtBQUVBMUIsY0FBUSxDQUFDMkIsMkJBQVQsQ0FBcUMsVUFBQ2xDLFNBQUQsRUFBZTtBQUNoRCxZQUFJbUMsQ0FBQyxHQUFHLENBQVI7O0FBQ0EsZUFBUUEsQ0FBQyxHQUFHL0IsT0FBTyxDQUFDZ0MsTUFBcEIsRUFBNEJELENBQUMsRUFBN0IsRUFBaUM7QUFDN0IsY0FBTWxCLElBQUksR0FBR2IsT0FBTyxDQUFDK0IsQ0FBRCxDQUFwQjs7QUFDQSxjQUFJbEIsSUFBSSxDQUFDb0IsRUFBTCxLQUFZckMsU0FBUyxDQUFDSSxPQUFWLENBQWtCaUMsRUFBbEMsRUFBc0M7QUFDbENKLDJCQUFlLENBQUNELElBQWhCLENBQXFCekIsUUFBUSxDQUFDYyxPQUFULENBQWlCckIsU0FBakIsRUFBNEJpQixJQUE1QixDQUFyQixFQURrQyxDQUVsQztBQUNBO0FBQ0g7QUFDSjs7QUFDRGIsZUFBTyxDQUFDa0MsTUFBUixDQUFlSCxDQUFmO0FBQ0gsT0FYRDtBQWFBLGFBQU9wQixPQUFPLENBQUN3QixHQUFSLENBQVlOLGVBQVosQ0FBUDtBQUNILEtBOUJhLENBQWQ7QUErQkgsR0FoQ21CLENBQXBCO0FBa0NBbEIsU0FBTyxDQUFDd0IsR0FBUixDQUFZVixRQUFaLEVBQ0NuQixJQURELENBQ00sWUFBTTtBQUNSO0FBQ0E4QixVQUFNLENBQUNDLE9BQVAsQ0FBZUMsT0FBZixDQUF1QkMsS0FBdkIsR0FBK0IsRUFBL0IsQ0FGUSxDQUlSOztBQUNBckIsaUVBQU0sQ0FBQyxTQUFELEVBQVksaUNBQVosQ0FBTjtBQUNBLFdBQU9QLE9BQU8sQ0FBQ0MsT0FBUixFQUFQO0FBQ0gsR0FSRCxXQVNPTyxXQVRQLGFBVVMsWUFBTTtBQUNYdEIsWUFBUSxDQUFDQyxJQUFULENBQWNzQixlQUFkLENBQThCLGFBQTlCO0FBQ0gsR0FaRDtBQWFILEMsQ0FHRDtBQUNBO0FBQ0E7O0FBRUEsU0FBU0QsV0FBVCxDQUFxQnFCLE1BQXJCLEVBQTZCO0FBQ3pCQyxTQUFPLENBQUNDLEtBQVIsQ0FBY0YsTUFBZDs7QUFDQSxNQUFJLENBQUNBLE1BQUQsSUFBVyxDQUFDQSxNQUFNLENBQUNFLEtBQXZCLEVBQThCO0FBQzFCO0FBQ0F4QixpRUFBTSxDQUFDLE9BQUQsRUFBVXNCLE1BQVYsQ0FBTjtBQUNBLFdBQU83QixPQUFPLENBQUNDLE9BQVIsRUFBUDtBQUNIOztBQUNELE1BQUksT0FBTzRCLE1BQU0sQ0FBQ0UsS0FBUCxDQUFhQyxHQUFiLENBQWlCQyxNQUF4QixLQUFtQyxXQUFuQyxJQUFrRCxPQUFPSixNQUFNLENBQUNFLEtBQVAsQ0FBYUMsR0FBYixDQUFpQkMsTUFBeEIsS0FBbUMsV0FBekYsRUFBc0c7QUFDbEcsUUFBTXJDLE9BQU8sR0FBR2lDLE1BQU0sQ0FBQ0UsS0FBUCxDQUFhQyxHQUE3QjtBQUNBekIsaUVBQU0sQ0FBQyxPQUFELDJDQUE0Q1gsT0FBTyxDQUFDcUMsTUFBcEQscUNBQXFGckMsT0FBTyxDQUFDUyxZQUE3RixFQUFOO0FBQ0EsV0FBT0wsT0FBTyxDQUFDQyxPQUFSLEVBQVA7QUFDSDs7QUFDRCxNQUFJLE9BQU80QixNQUFNLENBQUNFLEtBQVAsQ0FBYUcsR0FBcEIsS0FBNEIsV0FBaEMsRUFBNkM7QUFDekMzQixpRUFBTSxDQUFDLE9BQUQsRUFBVXNCLE1BQU0sQ0FBQ0UsS0FBUCxDQUFhRyxHQUF2QixDQUFOO0FBQ0EsV0FBT2xDLE9BQU8sQ0FBQ0MsT0FBUixFQUFQO0FBQ0g7QUFDSiIsImZpbGUiOiIuL3NyYy9yZXNvdXJjZXMvanMvdXRpbHMvc2F2ZS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBub3RpZnkgZnJvbSAnLi9ub3RpZmljYXRpb24nO1xuaW1wb3J0IGdldFN0cmF0ZWd5LCB7IGl0ZXJhdGVBbGxTdHJhdGVnaWVzIH0gZnJvbSAnLi4vZWxlbWVudHMvc3RyYXRlZ3knO1xuXG5cbi8qKlxuICogU2F2ZSBzcGVjaWZpYyBlbGVtZW50IGNvbnRhaW5lci5cbiAqIEBwYXJhbSB7b2JqZWN0fSBjb250YWluZXIgaHRtbCBlbGVtZW50IG9mIGVsZW1lbnQgY29udGFpbmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYXZlKGNvbnRhaW5lcikge1xuICAgIGRvY3VtZW50LmJvZHkuc2V0QXR0cmlidXRlKCdjdXJzb3Itd2FpdCcsIHRydWUpO1xuXG4gICAgY29udGFpbmVyLmRhdGFzZXQucHJldmVudEJsdXJFdmVudCA9ICd0cnVlJztcbiAgICBjb250YWluZXIuYmx1cigpO1xuICAgIFxuICAgIGNvbnN0IHN0cmF0ZWd5ID0gZ2V0U3RyYXRlZ3koY29udGFpbmVyLmRhdGFzZXQubWltZVR5cGUpO1xuICAgIHN0cmF0ZWd5LnNhdmUoY29udGFpbmVyKVxuICAgIC50aGVuKCh4bWxIdHRwKSA9PiB7XG4gICAgICAgIGlmICggISB4bWxIdHRwKSB7XG4gICAgICAgICAgICAvLyBubyBkYiB1cGRhdGVcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY29udGFpbmVyLmRhdGFzZXQudmFsdWVDdXJyZW50O1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFN0cmF0ZWd5KGNvbnRhaW5lci5kYXRhc2V0Lm1pbWVUeXBlKVxuICAgICAgICAgICAgICAgICAgICAucmVmcmVzaFZhbHVlKGNvbnRhaW5lciwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoeG1sSHR0cC5yZXNwb25zZVRleHQpO1xuICAgICAgICByZXR1cm4gc3RyYXRlZ3kucmVmcmVzaChjb250YWluZXIsIGRhdGEpO1xuICAgIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyBub3RpZnkgdXNlclxuICAgICAgICBub3RpZnkoJ3N1Y2Nlc3MnLCAnQ2hhbmdlcyBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9KVxuICAgIC5jYXRjaChoYW5kbGVFcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQXR0cmlidXRlKCdjdXJzb3Itd2FpdCcpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIFNhdmUgYWxsIGVsZW1lbnQgY29udGFpbmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2F2ZUFsbCgpIHtcbiAgICBkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZSgnY3Vyc29yLXdhaXQnLCB0cnVlKTtcblxuICAgIGxldCBhY3RpdmVFbGVtZW50ID0gbnVsbDtcbiAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ1dZU0lXWUdfX2NvbnRhaW5lcicpKSB7XG4gICAgICAgIGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICBhY3RpdmVFbGVtZW50LmRhdGFzZXQucHJldmVudEJsdXJFdmVudCA9ICd0cnVlJztcbiAgICAgICAgYWN0aXZlRWxlbWVudC5ibHVyKCk7XG4gICAgfVxuICAgIFxuICAgIGxldCBwcm9taXNlcyA9IFtdO1xuICAgIGl0ZXJhdGVBbGxTdHJhdGVnaWVzKChuYW1lLCBzdHJhdGVneSkgPT4ge1xuICAgICAgICBwcm9taXNlcy5wdXNoKHN0cmF0ZWd5LnNhdmVBbGwoKS50aGVuKCh4bWxIdHRwKSA9PiB7XG4gICAgICAgICAgICBpZiAoICEgeG1sSHR0cCkge1xuICAgICAgICAgICAgICAgIC8vIG5vIGRiIHVwZGF0ZVxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYWN0aXZlRWxlbWVudC5kYXRhc2V0LnZhbHVlQ3VycmVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0U3RyYXRlZ3koYWN0aXZlRWxlbWVudC5kYXRhc2V0Lm1pbWVUeXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZWZyZXNoVmFsdWUoYWN0aXZlRWxlbWVudCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGRhdGFzZXQgPSBKU09OLnBhcnNlKHhtbEh0dHAucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgIGxldCByZWZyZXNoUHJvbWlzZXMgPSBbXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3RyYXRlZ3kuaXRlcmF0ZUFsbEVsZW1lbnRDb250YWluZXJzKChjb250YWluZXIpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICggOyBpIDwgZGF0YXNldC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gZGF0YXNldFtpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuaWQgPT09IGNvbnRhaW5lci5kYXRhc2V0LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoUHJvbWlzZXMucHVzaChzdHJhdGVneS5yZWZyZXNoKGNvbnRhaW5lciwgZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9kYXRhc2V0LnNwbGljZShpKTsgIC8vIHwgc3BlZWQgdXAsIGJ1dCBpcyBpdCBwb3NzaWJsZSB0aGF0XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2JyZWFrOyAgICAgICAgICAgICAgLy8gfCBvbmUgZWxlbWVudCBpcyBtdWx0aXBsZSB0aW1lIG9uIG9uZSBwYWdlP1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhdGFzZXQuc3BsaWNlKGkpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChyZWZyZXNoUHJvbWlzZXMpO1xuICAgICAgICB9KSk7XG4gICAgfSk7XG5cbiAgICBQcm9taXNlLmFsbChwcm9taXNlcylcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIC8vIGNsZWFyIHN0b3JhZ2VcbiAgICAgICAgd2luZG93Lnd5c2l3eWcuc3RvcmFnZS5tZWRpYSA9IFtdOyAgICAgICAgXG5cbiAgICAgICAgLy8gbm90aWZ5IHVzZXJcbiAgICAgICAgbm90aWZ5KCdzdWNjZXNzJywgJ0FsbCBjaGFuZ2VzIHNhdmVkIHN1Y2Nlc3NmdWxseS4nKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKGhhbmRsZUVycm9yKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVBdHRyaWJ1dGUoJ2N1cnNvci13YWl0Jyk7XG4gICAgfSk7XG59XG5cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXFxcXG4vLy0tLS0tLS0tLS0tLS0tLS0tLSAgUCBSIEkgViBBIFQgRSAgLS0tLS0tLS0tLS0tLS0tLS0tLVxcXFxcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxcXFxuXG5mdW5jdGlvbiBoYW5kbGVFcnJvcihyZWFzb24pIHtcbiAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7XG4gICAgaWYgKCFyZWFzb24gfHwgIXJlYXNvbi5lcnJvcikge1xuICAgICAgICAvLyB1bmtub3duIGVycm9yICh1Z2x5IGRpc3BsYXkpXG4gICAgICAgIG5vdGlmeSgnZXJyb3InLCByZWFzb24pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcmVhc29uLmVycm9yLm9iai5zdGF0dXMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiByZWFzb24uZXJyb3Iub2JqLnN0YXR1cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgeG1sSHR0cCA9IHJlYXNvbi5lcnJvci5vYmo7XG4gICAgICAgIG5vdGlmeSgnZXJyb3InLCBgT2ggbm8uIFJlcXVlc3QgZmFpbGVkLiBTdGF0dXM6ICR7eG1sSHR0cC5zdGF0dXN9PGJyLz48YnIvPlJlc3BvbnNlOjxici8+JHt4bWxIdHRwLnJlc3BvbnNlVGV4dH1gKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHJlYXNvbi5lcnJvci5tc2cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG5vdGlmeSgnZXJyb3InLCByZWFzb24uZXJyb3IubXNnKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/resources/js/utils/save.js\n");

/***/ }),

/***/ "./src/resources/sass/app.scss":
/*!*************************************!*\
  !*** ./src/resources/sass/app.scss ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVzb3VyY2VzL3Nhc3MvYXBwLnNjc3M/MDRmNyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIuL3NyYy9yZXNvdXJjZXMvc2Fzcy9hcHAuc2Nzcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/resources/sass/app.scss\n");

/***/ }),

/***/ 0:
/*!*********************************************************************!*\
  !*** multi ./src/resources/js/app.js ./src/resources/sass/app.scss ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! /Users/florianheinrich/convidera/WYSIWYG/src/resources/js/app.js */"./src/resources/js/app.js");
module.exports = __webpack_require__(/*! /Users/florianheinrich/convidera/WYSIWYG/src/resources/sass/app.scss */"./src/resources/sass/app.scss");


/***/ })

/******/ });